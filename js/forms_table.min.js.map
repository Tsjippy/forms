{"version":3,"file":"forms_table.min.js","mappings":"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","sources":["webpack://forms/./forms_table.js"],"sourcesContent":["/**\r\n * We need to be carefull with this script as it has overlap with the main table.js\r\n */\r\n\r\nconsole.log(\"Formstable.js loaded\");\r\n\r\nasync function showHiddenColumns(target){\r\n\t// store as preference\r\n\tlet formData\t= new FormData();\r\n\tformData.append('form-id', target.dataset.formId);\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('forms/delete_table_prefs', formData);\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t\tlocation.reload();\r\n\t}\r\n}\r\n\r\nasync function saveColumnSettings(target){\r\n\tlet response = await FormSubmit.submitForm(target, 'forms/save_column_settings');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t\tlocation.reload();\r\n\t}\r\n}\r\n\r\nasync function saveTableSettings(target){\r\n\tlet response = await FormSubmit.submitForm(target, 'forms/save_table_settings');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\nasync function askConfirmation(text){\r\n\tlet options\t= {\r\n\t\ttitle: 'Are you sure?',\r\n\t\ttext: `Are you sure you want to ${text} this?`,\r\n\t\ticon: 'warning',\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\tcancelButtonColor: '#d33',\r\n\t\tconfirmButtonText: `Yes, ${text} it!`,\r\n\t};\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tlet result\t= await Swal.fire(options);\r\n\r\n\r\n\tdocument.fullscreenElement\r\n\r\n\treturn result.isConfirmed;\r\n}\r\n\r\nasync function removeSubmission(target){\r\n\tif(await askConfirmation('delete')){\t\t\r\n\t\tlet submissionId\t= target.closest('tr').dataset.submissionId;\r\n\t\tlet table\t\t\t= target.closest('table');\r\n\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append('form-id', table.dataset.formId);\r\n\t\tformData.append('submission-id', submissionId);\r\n\t\t\r\n\t\t//display loading gif\r\n\t\tMain.showLoader(target);\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('forms/remove_submission', formData);\r\n\r\n\t\tif(response){\r\n\t\t\ttable.querySelectorAll(`.table-row[data-submission-id=\"${submissionId}\"]`).forEach(\r\n\t\t\t\trow=>row.remove()\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function archiveSubmission(target){\t\r\n\tlet table\t\t\t= target.closest('table');\r\n\tlet tableRow\t\t= target.closest('tr');\r\n\tlet submissionId\t= tableRow.dataset.submissionId;\r\n\tlet showSwal\t\t= true;\r\n\tlet action\t\t\t= target.value;\r\n\tlet response;\r\n\r\n\tlet formData \t\t= new FormData();\r\n\tformData.append('form-id', table.dataset.formId);\r\n\tformData.append('submission-id', submissionId);\r\n\tformData.append('action', action);\r\n\t\r\n\t// Ask whether to archive one piece or the whole\r\n\tif(tableRow.dataset.subid != undefined){\r\n\t\tshowSwal = false;\r\n\r\n\t\tlet options\t= {\r\n\t\t\ttitle: `What do you want to ${action}?`,\r\n\t\t\ttext: `Do you want to ${action} just this one or the whole request?`,\r\n\t\t\ticon: 'question',\r\n\t\t\tshowDenyButton: true,\r\n\t\t\tshowCancelButton: true,\r\n\t\t\tconfirmButtonText: 'Just this one',\r\n\t\t\tdenyButtonText: 'The whole request',\r\n\t\t\tconfirmButtonColor: \"#bd2919\"\r\n\t\t};\r\n\t\r\n\t\tif(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\t\t\r\n\t\tresponse = await Swal.fire(options);\r\n\r\n\t\tif (response.isConfirmed) {\r\n\t\t\tformData.append('subid', tableRow.dataset.subid);\r\n\t\t}\r\n\t\t\r\n\t\t// skip if denied\r\n\t\tif(response.isDismissed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(showSwal){\r\n\t\tif(!await askConfirmation(action)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t//display loading gif\r\n\tMain.showLoader(target);\r\n\t\r\n\tresponse\t= await FormSubmit.fetchRestApi('forms/archive_submission', formData);\r\n\r\n\tif(response){\r\n\t\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t\t});\r\n\r\n\t\t// Create a custom event so others can listen to it.\r\n\t\t// Used by bookings uploads\r\n\t\tconst event = new Event('submissionArchived');\r\n\t\t\r\n\t\t// Delete all\r\n\t\tif(formData.get('subid') == null){\r\n\t\t\ttable.querySelectorAll(`[data-submission-id=\"${submissionId}\"]`).forEach(row=>{\r\n\t\t\t\trow.dispatchEvent(event);\r\n\r\n\t\t\t\t// just change the button name\r\n\t\t\t\tif(params.archived){\r\n\t\t\t\t\tlet element;\r\n\t\t\t\t\tif(action == 'archive'){\r\n\t\t\t\t\t\telement = row.querySelector(`.loader-wrapper, .archive`);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\telement = row.querySelector(`.loader-wrapper, .unarchive`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchangeArchiveButton(element, action);\r\n\t\t\t\t}else{\r\n\t\t\t\t\trow.remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t// Only delete subid\r\n\t\t}else{\r\n\t\t\ttable.querySelectorAll(`.table-row[data-submission-id=\"${submissionId}\"][data-subid=\"${tableRow.dataset.subid}\"]`).forEach(row=>{\r\n\t\t\t\trow.dispatchEvent(event);\r\n\t\t\t\t\r\n\t\t\t\t// just change the button name\r\n\t\t\t\tif(params.archived){\r\n\t\t\t\t\tlet loader = row.querySelector('.loader-wrapper');\r\n\t\t\t\t\t\r\n\t\t\t\t\tchangeArchiveButton(loader, action);\r\n\t\t\t\t}else{\r\n\t\t\t\t\trow.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction changeArchiveButton(element, action){\r\n\tlet text;\r\n\r\n\tif(action == 'archive'){\r\n\t\taction \t= 'unarchive';\r\n\t\ttext\t= 'Unarchive';\r\n\t}else{\r\n\t\taction \t= 'archive';\r\n\t\ttext\t= 'Archive';\r\n\t}\r\n\telement.outerHTML = `<button class=\"${action} button forms-table-action\" name=\"${action}-action\" value=\"${action}\">${text}</button>`;\r\n}\r\n\r\nfunction updatePageNav(navWrapper, pageNr){\r\n\r\n\tnavWrapper.querySelector('.current').classList.remove('current');\r\n\r\n\tnavWrapper.querySelector(`[data-nr=\"${pageNr}\"]`).classList.add('current');\r\n\r\n\t// hide prev button\r\n\tif(pageNr == 0){\r\n\t\tnavWrapper.querySelector('.prev').classList.add('hidden');\r\n\t}else{\r\n\t\tnavWrapper.querySelector('.prev').classList.remove('hidden');\r\n\t}\r\n\r\n\t// hide next button\r\n\tif(pageNr == navWrapper.querySelectorAll('.page-number').length -1){\r\n\t\tnavWrapper.querySelector('.next').classList.add('hidden');\r\n\t}else{\r\n\t\tnavWrapper.querySelector('.next').classList.remove('hidden');\r\n\t}\r\n}\r\n\r\n/**\r\n * \r\n * @param {node} target  \tThe clicked node\r\n * @param {string} action\tOne of page, sort or filter \r\n * @param {in} page\t\t\tThe page number to fetch \r\n * @returns \r\n */\r\nasync function getPage(target, action){\r\n\t// we only have one wrapper\r\n\tlet wrapper\t\t\t= target.closest('.form.table-wrapper');\r\n\r\n\tlet orgContent\t\t= wrapper.innerHTML;\r\n\r\n\tlet tableWrapper;\r\n\r\n\t// we are filtering, just take the first table wrapper\r\n\tif(action == 'filter'){\r\n\t\ttableWrapper\t= wrapper.querySelector('.form-results-wrapper');\r\n\t}else{\r\n\t\t// Only get the table wrapper to the target\r\n\t\ttableWrapper\t= target.closest('.form-results-wrapper');\r\n\t}\r\n\tlet table\t\t\t= tableWrapper.querySelector('.form-data-table:not(.hidden)');\r\n\r\n\t// Get the details\r\n\tlet formId\t\t\t= table.dataset.formId;\r\n\r\n\tlet shortcodeId\t\t= table.dataset.shortcodeId;\r\n\r\n\tlet type\t\t\t= table.dataset.type;\r\n\r\n\tlet pageSize\t\t= tableWrapper.querySelector(`select.page-size`).value;\r\n\r\n\t/**\r\n\t * We reqested another page\r\n\t */\r\n\tif(action == 'page'){\r\n\t\tlet navWrapper\t= target.closest('.form-result-navigation');\r\n\r\n\t\t// get the requested page number\r\n\t\tlet\tcurPage\t\t\t= parseInt(navWrapper.querySelector(\".page-number-wrapper .current\").dataset.nr);\r\n\t\tvar page;\r\n\r\n\t\tif(target.matches('.next')){\r\n\t\t\tpage\t= curPage + 1;\r\n\t\t}else if(target.matches('.prev')){\r\n\t\t\tpage\t= curPage - 1;\r\n\t\t}else{\r\n\t\t\tpage\t= target.dataset.nr;\r\n\t\t}\r\n\r\n\t\tupdatePageNav(navWrapper, page);\r\n\r\n\t\tlet loadedPage\t= tableWrapper.querySelector(`[data-page=\"${page}\"]`);\r\n\t\t\r\n\t\t// check if the requested page is already loaded and show it\r\n\t\tif(loadedPage != null){\r\n\t\t\tloadedPage.classList.remove('hidden');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttable.classList.add('hidden');\r\n\r\n\t\tMain.showLoader(table, false, 100, 'Loading data');\r\n\t}\r\n\r\n\t/**\r\n\t * Sorting\r\n\t */\r\n\telse if(action == 'sort' || action == 'size'){\r\n\t\ttableWrapper.classList.add(table.dataset.type);\r\n\t\ttableWrapper.innerHTML\t= Main.showLoader('', true, 100, 'Loading data', true);\r\n\t}\r\n\r\n\t// If we sort or filter we want to do so on all tables\r\n\telse{\r\n\t\ttype\t= 'all';\r\n\r\n\t\twrapper.querySelectorAll('.form-results-wrapper').forEach( el => {\r\n\t\t\tel.classList.add(el.querySelector('table').dataset.type);\r\n\r\n\t\t\tel.innerHTML\t= Main.showLoader(el, true, 100, 'Loading data', true);\r\n\t\t});\r\n\t}\r\n\r\n\tlet formData;\r\n\tif(wrapper.querySelector(\".filter-options\") == null){\r\n\t\tformData\t\t= new FormData();\r\n\t}\r\n\t\r\n\t// Include the filter options if there is a filter\r\n\telse{\r\n\t\tformData\t\t= new FormData(wrapper.querySelector(\"form.filter-options\"));\r\n\t}\r\n\r\n    formData.append('form-id', formId);\r\n    formData.append('page-number', page);\r\n\tformData.append('shortcode-id', shortcodeId);\r\n    formData.append('type', type);\r\n\tformData.append('pagesize', pageSize);\r\n\r\n\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t});\r\n\r\n\tlet archived;\r\n\tif(params['archived'] == null){\r\n\t\tarchived\t= 0;\r\n\t}else{\r\n\t\tarchived\t= 1;\r\n\t}\r\n\r\n\tlet onlyOwn;\r\n\tif(params['onlyOwn'] == null){\r\n\t\tonlyOwn\t= 0;\r\n\t}else{\r\n\t\tonlyOwn\t= 1;\r\n\t}\r\n\tformData.append('archived', archived);\r\n\tformData.append('only-own', onlyOwn);\r\n\t\r\n\tif(tableWrapper.dataset.sortcol){\r\n\t\tformData.append('sortcol', tableWrapper.dataset.sortcol);\r\n\t}\r\n\r\n\tif(tableWrapper.dataset.sortdir){\r\n\t\tformData.append('sortdir', tableWrapper.dataset.sortdir);\r\n\t}\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('forms/get_page', formData);\r\n\r\n\tif(response){\r\n\t\tfor (let [tableType, tableHtml] of Object.entries(response)) {\r\n\t\t\tif(action == 'page'){\r\n\t\t\t\tconst parser \t= new DOMParser();\r\n\t\t\t\tconst doc \t\t= parser.parseFromString(tableHtml, \"text/html\");\r\n\r\n\t\t\t\t// append the new page to the existing pages\r\n\t\t\t\ttableHtml\t\t= doc.querySelector(\"table.form-data-table\").outerHTML; \r\n\r\n\t\t\t\ttableWrapper.querySelector(`.loader-wrapper`).outerHTML = tableHtml;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Overwrite the table and navigation\r\n\t\t\telse{\r\n\t\t\t\twrapper.querySelector(`.form-results-wrapper.${tableType}`).outerHTML\t= tableHtml;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(select => Main.attachNiceSelect(select));\r\n\t}else{\r\n\t\t// restore prev data\r\n\t\twrapper.innerHTML\t= orgContent;\r\n\t}\r\n}\r\n\r\nfunction prepareInputs(target){\r\n\t// attach upload listenerss\r\n\ttarget.querySelectorAll('.file-upload-wrap').forEach(el => el.addEventListener('uploadfinished', uploadFinished));\r\n\r\n\t// Attache niceselects\r\n\ttarget.querySelectorAll('select').forEach(el => {\r\n\t\tif(el._niceSelect == undefined){\r\n\t\t\tMain.attachNiceSelect(el);\r\n\t\t}\r\n\t});\r\n\r\n\t// focus on the first input\r\n\ttarget.querySelector('input, select, textarea').focus();\r\n\r\n\t// Show the save button\r\n\ttarget.querySelector(`button.save`).classList.remove('hidden');\r\n}\r\n\r\nasync function getInputHtml(target){\r\n\tlet data\t\t\t= target.dataset;\r\n    let submissionId\t= target.closest('tr').dataset.submissionId;\r\n\tlet shortcodeId\t\t= target.closest('table').dataset.shortcodeId;\r\n    let loader\t\t\t= Main.showLoader(target.querySelector('.override-wrapper'), true, 50, 'Loading...');\r\n\r\n\tlet formData \t\t= new FormData();\r\n\tif(data.subid != undefined){\r\n    \tformData.append('subid', data.subid);\r\n\t}\r\n    formData.append('submission-id', submissionId);\r\n\tformData.append('shortcode-id', shortcodeId);\r\n    formData.append('element-id', data.elementId);\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('forms/get_input_html', formData);\r\n\r\n\tif(response){\r\n\t\tloader.outerHTML\t= `<div class='input-wrapper'>${response}</div>`;\r\n\r\n\t\tprepareInputs(target);\r\n\t}else{\r\n\t\ttarget.innerHTML\t= target.dataset.oldHtml;\r\n\t\ttarget.classList.remove('editing');\r\n\t}\r\n}\r\n\r\nfunction uploadFinished(event){\r\n\tif(event.target.closest('td') != null){\r\n\t\t//remove as soon as we come here\r\n\t\tdocument.removeEventListener('uploadfinished', uploadFinished);\r\n\t\tprocessFormsTableInput(document.querySelector('[data-oldText]'));\r\n\t}\r\n}\r\n\r\n//function to get the temp input value and save it over AJAX\r\nasync function processFormsTableInput(target){\r\n\t// Do not proceed if this is a schedule table\r\n\tif( target.closest('.schedule') != null ){\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet table\t\t\t= target.closest('table');\r\n\tlet cell\t\t\t= target.closest('td');\r\n    let data\t\t\t= cell.dataset;\r\n\tlet submissionId\t= target.closest('tr').dataset.submissionId;\r\n\tlet value\t\t\t= FormFunctions.getFieldValue(target, cell, false);\r\n\tlet shortcodeId\t\t= '';\r\n\r\n\tif(target.closest('[data-shortcode-id]') != null){\r\n\t\tshortcodeId\t= target.closest('[data-shortcode-id]').dataset.shortcodeId;\r\n\t}\r\n\r\n\t//Only update when needed\r\n\tif (value != data.oldText){\r\n\t\t// hide the submit button\r\n\t\tcell.querySelectorAll(`button.save`).forEach(el => el.classList.add('hidden'));\r\n\r\n\t\tMain.showLoader(cell.querySelector('.input-wrapper'),true, 50, 'Saving...');\r\n\t\t\r\n\t\t// Submit new value and receive the filtered value back\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append('submission-id', submissionId);\r\n\t\tformData.append('element-id', data.elementId);\r\n\t\tformData.append('new-value', JSON.stringify(value));\r\n\t\tif(data.subid != undefined){\r\n\t\t\tformData.append('subid', data.subid);\r\n\t\t}\r\n\r\n\t\tif(shortcodeId != ''){\r\n\t\t\tformData.append('shortcode-id', shortcodeId);\r\n\t\t}\r\n\t\t\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('forms/edit_value', formData);\r\n\t\r\n\t\tif(response){\r\n\t\t\ttarget.classList.remove('editing');\r\n\r\n\t\t\tlet newValue = response['new-value'];\r\n\t\t\t\r\n\t\t\tif(typeof(newValue) == 'string'){\r\n\t\t\t\tnewValue.replace('_', ' ');\r\n\t\t\t}\r\n\r\n\t\t\t//Replace the input element with its value\r\n\t\t\tif(newValue == \"\"){\r\n\t\t\t\tnewValue = \"X\";\r\n\t\t\t}\r\n\t\r\n\t\t\t//Update all occurences of this field\r\n\t\t\tif(data['subid'] != undefined){\r\n\t\t\t\tlet targets\t= table.querySelectorAll(`tr[data-submission-id=\"${submissionId}\"] td[data-element-id=\"${data.elementId}\"]`);\r\n\t\t\t\ttargets.forEach(td=>{td.innerHTML = newValue;});\r\n\t\t\t}else{\r\n\t\t\t\tcell.innerHTML = newValue;\r\n\t\t\t}\r\n\t\r\n\t\t\tMain.displayMessage(response.message.replace('_', ' '));\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t// Restore the old value\r\n\tcell.innerHTML = cell.dataset.oldHtml;\r\n}\r\n\r\nconst copyContent = async (target) => {\r\n\tlet text\t= target.closest('td').innerText;\r\n    try {\r\n\t\tlet options = {\r\n\t\t\ticon: 'success',\r\n\t\t\ttitle: `Copied '${text}'`,\r\n\t\t\tshowConfirmButton: false,\r\n\t\t\ttimer: 3000\r\n\t\t};\r\n\r\n\t\tSwal.fire(options);\r\n\r\n\t\tnavigator.clipboard.writeText(text);\r\n    } catch (err) {\r\n\t\tMain.displayMessage('Failed to copy: '+err, 'error');\r\n    }\r\n}\r\n\r\nconst hideColumn = async (target) => {\r\n\t// Table itself\r\n\tif(target.parentNode.matches('th')){\r\n\t\tlet cell \t= target.parentNode;\r\n\r\n\t\t// Hide the column\r\n\t\tvar table\t\t= cell.closest('table');\r\n\t\tlet tableRows\t= table.rows;\r\n\t\tfor (const element of tableRows) {\r\n\t\t\telement.cells[cell.cellIndex].classList.add('hidden')\r\n\t\t}\r\n\r\n\t\t// store as preference\r\n\t\tvar formData\t= new FormData();\r\n\t\tformData.append('form-id', table.dataset.formId);\r\n\t\tformData.append('column-name', cell.id);\r\n\t\t\r\n\t\tawait FormSubmit.fetchRestApi('forms/save_table_prefs', formData);\r\n\t// Table settings\r\n\t}else{\r\n\t\tif(target.classList.contains('visible')){\r\n\t\t\ttarget.classList.replace('visible', 'invisible');\r\n\t\t\ttarget.src\t= target.src.replace('visible.png', 'invisible.png');\r\n\t\t\ttarget.closest('td').querySelector('input').value = 0;\r\n\t\t}else{\r\n\t\t\ttarget.classList.replace('invisible','visible');\r\n\t\t\ttarget.src\t= target.src.replace('invisible.png','visible.png');\r\n\t\t\ttarget.closest('td').querySelector('input').value = 1;\r\n\t\t}\r\n\t}\r\n}\r\n\r\ndocument.addEventListener(\"click\", event=>{\r\n\tlet target \t\t= event.target;\r\n\r\n\tif(target.name == 'submit_column_setting'){\r\n\t\tsaveColumnSettings(target);\r\n\t}else if(target.name == 'submit_table_setting'){\r\n\t\tsaveTableSettings(target);\r\n\t}else if(target.name == 'form-settings[autoarchive]'){\r\n\t\t//show auto archive fields\r\n\t\tlet el = target.closest('.table-rights-wrapper').querySelector('.auto-archive-logic');\r\n\t\tif(target.value == '1'){\r\n\t\t\tel.classList.remove('hidden');\r\n\t\t}else{\r\n\t\t\tel.classList.add('hidden');\r\n\t\t}\r\n\t}else if(\r\n\t\ttarget.closest('.form-result-navigation') != null && \r\n\t\t(\r\n\t\t\ttarget.matches('.next') || \r\n\t\t\ttarget.matches('.prev') || \r\n\t\t\ttarget.matches('.page-number') \r\n\t\t)\r\n\t){\r\n\t\tgetPage(target, 'page');\r\n\t}\r\n\r\n\t// Filter data\r\n\telse if(target.matches(`.button.filter-results`)){\r\n\t\tgetPage(target, 'filter');\r\n\t}\r\n\r\n\t// copy cell contents\r\n\telse if(target.matches('.copy')){\r\n\t\tcopyContent(target);\r\n\t}\r\n\r\n\t//Actions\r\n\telse if(target.matches('.delete.forms-table-action')){\r\n\t\tremoveSubmission(target);\r\n\t}\r\n\r\n\telse if(target.matches('.archive.forms-table-action, .unarchive.forms-table-action')){\r\n\t\tarchiveSubmission(target);\r\n\t}\r\n\t\r\n\t//Open settings modal\r\n\telse if(target.classList.contains('edit-formshortcode-settings')){\r\n\t\tMain.showModal(document.querySelector('.modal.form-shortcode-settings'));\r\n\t}\r\n\r\n\telse if(target.matches('form .table-permissions-rights-form')){\r\n\t\ttarget.closest('div').querySelector('.permission-wrapper').classList.toggle('hidden');\r\n\t}\r\n\r\n\telse if(target.matches('.reset-col-vis')){\r\n\t\tshowHiddenColumns(target);\r\n\t}else{\r\n\t\treturn;\r\n\t}\r\n\r\n\tevent.stopImmediatePropagation();\r\n});\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\t\r\n\tif(typeof(Sortable) != 'undefined'){\r\n\t\t//Make the sortable-column-settings-rows div sortable\r\n\t\tlet options = {\r\n\t\t\thandle: '.movecontrol',\r\n\t\t\tanimation: 150,\r\n\t\t};\r\n\r\n\t\tdocument.querySelectorAll('.sortable-column-settings-rows tbody').forEach(el=>{\r\n\t\t\tSortable.create(el, options);\r\n\t\t});\r\n\t}\r\n\r\n\tdocument.querySelectorAll('.form-data-table th').forEach(cell=>{\r\n\t\tcell.style.minWidth\t\t= parseFloat(window.getComputedStyle(cell).width) + 20 + 'px';\r\n\t});\r\n});\r\n\r\ndocument.addEventListener('change', event=>{\r\n\tlet target = event.target;\r\n\r\n\tif(target.id == 'sim-forms-selector'){\r\n\t\tdocument.querySelectorAll('.main-form-wrapper').forEach(el=>{\r\n\t\t\tel.classList.add('hidden');\r\n\t\t});\r\n\r\n\t\tdocument.getElementById(target.value).classList.remove('hidden');\r\n\r\n\t\t// position table\r\n\t\tSimTableFunctions.positionTable();\r\n\t}else if(target.matches(`.page-size`)){\r\n\t\tgetPage(target, 'size');\r\n\t}else{\r\n\t\treturn;\r\n\t}\r\n\r\n\tevent.stopImmediatePropagation();\r\n});\r\n\r\ndocument.addEventListener(\"table-content-update-inputs-loaded\", async event => {\r\n\tlet target\t= event.target;\r\n\r\n\tif( target.matches('.forms-table')){\r\n\t\tevent.preventDefault();\r\n\r\n\t\tawait getInputHtml(target);\r\n\r\n\t\tprepareInputs(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener(\"table-content-before-update\", async event => {\r\n\tlet target\t= event.target;\r\n\r\n\tif( target.matches('.forms-table')){\r\n\t\tevent.preventDefault();\r\n\r\n\t\tprocessFormsTableInput(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener(\"table-content-before-column-hide\", async event => {\r\n\tlet target\t= event.target;\r\n\r\n\tif( target.closest('.column-setting-wrapper') != null || target.closest('.form-data-table' ) != null){\r\n\t\tevent.preventDefault();\r\n\r\n\t\thideColumn(target);\r\n\t}\r\n});\r\n\r\n// Listen to the sort table event from table.js\r\ndocument.addEventListener(\"table-sorted\", async event => {\r\n\tlet target\t= event.target;\r\n\r\n\t// We only need to request a sorted table page if there are multiple pages, else the sorting is done by js\r\n\tif(target.closest(\".form-results-wrapper\").querySelector('.form-result-navigation') != null){\r\n\t\t// get a sorted table over AJAX\r\n\t\tlet sortCol\t\t\t= target.id;\r\n\t\tlet sortDir\t\t\t= target.classList.contains('desc') ? 'DESC' : 'ASC';\r\n\r\n\t\tlet tableWrapper\t= target.closest('.form-results-wrapper');\r\n\t\ttableWrapper.dataset.sortcol\t= sortCol;\r\n\t\ttableWrapper.dataset.sortdir\t= sortDir;\r\n\r\n\t\tgetPage(target, 'sort');\r\n\t}\r\n});"],"names":["async","askConfirmation","text","options","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","document","fullscreenElement","result","Swal","fire","isConfirmed","changeArchiveButton","element","action","outerHTML","getPage","target","tableWrapper","wrapper","closest","orgContent","innerHTML","querySelector","formData","table","formId","dataset","shortcodeId","type","pageSize","value","navWrapper","curPage","parseInt","nr","page","pageNr","classList","remove","add","querySelectorAll","length","updatePageNav","matches","loadedPage","Main","showLoader","forEach","el","FormData","append","archived","onlyOwn","params","Proxy","URLSearchParams","window","location","search","get","searchParams","prop","sortcol","sortdir","response","FormSubmit","fetchRestApi","tableType","tableHtml","Object","entries","DOMParser","parseFromString","select","attachNiceSelect","prepareInputs","addEventListener","uploadFinished","undefined","_niceSelect","focus","event","removeEventListener","processFormsTableInput","cell","data","submissionId","FormFunctions","getFieldValue","oldText","elementId","JSON","stringify","subid","newValue","replace","td","displayMessage","message","oldHtml","console","log","name","submitForm","reload","saveColumnSettings","saveTableSettings","innerText","showConfirmButton","timer","navigator","clipboard","writeText","err","copyContent","row","removeSubmission","tableRow","showSwal","showDenyButton","denyButtonText","isDismissed","Event","dispatchEvent","archiveSubmission","contains","showModal","toggle","showHiddenColumns","stopImmediatePropagation","handle","animation","Sortable","create","style","minWidth","parseFloat","getComputedStyle","width","id","getElementById","SimTableFunctions","positionTable","preventDefault","loader","getInputHtml","parentNode","tableRows","rows","cells","cellIndex","src","hideColumn","sortCol","sortDir"],"sourceRoot":""}