{"version":3,"file":"forms_table.min.js","mappings":"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","sources":["webpack://forms/./forms_table.js"],"sourcesContent":["\r\nconsole.log(\"Formstable.js loaded\");\r\n\r\nasync function showHiddenColumns(target){\r\n\t// store as preference\r\n\tlet formData\t= new FormData();\r\n\tformData.append('form-id', target.dataset.formId);\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('forms/delete_table_prefs', formData);\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t\tlocation.reload();\r\n\t}\r\n}\r\n\r\nasync function saveColumnSettings(target){\r\n\tlet response = await FormSubmit.submitForm(target, 'forms/save_column_settings');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t\tlocation.reload();\r\n\t}\r\n}\r\n\r\nasync function saveTableSettings(target){\r\n\tlet response = await FormSubmit.submitForm(target, 'forms/save_table_settings');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\nasync function askConfirmation(text){\r\n\tlet options\t= {\r\n\t\ttitle: 'Are you sure?',\r\n\t\ttext: `Are you sure you want to ${text} this?`,\r\n\t\ticon: 'warning',\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\tcancelButtonColor: '#d33',\r\n\t\tconfirmButtonText: `Yes, ${text} it!`,\r\n\t};\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tlet result\t= await Swal.fire(options);\r\n\r\n\r\n\tdocument.fullscreenElement\r\n\r\n\treturn result.isConfirmed;\r\n}\r\n\r\nasync function removeSubmission(target){\r\n\tif(await askConfirmation('delete')){\t\t\r\n\t\tlet submissionId\t= target.closest('tr').dataset.id;\r\n\t\tlet table\t\t\t= target.closest('table');\r\n\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append('form-id', table.dataset.formId);\r\n\t\tformData.append('submission-id', submissionId);\r\n\t\t\r\n\t\t//display loading gif\r\n\t\tMain.showLoader(target);\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('forms/remove_submission', formData);\r\n\r\n\t\tif(response){\r\n\t\t\ttable.querySelectorAll(`.table-row[data-id=\"${submissionId}\"]`).forEach(\r\n\t\t\t\trow=>row.remove()\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function archiveSubmission(target){\t\r\n\tlet table\t\t\t= target.closest('table');\r\n\tlet tableRow\t\t= target.closest('tr');\r\n\tlet submissionId\t= tableRow.dataset.id;\r\n\tlet showSwal\t\t= true;\r\n\tlet action\t\t\t= target.value;\r\n\tlet response;\r\n\r\n\tlet formData \t\t= new FormData();\r\n\tformData.append('form-id', table.dataset.formId);\r\n\tformData.append('submission-id', submissionId);\r\n\tformData.append('action', action);\r\n\t\r\n\t// Ask whether to archive one piece or the whole\r\n\tif(tableRow.dataset.subid != undefined){\r\n\t\tshowSwal = false;\r\n\r\n\t\tlet options\t= {\r\n\t\t\ttitle: `What do you want to ${action}?`,\r\n\t\t\ttext: `Do you want to ${action} just this one or the whole request?`,\r\n\t\t\ticon: 'question',\r\n\t\t\tshowDenyButton: true,\r\n\t\t\tshowCancelButton: true,\r\n\t\t\tconfirmButtonText: 'Just this one',\r\n\t\t\tdenyButtonText: 'The whole request',\r\n\t\t\tconfirmButtonColor: \"#bd2919\"\r\n\t\t};\r\n\t\r\n\t\tif(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\t\t\r\n\t\tresponse = await Swal.fire(options);\r\n\r\n\t\tif (response.isConfirmed) {\r\n\t\t\tformData.append('subid', tableRow.dataset.subid);\r\n\t\t}\r\n\t\t\r\n\t\t// skip if denied\r\n\t\tif(response.isDismissed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(showSwal){\r\n\t\tif(!await askConfirmation(action)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t//display loading gif\r\n\tMain.showLoader(target);\r\n\t\r\n\tresponse\t= await FormSubmit.fetchRestApi('forms/archive_submission', formData);\r\n\r\n\tif(response){\r\n\t\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t\t});\r\n\r\n\t\t// Create a custom event so others can listen to it.\r\n\t\t// Used by bookings uploads\r\n\t\tconst event = new Event('submissionArchived');\r\n\t\t\r\n\t\t// Delete all\r\n\t\tif(formData.get('subid') == null){\r\n\t\t\ttable.querySelectorAll(`[data-id=\"${submissionId}\"]`).forEach(row=>{\r\n\t\t\t\trow.dispatchEvent(event);\r\n\r\n\t\t\t\t// just change the button name\r\n\t\t\t\tif(params.archived){\r\n\t\t\t\t\tlet element;\r\n\t\t\t\t\tif(action == 'archive'){\r\n\t\t\t\t\t\telement = row.querySelector(`.loader-wrapper, .archive`);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\telement = row.querySelector(`.loader-wrapper, .unarchive`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchangeArchiveButton(element, action);\r\n\t\t\t\t}else{\r\n\t\t\t\t\trow.remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t// Only delete subid\r\n\t\t}else{\r\n\t\t\ttable.querySelectorAll(`.table-row[data-id=\"${submissionId}\"][data-subid=\"${tableRow.dataset.subid}\"]`).forEach(row=>{\r\n\t\t\t\trow.dispatchEvent(event);\r\n\t\t\t\t\r\n\t\t\t\t// just change the button name\r\n\t\t\t\tif(params.archived){\r\n\t\t\t\t\tlet loader = row.querySelector('.loader-wrapper');\r\n\t\t\t\t\t\r\n\t\t\t\t\tchangeArchiveButton(loader, action);\r\n\t\t\t\t}else{\r\n\t\t\t\t\trow.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction changeArchiveButton(element, action){\r\n\tlet text;\r\n\r\n\tif(action == 'archive'){\r\n\t\taction \t= 'unarchive';\r\n\t\ttext\t= 'Unarchive';\r\n\t}else{\r\n\t\taction \t= 'archive';\r\n\t\ttext\t= 'Archive';\r\n\t}\r\n\telement.outerHTML = `<button class=\"${action} button forms-table-action\" name=\"${action}-action\" value=\"${action}\">${text}</button>`;\r\n}\r\n\r\nasync function getInputHtml(target){\r\n\tlet table\t\t\t= target.closest('table');\r\n\r\n\t// First make sure we have processed all others\r\n\tdocument.querySelectorAll('td.active').forEach(td=>{\r\n\t\tif(td != target){\r\n\t\t\tprocessFormsTableInput(td);\r\n\t\t}\r\n\t});\r\n\r\n\t// There can only be one active cell per page\r\n\ttarget.classList.add('active');\r\n\r\n\tlet formId\t\t\t= table.dataset.formId;\r\n    let submissionId\t= target.closest('tr').dataset.id;\r\n\tlet data\t\t\t= target.dataset;\r\n\tlet oldText\t\t\t= target.textContent;\r\n    \r\n    Main.showLoader(target.firstChild);\r\n\t\r\n\ttarget.dataset.oldtext\t \t= oldText;\r\n\r\n\tlet formData = new FormData();\r\n    formData.append('form-id', formId);\r\n    formData.append('submission-id', submissionId);\r\n\r\n\tfor( var d in data){\r\n\t\tformData.append(d, data[d]);\r\n\t}\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('forms/get_input_html', formData);\r\n\r\n\tif(response){\r\n\t\ttarget.innerHTML\t \t\t= `<div class='input-wrapper'>${response}</div>`;\r\n\r\n\t\taddFormsTableInputEventListeners(target);\r\n\r\n\t\ttarget.querySelectorAll('.file-upload-wrap').forEach(el=>el.addEventListener('uploadfinished', uploadFinished));\r\n\r\n\t\t// show calendar by default\r\n\t\ttarget.querySelectorAll('input').forEach(el=>el.showPicker());\r\n\t}else{\r\n\t\ttarget.innerHTML\t= target.dataset.oldtext;\r\n\t\ttarget.classList.remove('active');\r\n\t}\r\n}\r\n\r\nfunction updatePageNav(navWrapper, pageNr){\r\n\r\n\tnavWrapper.querySelector('.current').classList.remove('current');\r\n\r\n\tnavWrapper.querySelector(`[data-nr=\"${pageNr}\"]`).classList.add('current');\r\n\r\n\t// hide prev button\r\n\tif(pageNr == 0){\r\n\t\tnavWrapper.querySelector('.prev').classList.add('hidden');\r\n\t}else{\r\n\t\tnavWrapper.querySelector('.prev').classList.remove('hidden');\r\n\t}\r\n\r\n\t// hide next button\r\n\tif(pageNr == navWrapper.querySelectorAll('.page-number').length -1){\r\n\t\tnavWrapper.querySelector('.next').classList.add('hidden');\r\n\t}else{\r\n\t\tnavWrapper.querySelector('.next').classList.remove('hidden');\r\n\t}\r\n}\r\n\r\nasync function getNextPage(target){\r\n\tlet wrapper\t\t\t= target.closest('.form.table-wrapper');\r\n\tlet navWrapper\t\t= target.closest('.form-result-navigation');\r\n\tlet tableWrapper\t= target.closest('.form-results-wrapper');\r\n\tlet table\t\t\t= tableWrapper.querySelector('.form-data-table:not(.hidden)');\r\n\r\n\ttable.classList.add('hidden');\r\n\r\n\t// get the requested page number\r\n\tlet\tcurPage\t\t\t= parseInt(navWrapper.querySelector(\".page-number-wrapper .current\").dataset.nr);\r\n\tlet page;\r\n\tif(target.matches('.next')){\r\n\t\tpage\t= curPage + 1;\r\n\t}else if(target.matches('.prev')){\r\n\t\tpage\t= curPage - 1;\r\n\t}else{\r\n\t\tpage\t= target.dataset.nr;\r\n\t}\r\n\t\r\n\tupdatePageNav(navWrapper, page);\r\n\r\n\t// check if the requested page is already loaded\r\n\tlet loadedPage\t= tableWrapper.querySelector(`[data-page=\"${page}\"]`);\r\n\t\r\n\tif(loadedPage != null){\r\n\t\tconsole.log(loadedPage);\r\n\t\tloadedPage.classList.remove('hidden');\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\t// request page over ajax\r\n\tlet formId\t\t\t= table.dataset.formId;\r\n\r\n\tlet loader\t\t\t= Main.showLoader(table, false);\r\n\tlet formData;\r\n\tif(wrapper.querySelector(\".filter-options\") == null){\r\n\t\tformData\t\t= new FormData();\r\n\t}else{\r\n\t\tformData\t\t= new FormData(wrapper.querySelector(\".filter-options\"));\r\n\t}\r\n\r\n    formData.append('form-id', formId);\r\n    formData.append('page-number', page);\r\n\tformData.append('shortcode-id', table.dataset.shortcodeId);\r\n    formData.append('type', table.dataset.type);\r\n\r\n\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t});\r\n\r\n\tlet archived;\r\n\tif(params['archived'] == null){\r\n\t\tarchived\t= false;\r\n\t}else{\r\n\t\tarchived\t= true;\r\n\t}\r\n\r\n\tlet onlyOwn;\r\n\tif(params['onlyOwn'] == null){\r\n\t\tonlyOwn\t= false;\r\n\t}else{\r\n\t\tonlyOwn\t= true;\r\n\t}\r\n\tformData.append('archived', archived);\r\n\tformData.append('only-own', onlyOwn);\r\n\t\r\n\tif(tableWrapper.dataset.sortcol){\r\n\t\tformData.append('sortcol', tableWrapper.dataset.sortcol);\r\n\t}\r\n\r\n\tif(tableWrapper.dataset.sortdir){\r\n\t\tformData.append('sortdir', tableWrapper.dataset.sortdir);\r\n\t}\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('forms/get_page', formData);\r\n\r\n\tif(response){\r\n\t\tloader.outerHTML\t= response;\r\n\t}else{\r\n\t\t// restore prev data\r\n\t\ttable.classList.remove('hidden');\r\n\r\n\t\tloader.remove();\r\n\r\n\t\tupdatePageNav(navWrapper, curPage);\r\n\t}\r\n}\r\n\r\nasync function getSortedPage(target){\r\n\t\r\n\tlet wrapper\t\t\t= target.closest('.form.table-wrapper');\r\n\tlet tableWrapper\t= target.closest('.form-results-wrapper');\r\n\r\n\t// always start at page 1 again after sorting\r\n\tlet navWrapper\t\t= tableWrapper.querySelector('.form-result-navigation');\r\n\tupdatePageNav(navWrapper, 0);\r\n\r\n\tlet table\t\t\t= tableWrapper.querySelector('.form-data-table:not(.hidden)');\r\n\tlet formId\t\t\t= table.dataset.formId;\r\n\tlet sortCol\t\t\t= target.id;\r\n\tlet sortDir\t\t\t= target.classList.contains('desc') ? 'DESC' : 'ASC';\r\n\r\n\ttableWrapper.dataset.sortcol\t= sortCol;\r\n\ttableWrapper.dataset.sortdir\t= sortDir;\r\n\r\n\tlet loader\t\t\t= Main.showLoader(table, true, 50, 'Loading sorted data');\r\n\tlet formData;\r\n\tif(wrapper.querySelector(\".filter-options\") == null){\r\n\t\tformData\t\t= new FormData();\r\n\t}else{\r\n\t\tformData\t\t= new FormData(wrapper.querySelector(\".filter-options\"));\r\n\t}\r\n\r\n    formData.append('form-id', formId);\r\n    formData.append('page-number', 0);\r\n\tformData.append('shortcode-id', table.dataset.shortcodeId);\r\n    formData.append('type', table.dataset.type);\r\n\r\n\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t});\r\n\r\n\tlet archived;\r\n\tif(params['archived'] == null){\r\n\t\tarchived\t= false;\r\n\t}else{\r\n\t\tarchived\t= true;\r\n\t}\r\n\r\n\tlet onlyOwn;\r\n\tif(params['onlyOwn'] == null){\r\n\t\tonlyOwn\t= false;\r\n\t}else{\r\n\t\tonlyOwn\t= true;\r\n\t}\r\n\tformData.append('archived', archived);\r\n\tformData.append('only-own', onlyOwn);\r\n\tformData.append('sortcol', sortCol);\r\n\tformData.append('sortdir', sortDir);\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('forms/get_page', formData);\r\n\r\n\tif(response){\r\n\t\tloader.outerHTML\t= response;\r\n\t}else{\r\n\t\t// restore prev data\r\n\t\ttable.classList.remove('hidden');\r\n\r\n\t\tloader.remove();\r\n\t}\r\n}\r\n\r\nfunction addFormsTableInputEventListeners(cell){\r\n\tlet inputs\t\t= cell.querySelectorAll('input,select,textarea');\r\n\t\t\r\n\tinputs.forEach((inputNode)=>{\r\n\t\tif(inputNode.type == 'select-one'){\r\n\t\t\tMain.attachNiceSelect(select);\r\n\t\t}\r\n\t\t\r\n\t\tif((inputNode.type != 'radio' && inputNode.type != 'checkbox') || inputs.length == 1){\r\n\r\n\t\t\tif(inputNode.type == 'date'){\r\n\t\t\t\tinputNode.addEventListener(\"blur\", processFormsTableInput);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tinputNode.focus();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction uploadFinished(event){\r\n\tif(event.target.closest('td') != null){\r\n\t\t//remove as soon as we come here\r\n\t\tdocument.removeEventListener('uploadfinished', uploadFinished);\r\n\t\tprocessFormsTableInput(document.querySelector('[data-oldtext]'));\r\n\t}\r\n}\r\n\r\n//function to get the temp input value and save it over AJAX\r\nvar running = false;\r\nasync function processFormsTableInput(target){\r\n\t// target is an event\r\n\tif(target.target != undefined){\r\n\t\ttarget = target.target;\r\n\t}\r\n\t\r\n\tif(running == target || target.value == '' || target.matches('.nice-select-search')){\r\n\t\treturn;\r\n\t}\r\n\trunning = target;\r\n\t\r\n\tsetTimeout(function(){ running = false;}, 500);\t\r\n\r\n\tlet table\t\t\t= target.closest('table');\r\n\tlet formId\t\t\t= table.dataset.formId;\r\n\tlet submissionId\t= target.closest('tr').dataset.id;\r\n\tlet cell\t\t\t= target.closest('td');\r\n\tcell.classList.remove('active');\r\n    let data\t\t\t= cell.dataset;\r\n\tlet value\t\t\t= FormFunctions.getFieldValue(target, cell, false);\r\n\tlet shortcodeId\t\t= '';\r\n\r\n\tif(target.closest('[data-shortcode_id]') != null){\r\n\t\tshortcodeId\t= target.closest('[data-shortcode_id]').dataset.shortcodeId;\r\n\t}\r\n\r\n\t//Only update when needed\r\n\tif (value != JSON.parse(cell.dataset.oldvalue)){\r\n\t\tMain.showLoader(cell.querySelector('.input-wrapper'));\r\n\t\t\r\n\t\t// Submit new value and receive the filtered value back\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append('form-id', formId);\r\n\t\tformData.append('submission-id', submissionId);\r\n\r\n\t\tfor(d in data){\r\n\t\t\tformData.append(d, data[d]);\r\n\t\t}\r\n\t\tformData.append('new-value', JSON.stringify(value));\r\n\r\n\t\tif(shortcodeId != ''){\r\n\t\t\tformData.append('shortcode-id', shortcodeId);\r\n\t\t}\r\n\t\t\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('forms/edit_value', formData);\r\n\t\r\n\t\tif(response){\r\n\t\t\tconsole.log(response)\r\n\t\t\tlet newValue = response.new-value;\r\n\t\t\t\r\n\t\t\tif(typeof(newValue) == 'string'){\r\n\t\t\t\tnewValue.replace('_', ' ');\r\n\t\t\t}\r\n\r\n\t\t\t//Replace the input element with its value\r\n\t\t\tif(newValue == \"\"){\r\n\t\t\t\tnewValue = \"X\";\r\n\t\t\t}\r\n\t\r\n\t\t\t//Update all occurences of this field\r\n\t\t\tif(data['subid'] == undefined){\r\n\t\t\t\tlet targets\t= table.querySelectorAll(`tr[data-id=\"${submissionId}\"] td[data-id=\"${data['id']}\"]`);\r\n\t\t\t\ttargets.forEach(td=>{td.innerHTML = newValue;});\r\n\t\t\t}else{\r\n\t\t\t\tcell.innerHTML = newValue;\r\n\t\t\t}\r\n\r\n\t\t\tcell.dataset.oldvalue\t \t= JSON.stringify(newValue);\r\n\t\r\n\t\t\tMain.displayMessage(response.message.replace('_', ' '));\r\n\t\t}\r\n\t\t\r\n\t\t// Something went wrong restore the old text\r\n\t\telse{\r\n\t\t\tcell.innerHTML = cell.dataset.oldtext;\r\n\t\t}\r\n\t}else{\r\n\t\tcell.innerHTML = cell.dataset.oldtext;\r\n\t}\r\n\r\n\taddFormsTableInputEventListeners(target);\r\n\r\n\tif(target.dataset.oldtext != undefined){\r\n\t\tdelete target.dataset.oldtext;\r\n\t}\r\n}\r\n\r\n// Add a change button when changing form values\r\nfunction addChangeButton(target){\r\n\tlet activeCell\t= target.closest('td.active');\r\n\t\r\n\tif(activeCell == null){\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet button = document.createElement('button');\r\n    button.innerHTML = 'Save changes';\r\n    button.classList.add('button');\r\n    button.classList.add('small');\r\n    button.classList.add('save');\r\n\r\n\tbutton.addEventListener('click', ev=>processFormsTableInput(ev.target.closest('td').querySelector('input')));\r\n\r\n\t// only add the button once\r\n\tif(activeCell.querySelector('.save') == null){\r\n\t\tactiveCell.querySelector('.input-wrapper').appendChild(button)\r\n\t}\r\n}\r\n\r\nconst copyContent = async (target) => {\r\n\tlet text\t= target.closest('td').innerText;\r\n    try {\r\n\t\tlet options = {\r\n\t\t\ticon: 'success',\r\n\t\t\ttitle: `Copied '${text}'`,\r\n\t\t\tshowConfirmButton: false,\r\n\t\t\ttimer: 3000\r\n\t\t};\r\n\r\n\t\tSwal.fire(options);\r\n\r\n\t\tnavigator.clipboard.writeText(text);\r\n    } catch (err) {\r\n\t\tMain.displayMessage('Failed to copy: '+err, 'error');\r\n    }\r\n}\r\n\r\nconst editCellValue\t= async(event, td) => {\r\n\tlet target\t= event.target;\r\n\tif( target.matches('td.edit-forms-table')){\r\n\t\tevent.stopPropagation();\r\n\t\tgetInputHtml(target);\r\n\t}else if(td.matches('td.edit-forms-table') && target.tagName != 'INPUT' && target.tagName != 'A' && target.tagName != 'TEXTAREA' && !target.closest('.nice-select') && !target.matches('.button.save')){\r\n\t\tconsole.log(target)\r\n\t\tevent.stopPropagation();\r\n\t\tgetInputHtml(target.closest('td'));\r\n\t}\r\n}\r\n\r\nconst hideColumn\t= async (target) => {\r\n\tif(target.tagName == 'SPAN'){\r\n\t\ttarget = target.querySelector('img');\r\n\t}\r\n\r\n\t// Table itself\r\n\tif(target.parentNode.matches('th')){\r\n\t\tlet cell \t= target.parentNode;\r\n\r\n\t\t// Hide the column\r\n\t\tvar table\t\t= cell.closest('table');\r\n\r\n\t\t// store as preference\r\n\t\tvar formData\t= new FormData();\r\n\t\tformData.append('form-id', table.dataset.formId);\r\n\t\tformData.append('column-name', cell.id);\r\n\t\t\r\n\t\tawait FormSubmit.fetchRestApi('forms/save_table_prefs', formData);\r\n\t// Table settings\r\n\t}else{\r\n\t\tif(target.classList.contains('visible')){\r\n\t\t\ttarget.classList.replace('visible', 'invisible');\r\n\t\t\ttarget.src\t= target.src.replace('visible.png', 'invisible.png');\r\n\t\t\ttarget.closest('.column-setting-wrapper').querySelector('.visibility-type').value = 0;\r\n\t\t}else{\r\n\t\t\ttarget.classList.replace('invisible','visible');\r\n\t\t\ttarget.src\t= target.src.replace('invisible.png','visible.png');\r\n\t\t\ttarget.closest('.column-setting-wrapper').querySelector('.visibility-type').value = 1;\r\n\t\t}\r\n\t}\r\n}\r\n\r\ndocument.addEventListener(\"click\", event=>{\r\n\tlet target = event.target;\r\n\r\n\tif(target.name == 'submit_column_setting'){\r\n\t\tsaveColumnSettings(target);\r\n\t\tevent.stopPropagation();\r\n\t}else if(target.name == 'submit_table_setting'){\r\n\t\tsaveTableSettings(target);\r\n\t}else if(target.name == 'form-settings[autoarchive]'){\r\n\t\t//show auto archive fields\r\n\t\tlet el = target.closest('.table-rights-wrapper').querySelector('.auto-archive-logic');\r\n\t\tif(target.value == '1'){\r\n\t\t\tel.classList.remove('hidden');\r\n\t\t}else{\r\n\t\t\tel.classList.add('hidden');\r\n\t\t}\r\n\t}else if(target.closest('.form-result-navigation') != null && (target.matches('.next') || target.matches('.prev') || target.matches('.page-number'))){\r\n\t\tgetNextPage(target);\r\n\t\tevent.stopPropagation();\r\n\t}\r\n\r\n\tif(target.tagName == 'TH' && target.closest(\".form-results-wrapper\").querySelector('.form-result-navigation') != null){\r\n\t\t// get a sorted table over AJAX\r\n\t\tgetSortedPage(target);\r\n\t}\r\n\r\n\t// copy cell contents\r\n\tif(target.matches('.copy')){\r\n\t\tcopyContent(target);\r\n\t}\r\n\r\n\t//Actions\r\n\tif(target.matches('.delete.forms-table-action')){\r\n\t\tremoveSubmission(target);\r\n\t}\r\n\r\n\tif(target.matches('.archive.forms-table-action, .unarchive.forms-table-action')){\r\n\t\tarchiveSubmission(target);\r\n\t}\r\n\r\n\tif(target.matches('.print.forms-table-action')){\r\n\t\twindow.location.href = window.location.href.split('?')[0]+\"?print=true&table_id=\"+table.dataset.id+\"&submission_id=\"+table_row.querySelector(\"[id='id' i]\").textContent;\r\n\t}\r\n\t\r\n\t//Open settings modal\r\n\tif(target.classList.contains('edit-formshortcode-settings')){\r\n\t\tMain.showModal(document.querySelector('.modal.form-shortcode-settings'));\r\n\t}\r\n\t\r\n\t//Edit data\r\n\tlet td = target.closest('td');\r\n\tif(!target.matches('.copy') && td && !td.matches('.active')){\r\n\t\teditCellValue(event, td);\r\n\t}\r\n\r\n\t// If we clicked somewhere and there is an active cell\r\n\tlet activeCell\t= document.querySelector('td.active');\r\n\tif(activeCell != null && td == null && activeCell.closest('.schedule') == null){\r\n\t\tif((target.type != 'checkbox') || target.length == 1){\r\n\t\t\tconsole.log(target);\r\n\t\t\tprocessFormsTableInput(activeCell);\r\n\t\t}\r\n\t}\r\n\r\n\tif(target.matches('form .table-permissions-rights-form')){\r\n\t\ttarget.closest('div').querySelector('.permission-wrapper').classList.toggle('hidden');\r\n\t}\r\n\r\n\t//Hide column\r\n\tif(target.classList.contains('visibility-icon')){\r\n\t\thideColumn(target);\r\n\t}\r\n\r\n\tif(target.matches('.reset-col-vis')){\r\n\t\tshowHiddenColumns(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\t\r\n\tif(typeof(Sortable) != 'undefined'){\r\n\t\t//Make the sortable-column-settings-rows div sortable\r\n\t\tlet options = {\r\n\t\t\thandle: '.movecontrol',\r\n\t\t\tanimation: 150,\r\n\t\t};\r\n\r\n\t\tdocument.querySelectorAll('.sortable-column-settings-rows tbody').forEach(el=>{\r\n\t\t\tSortable.create(el, options);\r\n\t\t});\r\n\t}\r\n\r\n\tdocument.querySelectorAll('.form-data-table th').forEach(cell=>{\r\n\t\tcell.style.minWidth\t\t= parseFloat(window.getComputedStyle(cell).width) + 20 + 'px';\r\n\t});\r\n});\r\n\r\ndocument.addEventListener('change', event=>{\r\n\tlet target = event.target;\r\n\r\n\tif(target.id == 'sim-forms-selector'){\r\n\t\tdocument.querySelectorAll('.main-form-wrapper').forEach(el=>{\r\n\t\t\tel.classList.add('hidden');\r\n\t\t});\r\n\r\n\t\tdocument.getElementById(target.value).classList.remove('hidden');\r\n\r\n\t\t// position table\r\n\t\tSimTableFunctions.positionTable();\r\n\t}\r\n\r\n\tif(target.closest('td.active') != null){\r\n\t\tif(target.type != 'file' && target.type != 'date' && target.type != 'checkbox'){\r\n\t\t\t// Check if there are multiple inputs\r\n\t\t\tnames=[];\r\n\t\t\ttarget.closest('td.active').querySelectorAll('input').forEach(el=>{\r\n\t\t\t\tif(!names.includes(el.type)){\r\n\t\t\t\t\tnames.push(el.type);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(names.length == 1){\r\n\t\t\t\tprocessFormsTableInput(target);\r\n\t\t\t}else{\r\n\t\t\t\taddChangeButton(target);\r\n\t\t\t}\r\n\t\t}else if(target.type != 'file'){\r\n\t\t\taddChangeButton(target);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n//Add a keyboard listener\r\ndocument.addEventListener(\"keyup\", function(event){\r\n\tif (['Enter', 'NumpadEnter'].includes(event.key) && keysPressed.Shift == undefined) {\r\n\r\n\t\tlet activeCell\t= document.querySelector('td.active');\r\n\t\tif(activeCell != null){\r\n\t\t\tprocessFormsTableInput(activeCell);\r\n\t\t}\r\n\t}\r\n\r\n\tdelete keysPressed[event.key];\r\n});\r\n\r\n\r\n// Keep track of which keys are pressed\r\nlet keysPressed = {};\r\ndocument.addEventListener('keydown', (event) => {\r\n   keysPressed[event.key] = true;\r\n});"],"names":["async","askConfirmation","text","options","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","document","fullscreenElement","result","Swal","fire","isConfirmed","changeArchiveButton","element","action","outerHTML","getInputHtml","target","table","closest","querySelectorAll","forEach","td","processFormsTableInput","classList","add","formId","dataset","submissionId","id","data","oldText","textContent","Main","showLoader","firstChild","oldtext","formData","FormData","d","append","response","FormSubmit","fetchRestApi","innerHTML","addFormsTableInputEventListeners","el","addEventListener","uploadFinished","showPicker","remove","updatePageNav","navWrapper","pageNr","querySelector","length","cell","inputs","inputNode","type","attachNiceSelect","select","focus","event","removeEventListener","console","log","running","undefined","value","matches","setTimeout","FormFunctions","getFieldValue","shortcodeId","JSON","parse","oldvalue","stringify","newValue","new","replace","displayMessage","message","addChangeButton","activeCell","button","createElement","ev","appendChild","name","submitForm","location","reload","saveColumnSettings","stopPropagation","saveTableSettings","wrapper","tableWrapper","page","curPage","parseInt","nr","loadedPage","loader","archived","onlyOwn","params","Proxy","URLSearchParams","window","search","get","searchParams","prop","sortcol","sortdir","getNextPage","tagName","sortCol","sortDir","contains","getSortedPage","innerText","showConfirmButton","timer","navigator","clipboard","writeText","err","copyContent","row","removeSubmission","tableRow","showSwal","subid","showDenyButton","denyButtonText","isDismissed","Event","dispatchEvent","archiveSubmission","href","split","table_row","showModal","editCellValue","toggle","parentNode","src","hideColumn","showHiddenColumns","handle","animation","Sortable","create","style","minWidth","parseFloat","getComputedStyle","width","getElementById","SimTableFunctions","positionTable","names","includes","push","key","keysPressed","Shift"],"sourceRoot":""}