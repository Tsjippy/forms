{"version":3,"file":"forms.min.js","mappings":"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","sources":["webpack://FormFunctions/webpack/universalModuleDefinition","webpack://FormFunctions/webpack/bootstrap","webpack://FormFunctions/webpack/runtime/define property getters","webpack://FormFunctions/webpack/runtime/hasOwnProperty shorthand","webpack://FormFunctions/webpack/runtime/make namespace object","webpack://FormFunctions/../../../plugins/sim-plugin/includes/js/partials/load_assets.js","webpack://FormFunctions/../../../plugins/sim-plugin/includes/js/partials/field_value.js","webpack://FormFunctions/./form_exports.js","webpack://FormFunctions/./forms.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FormFunctions\"] = factory();\n\telse\n\t\troot[\"FormFunctions\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export let scripts;\r\n\r\nexport let afterScriptsLoaded\t= function (attachTo){\r\n    // load \r\n    if(typeof(tinymce) != 'undefined'){\r\n        tinymce.remove();\r\n\r\n        // Activate tinyMce's again\r\n        document.querySelectorAll('.entry-content .wp-editor-area').forEach(el =>{\r\n            window.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n        });\r\n    }    \r\n\r\n    // invoke dom content loaded events\r\n    window.document.dispatchEvent(new Event(\"DOMContentLoaded\", {\r\n        bubbles: true,\r\n        cancelable: true\r\n    }));\r\n\r\n    // Somehow the visual/text switch does not work, manually fix it\r\n    document.querySelectorAll('.wp-switch-editor').forEach(el=>el.addEventListener('click', ev=>{\r\n        let area    = el.closest('.wp-editor-wrap').querySelector('.wp-editor-area');\r\n        let panel   =  el.closest('.wp-editor-wrap').querySelector('.mce-panel');\r\n        area.style.visibility='unset';\r\n        if(ev.target.matches('.switch-tmce')){\r\n           panel.style.display='block';\r\n            area.style.display='none';\r\n        }else{\r\n            panel.style.display='none';\r\n            area.style.display='block';\r\n        }\r\n    }));\r\n\r\n    //add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n        Main.attachNiceSelect(select);\r\n\t});\r\n\r\n    const ev = new Event('scriptsloaded');\r\n\tattachTo.dispatchEvent(ev);\r\n}\r\n\r\nexport let addStyles    = function (response, attachTo){\r\n    scripts     = [];\r\n    let temp    = document.createElement('div');\r\n\r\n    // parse inline scripts\r\n    temp.innerHTML =  response.html;\r\n    scripts = Array.prototype.slice.call(temp.getElementsByTagName('script'));\r\n\r\n    if(response.js){\r\n        temp.innerHTML =  response.js;\r\n        scripts\t= [...temp.children].concat(scripts);\r\n        addScripts(attachTo);\r\n    }\r\n\r\n    if(response.css){\r\n        temp.innerHTML = response.css;\r\n        [...temp.children].forEach(el => {\r\n            document.head.appendChild(el);\r\n        });\r\n    }\r\n}\r\n\r\nexport let addScripts\t= function (attachTo) {\r\n    if(attachTo == undefined){\r\n        return;\r\n    }\r\n\r\n    if(scripts.length == 0){\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n    let el\t= scripts.shift();\r\n\r\n    if(el == undefined){\r\n        afterScriptsLoaded(attachTo);\r\n        return;\r\n    }\r\n\r\n    // only add if needed\r\n    if(el.tagName == 'SCRIPT' && document.getElementById(el.id) == null){\r\n        var s = document.createElement('script');\r\n\r\n        if(el.type == ''){\r\n            s.type\t= 'text/javascript'; \r\n        }else{\r\n            s.type\t= el.type;\r\n        }\r\n\r\n        if(el.src != ''){\r\n            s.src \t= el.src;\r\n        }else{\r\n            s.innerHTML\t= el.innerHTML;\r\n        }\r\n        \r\n        s.id\t= el.id;\r\n        \r\n        try{\r\n            document.head.appendChild(s);\r\n        }catch (error) {\r\n            console.error(error);\r\n        }\r\n\r\n        if(scripts.length > 0){\r\n            if(el.src != ''){\r\n                s.addEventListener('load', addScripts.bind( null, attachTo ) );\r\n            }else{\r\n                addScripts(attachTo);\r\n            }\r\n        }else{\r\n            if(el.src != ''){\r\n                s.addEventListener('load', afterScriptsLoaded.bind( null, attachTo));\r\n            }else{\r\n                afterScriptsLoaded(attachTo);\r\n            }\t\t\t\r\n        }\r\n    }else if(scripts.length > 0){\r\n        // get next script\r\n        addScripts(attachTo);\r\n    }else{\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n}","function getRadioValue(form, selector){\r\n\tlet el\t= form.querySelector(`${selector}:checked`);\r\n\r\n\t//There is no radio selected currently\r\n\tif(el == null){\r\n\t\t//return an empty value\r\n\t\treturn '';\r\n\t}\r\n\r\n\treturn el.value;\r\n}\r\n\r\nfunction getCheckboxValue(form, selector, compareValue, orgName){\r\n\tlet value\t\t= '';\r\n\tlet elements\t= '';\r\n\r\n\t//we are dealing with a specific checkbox\r\n\tif(orgName.type == 'checkbox' && compareValue != null ){\r\n\t\tif(orgName.checked){\r\n\t\t\treturn orgName.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn '';\r\n\t}\r\n\r\n\t//we should find the checkbox with this value and check if it is checked\r\n\tif(compareValue != null){\r\n\t\telements\t= form.querySelector(`${selector}[value=\"${compareValue}\" i]:checked`);\r\n\t\tif(elements != null){\r\n\t\t\tvalue = compareValue;\r\n\t\t}\r\n\t//no compare value give just return all checked values\r\n\t}else{\r\n\t\telements\t= form.querySelectorAll(`${selector}:checked`);\r\n\t\tvalue\t\t= [];\r\n\t\telements.forEach(el=>{\r\n\t\t\tvalue.push(el.value);\r\n\t\t\t/* if(value != ''){\r\n\t\t\t\tvalue += ', ';\r\n\t\t\t}\r\n\t\t\tvalue += el.value; */\r\n\t\t});\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction getMultiValue(form, el){\r\n\tlet value = [];\r\n\r\n\tform.querySelectorAll(`[name=\"${el.name}\"]`).forEach(elem => value.push(elem.value));\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getDataListValue(el){\r\n\tlet value\t\t= '';\r\n\tlet origInput \t= el.list.querySelector(`[value='${el.value}' i]`);\r\n\t\t\t\r\n\tif(origInput == null){\r\n\t\tvalue =  el.value;\r\n\t}else{\r\n\t\tvalue = origInput.dataset.value;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getFieldValue(orgName, form, checkDatalist=true, compareValue=null, lowercase=false){\r\n\r\n\tlet el\t\t\t= ''; \r\n\tlet name\t\t= '';\r\n\tlet value \t\t= '';\r\n\tlet selector\t= '';\r\n\r\n\t//name is not a name but a node\r\n\tif(orgName instanceof Element){\r\n\t\tel\t\t\t= orgName;\t\t\r\n\t\t//check if valid input type\r\n\t\tif(el.tagName != 'INPUT' && el.tagName != 'TEXTAREA' && el.tagName != 'SELECT' && el.closest('.nice-select-dropdown') == null){\r\n\t\t\tel = el.querySelector('input, select, textarea');\r\n\t\t}\r\n\t\tif(el == null){\r\n\t\t\tel\t\t\t= orgName;\r\n\t\t}\r\n\t\tname\t\t= el.name;\r\n\t// We should look for an id\r\n\t}else if(orgName.match(\"E[0-9]\")){\r\n\t\tselector\t= `[id^=${orgName}]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t\tname\t\t= el.name;\r\n\t}else{\r\n\t\tname\t\t= orgName;\r\n\t\tselector\t= `[name='${name}' i]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t}\r\n\t\r\n\tif(el == null){\r\n\t\tconsole.trace();\r\n\t\tconsole.log(\"cannot find element with name \"+name);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif(el.type == 'radio'){\r\n\t\tvalue\t= getRadioValue(form, selector);\r\n\t}else if(el.type == 'checkbox'){\r\n\t\tvalue\t= getCheckboxValue(form, selector, compareValue, orgName);\t\r\n\t}else if(el.closest('.nice-select-dropdown') != null && el.dataset.value != undefined){\r\n\t\t//nice select\r\n\t\tvalue = el.dataset.value\r\n\t}else if(el.list != null && el.value != '' && checkDatalist){\r\n\t\tvalue =  getDataListValue(el);\r\n\t}else if(el.name != undefined && el.name.endsWith('[]')){\r\n\t\tvalue =  getMultiValue(form, el);\r\n\t}else if(el.value != null && el.value != 'undefined'){\r\n\t\tvalue = el.value;\r\n\t}\r\n\t\r\n\tif(lowercase){\r\n\t\treturn value.toLowerCase();\r\n\t}\r\n\treturn value;\r\n}","import { getFieldValue } from  '../../../plugins/sim-plugin/includes/js/partials/field_value.js';\n\nexport function removeDefaultSelect(el){\n\tArray.from(el.options).forEach(function(option){\n\t\toption.defaultSelected = false;\n\t});\n}\n\nlet tinymceSettings = [];\nfunction prepareForCloning(originalNode){\n\t//also remove any tinymce's\n\tif(typeof(tinymce) != 'undefined'){\n\t\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\tlet tn = tinymce.get(el.id);\n\t\t\tif(tn != null){\n\t\t\t\ttinymceSettings[el.id] = tn.settings\n\t\t\t\ttn.save();\n\t\t\t\ttn.remove();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function cloneNode(originalNode, clear=true){\n\tprepareForCloning(originalNode);\n\t\n\t//make a clone\n\tlet newNode = originalNode.cloneNode(true);\n\n\t// remove niceselect drop down from clone\n\tnewNode.querySelectorAll('.nice-select').forEach(dropdown => dropdown.remove());\n\t\n\t//add tinymce's again\n\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\tif(tinymceSettings[el.id] != undefined){\n\t\t\ttinymce.init(tinymceSettings[el.id]);\n\t\t}\n\t});\n\t\n\t//clear values in the clone\n\tif(clear){\n\t\tnewNode.querySelectorAll('input,select,textarea').forEach(input => {\n\t\t\tif(input.type == 'checkbox' || input.type == 'radio'){\n\t\t\t\tinput.checked = false;\n\t\t\t}else if(!input.matches('.no-reset') ){\n\t\t\t\tinput.value = \"\";\n\t\t\t}\n\t\t\t\n\t\t\t//if this is a select\n\t\t\tif(input.type == \"select-one\"){\n\t\t\t\t//remove any defaults\n\t\t\t\tremoveDefaultSelect(input);\n\t\t\t}\n\t\t});\n\t}\n\n\tnewNode.querySelectorAll('select').forEach(select => {\n\t\t//remove any defaults\n\t\tremoveDefaultSelect(select);\n\n\t\tMain.attachNiceSelect(select);\n\t});\n\t\n\treturn newNode;\n}\n\nexport function copyFormInput(originalNode){\n\toriginalNode.querySelectorAll('.remove.hidden').forEach( el => el.classList.remove('hidden'));\n\n\tlet newNode = cloneNode(originalNode);\n\t\n\t//update the data index\n\tnewNode.querySelectorAll('.upload-files').forEach(function(uploadButton){\n\t\tuploadButton.dataset.index = nodeNr;\n\t})\n\t\n\t//Clear contents of any document preview divs.\n\tnewNode.querySelectorAll('.document-preview').forEach(function(previewDiv){\n\t\tpreviewDiv.innerHTML = '';\n\t});\n\n\t//Select\n\tlet i = 0;\n\tnewNode.querySelectorAll('select').forEach(select => {\n\t\t//Find the value of the select we have cloned\n\t\tlet previousVal = originalNode.getElementsByTagName('select')[i].selectedIndex;\n\t\t\n\t\t//Hide the value in the clone\n\t\tif(select.options[previousVal] != undefined){\n\t\t\tselect.options[previousVal].style.display = 'none';\n\t\t}\n\t\t\n\t\t//Add nice select\n\t\tMain.attachNiceSelect(select);\n\t\t\n\t\ti++;\n\t});\n\n\t// process tab buttons\n\tif(originalNode.matches('.tabcontent')){\n\t\t// Hide original\n\t\toriginalNode.classList.add('hidden');\n\n\t\t// Add button for the new one\n\t\tlet orgButton\t= originalNode.closest('.clone-divs-wrapper').querySelector(`.tablink.active`);\n\t\tlet newButton\t= cloneNode(orgButton);\n\n\t\t// make the org butto inactive\n\t\torgButton.classList.remove('active');\n\n\t\t//Insert the clone\n\t\torgButton.parentNode.insertBefore(newButton, orgButton.nextSibling);\n\t}\n\t\n\t//Insert the clone\n\toriginalNode.parentNode.insertBefore(newNode, originalNode.nextSibling);\n\n\t// Process formsteps\n\tif(originalNode.matches('.formstep')){\n\t\t// hide the new clone\n\t\tnewNode.classList.add('step-hidden');\n\n\t\t// Update the formstep controls\n\t\tlet form\t\t= originalNode.closest('form');\n\t\tif(form != null && form.querySelector('.multi-step-controls-wrapper') != null){\n\t\t\tupdateMultiStepControls(form);\n\t\t}\n\n\t\tlet text\t= originalNode.querySelector('.add.button').textContent.replace('Add ', '');\n\n\t\tMain.displayMessage(`Succesfully added an extra ${text}<br>Its added as the next page.`);\n\t}\n\t\n\treturn newNode;\n}\n\nexport function fixNumbering(wrapper){\n\twrapper.querySelectorAll(':scope > .clone-div, :scope > .tablink').forEach(updateNumbers);\n\n\tfunction updateNumbers(clone, index){\n\t\t//Update the new number\t\n\n\t\t// Update the ID\n\t\tif(clone.id != ''){\n\t\t\tclone.id = clone.id.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t}\n\t\t\n\t\t// Update the content\n\t\tif(clone.type == 'button' && clone.textContent != ''){\n\t\t\tclone.textContent \t\t= clone.textContent.replace(/[0-9]+(?!.*[0-9])/, index + 1);\n\n\t\t\tclone.dataset.target\t= clone.dataset.target.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t}\n\n\t\t// Update the divid attribute\n\t\tif(clone.dataset.divId  != null){\n\t\t\tclone.dataset.divId = index;\n\t\t}\n\t\t\n\t\t//Update the title\n\t\tclone.querySelectorAll('h3, h4, legend :first-child').forEach(el => {\n\t\t\tel.textContent = el.textContent.replace(/[0-9]+(?!.*[0-9])/, index + 1);\n\t\t});\n\t\t\n\t\t//Update the legend\n\t\t/* clone.querySelectorAll('legend').forEach(legend => {\n\t\t\tlegend.textContent = legend.textContent.replace(/[0-9]+(?!.*[0-9])/, ' '+(index+1));\n\t\t}); */\n\t\t\n\t\t//Update the elements\n\t\tclone.querySelectorAll('input,select,textarea').forEach(input => {\n\t\t\t//Do not copy nice selects\n\t\t\tif(!input.classList.contains('nice-select-search')){\n\t\t\t\t//Update the id\n\t\t\t\tif(input.id != '' && input.id != undefined){\n\t\t\t\t\tinput.id = input.id.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\n\t\t\t\t//Update the name\n\t\t\t\tif(input.name != '' && input.name != undefined){\n\t\t\t\t\tinput.name = input.name.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//Reset the select to the default\n\t\t\t\tif(input.type == 'button'){\n\t\t\t\t\tinput.value = input.value.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function removeNode(target){\n\tlet node\t\t\t= target.closest(\".clone-div\");\n\tlet parentNode\t\t= node.closest('.clone-divs-wrapper');\n\tlet allCloneDivs\t= parentNode.querySelectorAll('.clone-div');\n\t\n\t//Check if we are removing the last element\n\tif(allCloneDivs[allCloneDivs.length-1] == node){\n\t\tlet addElement = node.querySelector(\".add\");\n\t\t\n\t\t//Move the add button one up\n\t\tlet prev = node.previousElementSibling;\n\t\tif(prev.querySelector('.button-wrapper .add') == null){\n\t\t\tprev.querySelector('.button-wrapper').appendChild(addElement);\n\t\t}\n\t}\n\n\t// check if we need to remove a corresponding tab button\n\tif(node.matches('.tabcontent')){\n\t\tlet buttonToRemove\t= parentNode.querySelector(`.tablink[data-target=\"${node.id}\"]`);\n\t\tif(buttonToRemove != null){\n\n\t\t\t//if the button is active, make the previous one active\n\t\t\tif(buttonToRemove.classList.contains('active')){\n\t\t\t\tlet prevButton\t= buttonToRemove.previousElementSibling;\n\t\t\t\tif(prevButton != null){\n\t\t\t\t\tprevButton.classList.add('active');\n\t\t\t\t\t\n\t\t\t\t\t//show the corresponding tab\n\t\t\t\t\tMain.displayTab(prevButton);\n\t\t\t\t}else{\n\t\t\t\t\t//try the next one\n\t\t\t\t\tlet nextButton\t= buttonToRemove.nextElementSibling;\n\t\t\t\t\tif(nextButton != null){\n\t\t\t\t\t\tnextButton.classList.add('active');\n\t\t\t\t\t\t\n\t\t\t\t\t\t//show the corresponding tab\n\t\t\t\t\t\tMain.displayTab(nextButton);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//remove the button\n\t\t\tbuttonToRemove.remove();\n\t\t}\n\t}\n\n\t// Check if this is a formstep\n\tif(node.matches('.formstep')){\n\t\tlet newFormstep\t= null;\n\n\t\t// if there is a next clonable formstep, show that one\n\t\tlet nextFormstep\t= parentNode.querySelector(`.formstep[data-div-id='${parseInt(node.dataset.divId) + 1}']`);\n\t\tif(nextFormstep != null){\t\t\t\n\t\t\tnewFormstep\t= nextFormstep;\n\t\t}else{\n\t\t\t//try the previous one\n\t\t\tlet prevFormstep\t= parentNode.querySelector(`.formstep[data-div-id='${parseInt(node.dataset.divId) - 1}']`);\n\t\t\tif(prevFormstep != null){\n\t\t\t\tnewFormstep\t= prevFormstep;\n\t\t\t}\n\t\t}\n\n\t\tif(newFormstep != null){\n\t\t\t//check if we need to update the multi step controls\n\t\t\tlet form\t\t= node.closest('form');\n\t\t\tif(form != null && form.querySelector('.multi-step-controls-wrapper') != null){\n\t\t\t\tupdateMultiStepControls(form);\n\n\t\t\t\t// find the next visible formstep index\n\t\t\t\tform.querySelectorAll('.formstep').forEach((formstep, index) =>{\n\t\t\t\t\tif(formstep == newFormstep){\n\t\t\t\t\t\t//show the next visible formstep\n\t\t\t\t\t\tshowFormStep(index, form);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t//Remove the node\n\tnode.remove();\n\n\t//If there is only one div remaining, hide the remove button\n\tif(parentNode.querySelectorAll('.clone-div').length == 1){\n\t\tlet removeElement = parentNode.querySelector('.remove');\n\t\tremoveElement.classList.add('hidden');\n\t}\n\n\tfixNumbering(parentNode)\n}\n\n/* \n\tFUNCTIONS USED BY DYNAMIC FORMS JS\n */\nexport function tidyMultiInputs(){\n\t//remove unnecessary buttons on inputs with multiple values\n\tdocument.querySelectorAll('.clone-divs-wrapper').forEach( function(div){\n\t\tlet cloneDivArr\t= div.querySelectorAll(':scope > .clone-div');\n\t\t\n\t\tif(cloneDivArr.length == 1){\n\t\t\tcloneDivArr[0].querySelectorAll('.remove').forEach(el=>el.remove());\n\t\t}\n\t\t\n\t\tcloneDivArr.forEach(function(cloneDiv, index, array){\n\t\t\t//update dataset\n\t\t\tcloneDiv.dataset.divId = index;\n\t\t\t\n\t\t\t//remove add button for all but the last\n\t\t\tif(index != array.length - 1){\n\t\t\t\t// Select all add buttons but not the any nested buttons\n\t\t\t\tcloneDiv.querySelectorAll('.add:not(:scope .clone-divs-wrapper .add)').forEach(el=>el.remove());\n\t\t\t}\n\t\t})\n\t});\n}\n\nexport function updateMultiStepControls(form){\n\t// get active formsteps amount\n\tlet formsteps\t\t\t= form.querySelectorAll('.formstep');\n\tlet visibleFormsteps\t= form.querySelectorAll('.formstep:not(.hidden)');\n\tlet stepIndicators\t\t= form.querySelectorAll('.multi-step-controls-wrapper .step');\n\n\t// show all step circles\n\tstepIndicators.forEach(el => el.classList.remove('hidden'));\n\n\t// hide some step circles if needed\n\tfor(let x = visibleFormsteps.length; x < formsteps.length; x++){\n\t\tstepIndicators[x].classList.add('hidden');\n\t}\n\n\t// Add some step circles if needed\n\tfor(let x = stepIndicators.length; x < formsteps.length; x++){\n\t\tlet step\t= document.createElement('span');\n\t\tstep.classList.add('step');\n\n\t\tform.querySelectorAll(`.step-wrapper`).forEach(el => el.appendChild(step));\n\t}\n\n\t// check if this is the last visible\n\tlet currentFormstep\t\t= form.querySelector('.formstep:not(.step-hidden)');\n\tif(visibleFormsteps[visibleFormsteps.length-1] == currentFormstep){\n\t\t// make the submit button visible\n\t\tform.querySelector('.next-button').classList.add('hidden');\n\t\tform.querySelector('.form-submit ').classList.remove('hidden');\n\t}else{\n\t\tform.querySelector('.next-button').classList.remove('hidden');\n\t\tform.querySelector('.form-submit ').classList.add('hidden');\n\t}\n}\n\t\n/** \n * show a next form step\n * @param {number} n - the form step index to show\n * @param {Element} form - the form contaning the form steps\n */\nexport function showFormStep(n, form) {\n\tif(typeof(form) != 'undefined'){\n\t\tif(n == 0){\n\t\t\tlet loader = form.querySelector('.loader-wrapper:not(.hidden)' );\n\t\t\t//hide loader\n\t\t\tif(loader != null){\n\t\t\t\tloader.classList.add('hidden');\n\t\t\t}\n\n\t\t\t//show form controls\n\t\t\tform.querySelector('.multi-step-controls.hidden').classList.remove('hidden');\n\t\t}\n\t\t\n\t\t//hide all formsteps\n\t\tform.querySelectorAll('.formstep:not(.step-hidden)').forEach(step=>step.classList.add('step-hidden'));\n\t\t\n\t\t// Show the specified formstep of the form ...\n\t\tlet x = form.getElementsByClassName(\"formstep\");\n\t\t\n\t\tif(x.length == 0){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//scroll back to top\n\t\tlet y = x[n].offsetTop - document.querySelector(\"#masthead\").offsetHeight\n\t\twindow.scrollTo({ top: y, behavior: 'auto'});\n\t\t\n\t\t//show\n\t\tx[n].classList.remove('step-hidden');\n\n\t\t// This function removes the \"active\" class of all steps...\n\t\tform.querySelectorAll(\".step.active\").forEach(el=>{el.classList.remove('active');});\n\n\t\t//... and adds the \"active\" class to the current step:\n\t\tx = form.getElementsByClassName(\"step\");\n\t\ttry{\n\t\t\tx[n].classList.add(\"active\");\n\t\t}catch(err) {\n\t\t\tconsole.log(x);\n\t\t\tconsole.log(n);\n\t\t  \tconsole.error(err.message);\n\t\t}\n\t\t\n\n\t\t// ... and fix the Previous/Next buttons:\n\t\tif (n == 0) {\n\t\t\tform.querySelector('[name=\"previous-button\"]').classList.add('hidden');\n\t\t} else {\n\t\t\tform.querySelector('[name=\"previous-button\"]').classList.remove('hidden');\n\t\t}\n\n\t\tif (n == (x.length - 1)) {\n\t\t\tform.querySelector('[name=\"next-button\"]').classList.add('hidden');\n\t\t\tform.querySelector('.form-submit').classList.remove('hidden');\n\t\t} else {\n\t\t\tform.querySelector('[name=\"next-button\"]').classList.remove('hidden');\n\t\t\tform.querySelector('.form-submit').classList.add('hidden');\n\t\t}\n\t}else{\n\t\tconsole.log('no form defined');\n\t}\n\t\t\n}\n\n//next form step clicked\nexport function nextPrev(n, form) {\n\t// This function will figure out which tab to display\n\tlet x \t\t\t\t= form.querySelectorAll(\".formstep\");\n\tlet stepIndicators\t= form.querySelectorAll(\".step\");\n\tlet currentTab\t\t= 0;\n\tlet valid\t\t\t= true;\n\n\t// Find the current active tab\n\tx.forEach((el, index)=>{if(!el.matches('.step-hidden')){currentTab = index}});\n\t\n\t//Check validity of this step if going forward\n\tif( n > 0){\n\t\t// Prepare the elements on this tab\n\t\tFormSubmit.prepareForValidation(x[currentTab]);\n\n\t\t// Report validity of each required field\n\t\tlet elements\t= x[currentTab].querySelectorAll('input[required], textarea[required], select[required]');\n\t\tfor(const element of elements) {\n\t\t\telement.required\t= true;\n\t\t\tvalid\t\t\t\t= element.reportValidity();\n\t\t\tif(!valid){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(!valid) return;\n\t\t\n\t\t//mark the last step as finished\n\t\tstepIndicators[currentTab].classList.add(\"finish\");\n\t}else{\n\t\t//mark the last step as unfinished\n\t\tstepIndicators[currentTab].classList.remove(\"finish\");\n\t}\n\t\n\t//loop over all the formsteps to hide stepindicators of them if needed\n\tArray.from(x).forEach((formstep,index) =>{\n\t\tif(formstep.classList.contains('hidden')){\n\t\t\t//hide the corresponding circle\n\t\t\tstepIndicators[index].classList.add('hidden');\n\t\t}\n\t});\n\n\t// Increase or decrease the current tab by 1:\n\tcurrentTab = currentTab + n;\n\t\n\t//check if the next tab is hidden\n\twhile(x[currentTab].classList.contains('hidden')){\n\t\t//go to the next tab\n\t\tcurrentTab = currentTab + n;\n\n\t\tif (currentTab >= x.length) {\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t// if you have reached the end of the form... :\n\tif (currentTab >= x.length) {\n\t\treturn false;\n\t}\n\t// Otherwise, display the correct tab:\n\tshowFormStep(currentTab, form);\n\n\treturn true;\n}\n\nexport function changeFieldValue(selector, value, functionRef, form, addition='', forceValue=false){\n\tif(value == undefined){\n\t\treturn;\n\t}\n\n\tlet name\t\t= '';\n\tlet target\t\t= '';\n\n\tif(selector instanceof Element){\n\t\ttarget\t\t= selector;\n\t\tname\t\t= target.name;\n\t\tif(target.id == ''){\n\t\t\tselector\t= `[name^=\"${target.name}\" i]`;\n\t\t}else{\n\t\t\tselector\t= `[id^=${target.id}]`;\n\t\t}\n\t\t\n\t}else{\n\t\ttarget \t\t= form.querySelector(selector);\n\n\t\ttry{\n\t\t\tname\t\t= target.name;\n\t\t}catch{\n\t\t\tconsole.log(target);\n\t\t}\n\t}\n\n\tlet oldValue\t= getFieldValue(target, form, false, value);\n\t// nothing to change\n\tif(oldValue == value){\n\t\treturn;\n\t}\n\n\t// Check if we are dealing with a multi input field\n\tif(target == null){\n\t\tlet targets \t= form.querySelectorAll(`.clone-div [name^=\"${name}\" i]`);\n\t\tif(targets.length === 0){\n\t\t\treturn;\n\t\t}else if(targets.length == 1){\n\t\t\ttarget\t= targets[0];\n\t\t\ttargets\t= '';\n\t\t}else{\n\t\t\ttarget\t= targets[0];\n\n\t\t\ttargets.forEach((el, index) =>{\n\t\t\t\tif(index == 0){\n\t\t\t\t\tchangeFieldValue(el, '', '', form);\n\t\t\t\t}else{\n\t\t\t\t\tremoveNode(el);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t// calculate the new value\n\tif(addition != ''){\n\t\t// check if a date\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet date\t= new Date(value);\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\n\t\t\tvalue\t= date.toISOString().split('T')[0];\n\t\t}else{\n\t\t\tvalue\t= value + parseInt(addition);\n\t\t}\n\t}\n\t\n\tif(target.type == 'radio' || target.type == 'checkbox'){\n\t\t// uncheck all\n\t\tif(value == ''){\n\t\t\tif(selector != ''){\n\t\t\t\tform.querySelectorAll(selector).forEach(el=>el.checked=false);\n\t\t\t}\n\t\t}else{\n\t\t\t// Check if the current target is the one we need to check\n\t\t\tif(target.value.toLowerCase() == value.toLowerCase()){\n\t\t\t\ttarget.checked = true;\n\t\t\t}else{\n\t\t\t\t// find the element with the given value and check it\n\t\t\t\tlet targets = form.querySelectorAll(`[name=\"${name}\" i]`);\n\t\t\t\tfor (const element of targets) {\n\t\t\t\t\tif(element.value.toLowerCase() == value.toLowerCase()){\n\t\t\t\t\t\telement.checked = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t//the target has a list attached to it\n\t}else if(target.type == 'date'){\n\t\ttarget.value = value;\n\t\t\n\t\t// convert a date to the right format\n\t\tif (!/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet splitted = '';\n\t\t\tif(value.split('-').length == 3){\n\t\t\t\tsplitted\t= value.split('-');\n\t\t\t}else if(value.split('/').length == 3){\n\t\t\t\tsplitted\t= value.split('/');\n\t\t\t}\n\n\t\t\tif(splitted != ''){\n\t\t\t\tlet year;\n\t\t\t\tlet month;\n\t\t\t\tlet day;\n\t\t\t\tsplitted.forEach(nr=>{\n\t\t\t\t\tif(nr.length == 4){\n\t\t\t\t\t\tyear\t= nr;\n\t\t\t\t\t}else if(nr.length == 2){\n\t\t\t\t\t\tif(nr > 12){\n\t\t\t\t\t\t\tday\t= nr;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t// does not have a value yet\n\t\t\t\t\t\t\tif(month == undefined){\n\t\t\t\t\t\t\t\tmonth\t= nr;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tday\t= nr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(day != undefined && month != undefined && year != undefined){\n\t\t\t\t\ttarget.value = `${year}-${month}-${day}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else if(target.list != null){\n\t\tlet dataListOption = target.list.querySelector(`[data-value=\"${value}\" i]`);\n\n\t\t//we found a match\n\t\tif(dataListOption != null){\n\t\t\t// We found a cloned field, add as many inputs as needed\n\t\t\tif(target.closest('.clone-div') != null){\n\t\t\t\t// mark the existing ones for deletion, we can delete right now as we need to copy the existing ones first\n\t\t\t\ttarget.closest('.clone-divs-wrapper').querySelectorAll('.clone-div').forEach(el=>el.classList.add('shouldremove'));\n\n\t\t\t\tlet clone;\n\t\t\t\tdataListOption.value.split(';').forEach(val=>{\n\t\t\t\t\tclone = copyFormInput(target.closest('.clone-div'));\n\n\t\t\t\t\tclone.classList.remove('shouldremove');\n\n\t\t\t\t\tchangeFieldValue(clone.querySelector(target.tagName), val, '', form, '', true);\n\t\t\t\t});\n\n\t\t\t\tfixNumbering(target.closest('.clone-divs-wrapper'));\n\n\t\t\t\t// delete the old ones\n\t\t\t\ttarget.closest('.clone-divs-wrapper').querySelectorAll('.shouldremove').forEach(el=>el.remove());\n\t\t\t}else{\n\t\t\t\ttarget.value = dataListOption.value;\n\t\t\t}\n\t\t// We did not find a match, we are filling in the given value\n\t\t}else if(forceValue){\n\t\t\ttarget.value = value;\n\t\t// We did not find a match, empty value\n\t\t}else{\n\t\t\ttarget.value = '';\n\t\t}\n\t}else{\n\t\ttarget.value = value;\n\t}\n\t\n\t//create a new event\n\tlet evt = new Event('input');\n\t//attach the target\n\ttarget.dispatchEvent(evt);\n\t\n\t//run the originating function with this event\n\tif(typeof functionRef == 'function'){\n\t\tfunctionRef(target);\n\t}\n}\n\nexport function changeVisibility(action, el, functionRef){\n\tlet wrapper\t= el.closest('.input-wrapper');\n\tif(wrapper == null){\n\t\twrapper\t= el\n\t}\n\t\n\tif(action == 'add'){\n\t\tif(wrapper.matches('.hidden')){\n\t\t\treturn;\n\t\t}\n\t\twrapper.classList.add('hidden');\n\t}else{\n\t\tif(!wrapper.matches('.hidden')){\n\t\t\treturn;\n\t\t}\n\t\twrapper.classList.remove('hidden');\n\t}\n\n\t//create a new event\n\tlet evt = new Event('input');\n\t//attach the target\n\twrapper.dispatchEvent(evt);\n\t\n\t//run the originating function with this event\n\tif(typeof functionRef == 'function'){\n\t\tfunctionRef(el);\n\t}\n}\n\nexport function changeFieldProperty(selector, att, value, functionRef, form, addition=''){\n\t//first change the value\n\tlet target = form.querySelector(selector);\n\n\t// calculate the new value\n\tif(addition != ''){\n\t\t// check if a date\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet date\t= new Date(value);\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\n\t\t\tvalue\t= date.toISOString().split('T')[0];\n\t\t}else{\n\t\t\tvalue\t= value + parseInt(addition);\n\t\t}\n\t}\n\n\ttarget[att] = value;\n\t\n\t//create a new event\n\tlet evt = new Event('input');\n\n\t//attach the target\n\ttarget.dispatchEvent(evt);\n\n\t//run the originating function with this event\n\tfunctionRef(target);\n}","import { addStyles } from '../../../plugins/sim-plugin/includes/js/partials/load_assets.js';\nimport { removeDefaultSelect, cloneNode, copyFormInput, fixNumbering, removeNode, tidyMultiInputs, updateMultiStepControls, showFormStep, nextPrev, changeFieldValue, changeVisibility, changeFieldProperty } from './form_exports.js';\nimport { getFieldValue } from  '../../../plugins/sim-plugin/includes/js/partials/field_value.js';\nexport { getFieldValue, removeDefaultSelect, cloneNode, copyFormInput, fixNumbering, removeNode, tidyMultiInputs, updateMultiStepControls, showFormStep, nextPrev, changeFieldValue, changeVisibility, changeFieldProperty };\n\nconsole.log('Forms.js is loaded');\n\nasync function saveFormInput(target){\n\tlet form\t\t= target.closest('form');\n\n\t// make all inputs required if needed\n\tform.querySelectorAll('.required:not(hidden) input, .required:not(hidden) textarea, .required:not(hidden) select').forEach(el=>{\n\t\t// do not make nice select inputs nor file uploads required\n\t\tif(el.closest('div.nice-select') == null && (el.type != 'file' || el.closest('.file-upload-wrap').querySelector('.document-preview input') == null)){\n\t\t\tel.required\t= true;\n\t\t}\n\t});\n\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_input');\n\n\tif(response){\n\t\tMain.displayMessage(response);\n\n\t\tif(form.dataset.reset){\n\t\t\tFormSubmit.formReset(form);\n\t\t}\n\t}\n}\n\nasync function formbuilderSwitch(target){\n\tlet wrapper\t= target.closest('.sim-form-wrapper');\n\tlet button\t= target.outerHTML;\n\n\tlet formData = new FormData();\n\tlet formId;\n\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.formbuilder-switch')){\n\t\tformData.append('formbuilder', true);\n\t\turl.searchParams.set('formbuilder', true);\n\n\t\tformId\t= wrapper.querySelector('form.sim-form-wrapper').dataset.formId;\n\t}else{\n\t\turl.searchParams.delete('formbuilder');\n\t\tformId\t= wrapper.querySelector('[name=\"form-id\"]').value;\n\t}\n\twindow.history.pushState({}, '', url);\n\n\tformData.append('form-id', formId);\n\n\tlet loader\t= Main.showLoader(target, false, 50, 'Requesting form...');\n\twrapper.innerHTML\t= loader.outerHTML;\n\n\tlet response = await FormSubmit.fetchRestApi('forms/form_builder', formData);\n\n\tif(response){\n\t\twrapper.innerHTML\t= response.html;\n\n\t\taddStyles(response, document);\n\n\t\t// Activate tinyMce's again\n\t/* \twrapper.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor', false, el.id);\n\t\t});\n\n\t\twrapper.querySelectorAll('select').forEach(function(select){\n\t\t\tMain.attachNiceSelect(select);\n\t\t}); */\n\t}else{\n\t\tloader.outerHTML\t= button;\n\t}\n}\n\nasync function requestNewFormResults(target){\n\tlet wrapper\t\t= target.closest('.form.table-wrapper');\n\tlet button\t\t= target.outerHTML;\n\n\tlet formData \t= new FormData();\n\tlet formId\t\t= wrapper.querySelector('.sim-table.form-data-table').dataset.formId;\n\tlet shortcodeId\t= wrapper.querySelector('.sim-table.form-data-table').dataset.shortcodeId;\n\n\tformData.append('form-id', formId);\n\tformData.append('shortcode-id', shortcodeId);\n\n\tconst url \t\t= new URL(window.location);\n\tif(url.searchParams.get('only-own')){\n\t\tformData.append('only-own', true);\n\t}\n\n\tif(url.searchParams.get('all')){\n\t\tformData.append('all', true);\n\t}\n\n\tif(url.searchParams.get('archived')){\n\t\tformData.append('archived', true);\n\t}\n\n\tlet loader\t= Main.showLoader(target, false, 50, 'Requesting form results...');\n\twrapper.innerHTML\t= loader.outerHTML;\n\n\tlet response = await FormSubmit.fetchRestApi('forms/show_form_results', formData);\n\n\tif(response){\n\t\twrapper.innerHTML\t= response;\n\t}else{\n\t\tloader.outerHTML\t= button;\n\t}\n}\n\nasync function archivedEntriesSwitch(target){\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.archive-switch-show')){\n\t\turl.searchParams.set('archived', true);\n\t}else{\n\t\turl.searchParams.delete('archived');\n\t}\n\twindow.history.pushState({}, '', url);\n\n\trequestNewFormResults(target);\n}\n\nasync function onlyOwnSwitch(target){\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.only-own-switch-on')){\n\t\turl.searchParams.set('only-own', true);\n\t\turl.searchParams.delete('all', true);\n\t}else{\n\t\turl.searchParams.set('all', true);\n\t\turl.searchParams.delete('only-own');\n\t}\n\twindow.history.pushState({}, '', url);\n\n\trequestNewFormResults(target);\n}\n\n//we are online again\nwindow.addEventListener('online', function(){\n\tdocument.querySelectorAll('.form-submit').forEach(btn=>{\n\t\tbtn.disabled = false\n\t\tbtn.querySelectorAll('.offline').forEach(el=>el.remove());\n\t});\n});\n\n//prevent form submit when offline\nwindow.addEventListener('offline', function(){\n\tdocument.querySelectorAll('.form-submit').forEach(btn=>{\n\t\tbtn.disabled = true;\n\t\tif(btn.querySelector('.online') == null){\n\t\t\tbtn.innerHTML = '<div class=\"online\">'+btn.innerHTML+'</div>';\n\t\t}\n\t\tbtn.innerHTML += '<div class=\"offline\">You are offline</div>'\n\t});\n});\n\ndocument.addEventListener('click', function(event) {\n\tlet target = event.target;\n\t\n\t//add element\n\tif(target.matches('.add')){\n\t\tlet orgNode\t= target.closest(\".clone-div\");\n\n\t\tlet newNode = copyFormInput(orgNode);\n\n\t\t// Fix in nodes\n\t\tfixNumbering(target.closest('.clone-divs-wrapper'));\n\n\t\t//add tinymce's can only be done when node is inserted and id is unique\n\t\tnewNode.querySelectorAll('.wp-editor-area').forEach((el, index) =>{\n\t\t\t// find org node settings\n\t\t\tlet tn = tinymce.get(orgNode.querySelectorAll('.wp-editor-area')[index].id);\n\t\t\tif(tn != null){\n\t\t\t\tlet settings\t= tn.settings;\n\n\t\t\t\t// update the settings for the clone\n\t\t\t\tfor (const key in settings) {\n\t\t\t\t\tconsole.log(`${key}: ${settings[key]}`);\n\n\t\t\t\t\tif(typeof(settings[key]) == 'string'){\n\t\t\t\t\t\tsettings[key]\t= settings[key].replace(\n\t\t\t\t\t\t\t/(.*)([0-9])/, \n\t\t\t\t\t\t\t(match, prefix, nr) => {\n\t\t\t\t\t\t\t\tconst newNumber = parseInt(nr) + 1;\n\t\t\t\t\t\t\t\treturn prefix + newNumber;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttinymce.init(settings);\n\t\t\t\t//window.tinyMCE.execCommand('mceAddEditor', false, el.id);\n\t\t\t}\n\t\t});\n\n\t\ttarget.remove();\n\t}\n\t\n\t//remove element\n\tif(target.matches('.remove')){\n\t\t//Remove node clicked\n\t\tremoveNode(target);\n\t}\n\n\tif(target.matches('.sim-form-wrapper [name=\"submit-form\"]')){\n\t\tevent.stopPropagation();\n\t\t\n\t\tsaveFormInput(target);\n\t}\n\n\tif(target.matches('.formbuilder-switch') || target.matches('.formbuilder-switch-back')){\n\t\tformbuilderSwitch(target);\n\t}\n\n\tif(target.matches('.archive-switch-hide') || target.matches('.archive-switch-show')){\n\t\tarchivedEntriesSwitch(target);\n\t}\n\n\tif(target.matches('.only-own-switch-all') || target.matches('.only-own-switch-on')){\n\t\tonlyOwnSwitch(target);\n\t}\n});\n\ndocument.addEventListener('change', ev=>{\n\t// select all elements with a datalist attached\n\tif(ev.target.matches('input[list]') && ev.target.name.includes('[')){\n\t\tlet el\t\t= ev.target.list.querySelector(`[value=\"${ev.target.value}\" i]`);\n\n\t\tif(el != null){\n\t\t\t// find the dataset value of the given element value\n\t\t\tlet value\t= el.dataset.value;\n\n\t\t\tif(value != undefined){\n\t\t\t\t// change the value to create extra inputs if necessary\n\t\t\t\tchangeFieldValue(ev.target, value, '', ev.target.closest('form'));\n\t\t\t}\n\t\t}\n\t}\n})"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","scripts","afterScriptsLoaded","attachTo","tinymce","remove","document","querySelectorAll","forEach","el","window","tinyMCE","execCommand","id","dispatchEvent","Event","bubbles","cancelable","addEventListener","ev","area","closest","querySelector","panel","style","visibility","target","matches","display","select","Main","attachNiceSelect","addScripts","undefined","length","shift","tagName","getElementById","s","createElement","type","src","innerHTML","head","appendChild","error","console","bind","getFieldValue","orgName","form","checkDatalist","compareValue","lowercase","name","selector","Element","match","trace","log","getRadioValue","elements","checked","push","getCheckboxValue","dataset","list","origInput","getDataListValue","endsWith","elem","getMultiValue","toLowerCase","removeDefaultSelect","Array","from","options","option","defaultSelected","tinymceSettings","cloneNode","originalNode","clear","tn","settings","save","prepareForCloning","newNode","dropdown","init","input","copyFormInput","classList","uploadButton","index","nodeNr","previewDiv","i","previousVal","getElementsByTagName","selectedIndex","add","orgButton","newButton","parentNode","insertBefore","nextSibling","updateMultiStepControls","text","textContent","replace","displayMessage","fixNumbering","wrapper","clone","divId","contains","removeNode","node","allCloneDivs","addElement","prev","previousElementSibling","buttonToRemove","prevButton","displayTab","nextButton","nextElementSibling","newFormstep","nextFormstep","parseInt","prevFormstep","formstep","showFormStep","tidyMultiInputs","div","cloneDivArr","cloneDiv","array","formsteps","visibleFormsteps","stepIndicators","x","step","currentFormstep","n","loader","getElementsByClassName","y","offsetTop","offsetHeight","scrollTo","top","behavior","err","message","nextPrev","currentTab","valid","FormSubmit","prepareForValidation","element","required","reportValidity","changeFieldValue","functionRef","addition","forceValue","targets","test","date","Date","setDate","getDate","toISOString","split","splitted","year","month","day","nr","dataListOption","val","evt","changeVisibility","action","changeFieldProperty","att","async","requestNewFormResults","button","outerHTML","formData","FormData","formId","shortcodeId","append","url","URL","location","searchParams","showLoader","response","fetchRestApi","btn","disabled","event","orgNode","prefix","stopPropagation","submitForm","reset","formReset","saveFormInput","set","delete","history","pushState","html","temp","slice","js","children","concat","css","addStyles","formbuilderSwitch","archivedEntriesSwitch","onlyOwnSwitch","includes"],"sourceRoot":""}