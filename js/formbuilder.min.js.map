{"version":3,"file":"formbuilder.min.js","mappings":"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","sources":["webpack://forms/./formbuilder.js"],"sourcesContent":["var reorderingBusy, formWrapper, formElementWrapper, modal;\n\nconsole.log(\"Formbuilder.js loaded\");\n\n/* FUNCTIONS */\nfunction clearFormInputs(){\n\ttry {\n\t\t//Loop to clear the modalform\n\t\tmodal.querySelectorAll('input:not([type=hidden]), select, textarea, [name=insertafter], [name=element_id]').forEach(function(el){\n\t\t\tif(el.type == 'checkbox'){\n\t\t\t\tel.checked = false;\n\t\t\t}else{\n\t\t\t\tel.value = '';\n\t\t\t}\n\n\t\t\tif(el.type == 'textarea' && el.id != ''){\n\t\t\t\tlet editor = tinyMCE.get(el.id);\n\t\t\t\tif(editor != null){\n\t\t\t\t\teditor.setContent('');\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(el.type == \"select-one\"){\n\t\t\t\tFormFunctions.removeDefaultSelect(el);\n\t\t\t\t\n\t\t\t\tif(el._niceselect != undefined){\n\t\t\t\t\tel._niceselect.clear();\n\t\t\t\t\tel._niceselect.update();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\thideConditionalfields(modal.querySelector('form'));\n\t}\n\tcatch(err) {\n\t\tconsole.error(err);\n\t}\n}\n\nfunction fixElementNumbering(form){\n\tform.querySelectorAll('.form_element_wrapper').forEach((el, index)=>{\n\t\tel.dataset.priority = index+1;\n\t});\n}\n\n// add new element\nasync function showEmptyModal(target){\n\ttarget.classList.add('clicked');\n\n\tlet formId\t\t\t\t\t= target.dataset.formid;\n\tif(formId == undefined){\n\t\tif(target.closest('.form_element_wrapper') != null){\n\t\t\tformId = target.closest('.form_element_wrapper').dataset.formid;\n\t\t}else{\n\t\t\tformId = document.querySelector('input[type=hidden][name=\"formid\"').value;\n\t\t}\n\t}\n\t\n\tclearFormInputs();\n\n\t// Hide all\n\tmodal.querySelectorAll(\".shouldhide\").forEach(el=>el.classList.replace('shouldhide', 'hidden'))\n\t\n\tif(formElementWrapper != null){\n\t\tmodal.querySelector('[name=\"insertafter\"]').value = formElementWrapper.dataset.priority;\n\t}\n\t\n\tmodal.querySelector('[name=\"submit_form_element\"]').textContent = modal.querySelector('[name=\"submit_form_element\"]').textContent.replace('Change','Add');\n\t\n\tmodal.querySelector('.element_conditions_wrapper').innerHTML = `<img src=\"${sim.loadingGif}\" style=\"display:block; margin:0px auto 0px auto;\">`;\n\t\n\tMain.showModal(modal);\n\n\tvar formData = new FormData();\n\tformData.append('elementid', '-1');\n\tformData.append('formid', formId);\n\tvar response = await FormSubmit.fetchRestApi('forms/request_form_conditions_html', formData);\n\n\t//fill the element conditions tab\n\tmodal.querySelector('.element_conditions_wrapper').innerHTML = response;\n\n\t// Add nice selects\n\tmodal.querySelectorAll('.condition_select').forEach(function(select){\n\t\tMain.NiceSelect(select,{searchable: true});\n\t});\n}\n\n//edit existing element\nasync function requestEditElementData(target){\n\ttarget.classList.add('clicked');\n\n\tlet elementId\t\t= formElementWrapper.dataset.id;\n\tlet formId\t\t\t= target.closest('.form_element_wrapper').dataset.formid;\n\tmodal.querySelector('[name=\"element_id\"]').value = formElementWrapper.dataset.id;\n\tmodal.originalhtml\t= target.outerHTML;\n\n\tlet editButton\t\t= target.outerHTML;\n\n\tlet loader\t\t\t= Main.showLoader(target);\n\n\tloader.querySelector('.loadergif').style.margin = '5px 19px 0px 19px';\n\t\n\tlet formData = new FormData();\n\tformData.append('elementid', elementId);\n\tformData.append('formid', formId);\n\t\n\tlet response = await FormSubmit.fetchRestApi('forms/request_form_element', formData);\n\n\tif(response){\n\t\t//fill the form after we have clicked the edit button\n\t\tif(modal.querySelector('[name=\"add_form_element_form\"]') != null){\n\t\t\tmodal.querySelector('[name=\"add_form_element_form\"]').innerHTML = response.elementForm;\n\n\t\t\t//activate tiny mce's\n\t\t\tmodal.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\t\ttinymce.execCommand( 'mceRemoveEditor', false, el.id );\n\t\t\t\ttinymce.execCommand( 'mceAddEditor', false, el.id );\n\t\t\t});\n\t\t}\n\n\t\tshowCondionalFields(modal.querySelector('[name=\"formfield[type]\"]').value, modal.querySelector('[name=\"add_form_element_form\"]'));\n\n\t\t//fill the element conditions tab\n\t\tmodal.querySelector('.element_conditions_wrapper').innerHTML = response.conditionsHtml;\n\n\t\t// Add nice selects\n\t\tmodal.querySelectorAll('select').forEach(function(select){\n\t\t\tMain.NiceSelect(select, {searchable: true});\n\t\t});\n\t\t\n\t\tMain.showModal(modal);\n\t\t\n\t\t//show edit button again\n\t\tloader.outerHTML\t= editButton;\n\t}\n}\n\nasync function addFormElement(target){\n\tlet wrapper, priority;\n\tlet form\t\t= target.closest('form');\n\n\tlet referenceNode\t\t= document.querySelector('.form_elements .clicked');\n\n\tif(referenceNode == null){\n\t\tif( !window.location.href.includes('&formbuilder=true')){\n\t\t\twindow.location.href = window.location.href+'&formbuilder=true';\n\t\t\t\n\t\t\treturn;\n\t\t}\n\n\t\twrapper\t\t\t\t= document.querySelector('.form_elements');\n\n\t\tpriority\t\t\t= 1;\n\t}else{\n\t\twrapper\t\t\t\t= referenceNode.closest('.form_element_wrapper');\n\n\t\tpriority\t\t\t= parseInt(wrapper.dataset.priority) + 1;\n\t}\n\n\twrapper.insertAdjacentHTML('afterEnd', \n\t\t`<div class='loadergif_wrapper form_element_wrapper' data-id=-1 data-priority=${priority}><img class='loadergif' src='${sim.loadingGif}' width=50 loading='lazy'>Loading element...</div>`\n\t);\n\n\tfixElementNumbering(form);\n\n\tlet indexes\t= {};\n\tdocument.querySelectorAll(`.form_element_wrapper`).forEach(el => {\n\t\tindexes[el.dataset.id]\t= el.dataset.priority;\n\t})\n\t\n\tindexes\t\t\t= JSON.stringify(indexes);\n\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/add_form_element', indexes);\n\n\tif(response){\n\t\t// New Element\n\t\tif(form.querySelector('[name=\"element_id\"]').value == ''){\n\t\t\t//First clear any previous input\n\t\t\tclearFormInputs();\n\t\t\t\n\t\t\t// Replace loader with element\n\t\t\tdocument.querySelectorAll(`.loadergif_wrapper`).forEach(el=>el.outerHTML = response.html);\n\n\t\t\t//add resize listener\n\t\t\tform.querySelectorAll('.resizer').forEach(el=>{resizeOb.observe(el);});\n\t\t}else{\n\t\t\t//Runs after an element update\n\t\t\treferenceNode.closest('.form_element_wrapper').outerHTML = response.html;\n\t\t}\n\n\t\tMain.hideModals();\n\n\t\tMain.displayMessage(response.message);\n\n\t\tif(referenceNode != null){\n\t\t\treferenceNode.classList.remove('clicked');\n\t\t}\n\t}\n\n\t// Remove loaders\n\tdocument.querySelectorAll(`.loadergif_wrapper`).forEach(el=>el.remove());\n}\n\nasync function sendElementSize(el, widthPercentage){\n\tif(widthPercentage != el.dataset.widthpercentage && Math.abs(widthPercentage - el.dataset.widthpercentage)>5){\n\t\tel.dataset.widthpercentage = widthPercentage;\n\t\t\n\t\t//send new width over AJAX\n\t\tlet formData = new FormData();\n\t\tformData.append('formid', el.closest('.form_element_wrapper').dataset.formid);\n\t\tformData.append('elementid', el.closest('.form_element_wrapper').dataset.id);\n\t\tformData.append('new_width', widthPercentage);\n\t\t\n\t\tlet response = await FormSubmit.fetchRestApi('forms/edit_formfield_width', formData);\n\n\t\tif(response){\n\t\t\tMain.hideModals();\n\n\t\t\tMain.displayMessage(response);\n\t\t}\n\t}\n}\n\nasync function removeElement(target){\n\tlet parent\t\t\t= target.parentNode;\n\tlet elementWrapper\t= target.closest('.form_element_wrapper');\n\tlet formId\t\t\t= elementWrapper.dataset.formid;\n\tlet elementIndex \t= elementWrapper.dataset.id;\n\tlet form\t\t\t= target.closest('form');\n\n\tMain.showLoader(target);\n\tlet loader\t\t\t= parent.querySelector('.loadergif');\n\tloader.style.paddingRight = '10px';\n\tloader.classList.remove('loadergif');\n\n\tlet formData = new FormData();\n\tformData.append('formid', formId);\n\n\tformData.append('elementindex', elementIndex);\n\t\n\tlet response = await FormSubmit.fetchRestApi('forms/remove_element', formData);\n\n\tif(response){\n\t\t//remove the formelement row\n\t\telementWrapper.remove();\n\t\t\n\t\tfixElementNumbering(form);\n\n\t\tMain.displayMessage(response);\n\t}\n}\n\n //Fires after element reorder\nasync function reorderformelements(event){\n\tif(!reorderingBusy){\n\t\treorderingBusy = true;\n\n\t\tfixElementNumbering(event.item.closest('form'));\n\n\t\tlet formData = new FormData();\n\t\tformData.append('form_id', event.item.dataset.formid);\n\t\tformData.append('el_id', event.item.dataset.id);\n\n\t\tlet indexes\t= {};\n\t\tdocument.querySelectorAll(`.form_element_wrapper`).forEach(el => {\n\t\t\tindexes[el.dataset.id]\t= el.dataset.priority;\n\t\t})\n\t\t\n\t\tformData.append('indexes', JSON.stringify(indexes));\n\t\t\n\t\tlet response\t= await FormSubmit.fetchRestApi('forms/reorder_form_elements', formData);\n\n\t\tif(response){\n\t\t\treorderingBusy = false;\n\n\t\t\tMain.displayMessage(response);\n\t\t}\n\t}else{\n\t\tlet options = {\n\t\t\ticon: 'error',\n\t\t\ttitle: 'ordering already in progress, please wait',\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t};\n\n\t\tif(document.fullscreenElement != null){\n\t\t\toptions['target']\t= document.fullscreenElement;\n\t\t}\n\n\t\tSwal.fire(options);\n\t}\n}\n\nasync function saveFormConditions(target){\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_element_conditions');\n\n\tif(response){\n\t\tMain.hideModals();\n\n\t\tMain.displayMessage(response);\n\t}\n}\n\nasync function saveFormSettings(target){\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_settings');\n\n\tif(response){\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\n\n\t\tMain.displayMessage(response);\n\t}\n}\n\nasync function saveFormEmails(target){\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_emails');\n\n\tif(response){\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\n\n\t\tMain.displayMessage(response);\n\t}\n}\n\n//listen to element size changes\nvar doit;\nconst resizeOb = new ResizeObserver(function(entries) {\n\tlet element = entries[0].target;\n\tif(element.parentNode != undefined){\n\t\tvar width\t= entries[0].contentRect.width\n\t\tvar widthPercentage = Math.round(width/element.parentNode.offsetWidth * 100);\n\t\t\n\t\t//Show percentage on screen\n\t\tlet el\t= element.querySelector('.widthpercentage');\n\t\tif(widthPercentage <99){\n\t\t\tel.textContent = widthPercentage + '%';\n\t\t}else if(el != null){\n\t\t\tel.textContent = '';\n\t\t}\n\t\t\n\t\tclearTimeout(doit);\n\t\tdoit = setTimeout(sendElementSize, 500, element, widthPercentage);\n\t}\n});\n\n//show conditional fields based on on the element type\nfunction showCondionalFields(type, form){\n\thideConditionalfields(form);\n\n\tform.querySelectorAll(`.elementoption:not(.${type}, .reverse), .elementoption.not${type}`).forEach(el=>el.classList.replace('shouldhide', 'hidden'));\n\tform.querySelectorAll(`.elementoption.${type}`).forEach(el=>el.classList.replace('hidden', 'shouldhide'));\n\n\tswitch(type) {\n\t\tcase 'button':\n\t\tcase 'formstep':\n\t\tcase 'label':\n\t\t\tform.querySelector('[name=\"labeltext\"] .elementtype').textContent = type;\n\t\t\tbreak;\n\t\tcase 'info':\n\t\t\tform.querySelector('[name=\"infotext\"] .type').textContent = 'infobox';\n\t\t\tbreak;\n\t\tcase 'hcaptcha':\n\t\tcase 'recaptcha':\n\t\tcase 'turnstile':\n\t\t\tmodal.querySelectorAll(\".shouldhide\").forEach(el=>el.classList.replace('shouldhide', 'hidden'));\n\t\t\tmodal.querySelectorAll(`[name=\"elementname\"]`).forEach(el=>el.classList.replace('hidden', 'shouldhide'));\n\t\t\tbreak;\n\t\tcase 'radio':\n\t\tcase 'select':\n\t\tcase 'checkbox':\n\t\tcase 'datalist':\n\t\t\tbreak;\n\t\tcase 'p':\n\t\t\tform.querySelector('[name=\"infotext\"] .type').textContent = 'Paragraph';\n\t\t\tbreak;\n\t\tcase 'php':\n\t\t\tbreak;\n\t\tcase 'file':\n\t\tcase 'image':\n\t\t\tform.querySelectorAll('.filetype').forEach(el=>{el.textContent = type;});\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t} \n}\n\nfunction hideConditionalfields(form){\n\tform.querySelectorAll(`.elementoption.reverse`).forEach(el=>el.classList.replace('hidden', 'shouldhide'));\n}\n\nfunction showOrHideIds(target){\n\n\tconst url \t\t= new URL(window.location);\n\n\tif(target.dataset.action == 'show'){\n\t\turl.searchParams.set('showid', 'true');\n\n\t\tformWrapper.querySelectorAll('.elid.hidden').forEach(el=>el.classList.remove('hidden'));\n\t\t\n\t\ttarget.textContent \t\t= 'Hide ids';\n\t\ttarget.dataset.action\t= 'hide';\n\t}else{\n\t\turl.searchParams.delete('showid');\n\n\t\tformWrapper.querySelectorAll('.elid:not(.hidden)').forEach(el=>el.classList.add('hidden'));\n\t\t\n\t\ttarget.textContent \t\t= 'Show ids';\n\t\ttarget.dataset.action\t= 'show';\n\t}\n\t\n\twindow.history.pushState({}, '', url);\n}\n\nfunction showOrHideName(target){\n\tconst url \t\t= new URL(window.location);\n\n\tif(target.dataset.action == 'show'){\n\t\turl.searchParams.set('showname', 'true');\n\n\t\tformWrapper.querySelectorAll('.elname.hidden').forEach(el=>el.classList.remove('hidden'));\n\t\t\n\t\ttarget.textContent \t\t= 'Hide names';\n\t\ttarget.dataset.action\t= 'hide';\n\t}else{\n\t\turl.searchParams.delete('showid');\n\n\t\tformWrapper.querySelectorAll('.elname:not(.hidden)').forEach(el=>el.classList.add('hidden'));\n\t\t\n\t\ttarget.textContent \t\t= 'Show names';\n\t\ttarget.dataset.action\t= 'show';\n\t}\n\n\twindow.history.pushState({}, '', url);\n}\n\nfunction maybeRemoveElement(target){\n\tif(typeof(Swal)=='undefined'){\n\t\tremoveElement(target);\n\t}else{\n\t\tlet options = {\n\t\t\ttitle: 'Are you sure?',\n\t\t\ttext: \"This will remove this element\",\n\t\t\ticon: 'warning',\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: '#3085d6',\n\t\t\tcancelButtonColor: '#d33',\n\t\t\tconfirmButtonText: 'Yes, delete it!'\n\t\t}\n\n\t\tif(document.fullscreenElement != null){\n\t\t\toptions['target']\t= document.fullscreenElement;\n\t\t}\n\n\t\tSwal.fire(options).then((result) => {\n\t\t\tif (result.isConfirmed) {\n\t\t\t\tremoveElement(target);\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction showOrHideConditionFields(target){\n\t//show default conditional field\n\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.remove('hidden');\n\t\n\t//hide extra fields\n\ttarget.closest('.rule_row').querySelectorAll('.equation_2, .conditional_field_2').forEach(function(el){\n\t\tel.classList.add('hidden');\n\t});\n\t\n\t//show both extra fields\n\tif(target.dataset.value == '-' || target.dataset.value == '+'){\n\t\ttarget.closest('.rule_row').querySelectorAll('.equation_2, .conditional_field_2').forEach(function(el){\n\t\t\tel.classList.remove('hidden');\n\t\t});\n\t//show extra conditional field\n\t}else if(target.dataset.value != undefined && target.dataset.value.includes('value')){\n\t\ttarget.closest('.rule_row').querySelector('.conditional_field_2').classList.remove('hidden');\n\n\t\t//hide normal conditional value field\n\t\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.add('hidden');\n\t}else if(target.dataset.value != undefined && (\n\t\t\ttarget.dataset.value.includes('changed') || \n\t\t\ttarget.dataset.value.includes('clicked') ||\n\t\t\ttarget.dataset.value.includes('visible') ||\n\t\t\ttarget.dataset.value.includes('invisible') ||\n\t\t\ttarget.dataset.value.includes('checked')\n\t)){\n\t\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.add('hidden');\n\t}\n}\n\nasync function addConditionRule(target){\n\tlet condition\t\t= target.closest('.condition_row');\n\tlet row\t\t\t\t= target.closest('.rule_row');\n\tlet activeButton\t= row.querySelector('.active');\n\t\n\tif(\n\t\t(\n\t\t\tactiveButton == null && \t\t\t\t\t\t\t\t\t\t\t\t\t// there is no active button\n\t\t\tcondition.querySelectorAll('.rule_row').length > 1 && \t\t\t\t\t\t// but there are more than one rules\n\t\t\trow.dataset.rule_index != condition.querySelectorAll('.rule_row').length -1\t// and this is not the last rule\n\t\t) ||\n\t\t(\n\t\t\tactiveButton != null && \t\t\t\t// there is an active button\n\t\t\t!target.classList.contains('active')\t// We clicked on the button which was not active\n\t\t)\n\t){\t\n\t\tlet current\t\t= 'OR';\n\t\tlet opposite\t= 'AND';\n\t\tlet makeActive\t= true;\n\t\t\n\t\tif(activeButton != null){\n\t\t\tif(activeButton.textContent == 'AND'){\n\t\t\t\tcurrent\t\t= 'AND';\n\t\t\t\topposite\t= 'OR';\n\t\t\t}\n\n\t\t\tlet options = {\n\t\t\t\ttitle: 'What do you want to do?',\n\t\t\t\tshowDenyButton: true,\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonText: `Change ${current} to ${opposite}`,\n\t\t\t\tdenyButtonText: 'Add a new rule',\n\t\t\t};\n\t\n\t\t\tif(document.fullscreenElement != null){\n\t\t\t\toptions['target']\t= document.fullscreenElement;\n\t\t\t}\n\t\t\t\n\t\t\tresult\t= await Swal.fire(options)\n\n\t\t\t//swap and/or\n\t\t\tif (result.isConfirmed) {\n\t\t\t\t//make other button inactive\n\t\t\t\tactiveButton.classList.remove('active');\n\t\t\t//add new rule after this one\n\t\t\t}else if (result.isDenied) {\n\t\t\t\taddRuleRow(row);\n\t\t\t\tmakeActive\t= false;\n\t\t\t}\n\t\t}\n\n\t\tif(makeActive){\n\t\t\t//make the button active\n\t\t\ttarget.classList.add('active');\n\t\t\t\n\t\t\t//store action \n\t\t\trow.querySelector('.combinator').value = target.textContent;\n\t\t}\n\t\t\t\n\t//add new rule at the end\n\t}else{\n\t\taddRuleRow(row);\n\t\t\n\t\t//make the button active\n\t\ttarget.classList.add('active');\n\t\t\n\t\t//store action \n\t\trow.querySelector('.combinator').value = target.textContent;\n\t}\n}\n\nfunction addRuleRow(row){\n\t//Insert a new rule row\n\tlet clone\t\t= FormFunctions.cloneNode(row);\n\t\n\tlet cloneIndex\t= parseInt(row.dataset.rule_index) + 1;\n\n\tclone.dataset.rule_index = cloneIndex;\n\n\trow.parentNode.insertBefore(clone, row.nextSibling);\n\t\n\tfixRuleNumbering(row.closest('.condition_row'));\n}\n\nfunction addOppositeCondition(clone, target){\n\t//Set values to opposite\n\tclone.querySelectorAll('.element_condition').forEach(function(el){\n\t\tif(el.matches('select:not(.nonice,.swal2-select)')){\n\t\t\tMain.NiceSelect(el, {searchable: true});\n\t\t}\n\t\t\n\t\tif(el.tagName == 'SELECT' && el.classList.contains('equation')){\n\t\t\t//remove all default selected\n\t\t\tFormFunctions.removeDefaultSelect(el);\n\t\t\t\n\t\t\t//get the original value which was lost during cloning\n\t\t\tlet originalSelect \t= target.closest('.condition_row').querySelector('.equation');\n\t\t\tlet selIndex\t\t= originalSelect.selectedIndex;\n\t\t\t\n\t\t\tif(selIndex){\n\t\t\t\t//if odd the select the next one\n\t\t\t\tif(selIndex % 2){\n\t\t\t\t\tel.options[(selIndex + 1)].defaultSelected = true;\n\t\t\t\t}else{\n\t\t\t\t\tel.options[(selIndex - 1)].defaultSelected = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//reflect changes in niceselect\n\t\t\tif(el._niceselect != undefined){\n\t\t\t\tel._niceselect.update();\n\t\t\t}\n\t\t}else if(el.type == 'radio' && el.classList.contains('element_condition') && (el.value == 'show' || el.value == 'hide')){\n\t\t\tif(!el.checked){\n\t\t\t\tel.checked = true;\n\t\t\t}else{\n\t\t\t\tel.checked = false;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn clone;\n}\n\nfunction addCondition(target){\n\tlet clone;\n\tlet row = target.closest('.condition_row');\n\t\n\tif(target.classList.contains('opposite')){\n\t\tclone = FormFunctions.cloneNode(row, false);\n\t\tclone = addOppositeCondition(clone, target);\n\t}else{\n\t\tclone = FormFunctions.cloneNode(row);\n\t}\n\t\n\tlet cloneIndex\t= parseInt(row.dataset.condition_index) + 1;\n\n\tclone.dataset.condition_index = cloneIndex;\n\t\n\tif(!target.classList.contains('opposite')){\n\t\tclone.querySelectorAll('.active').forEach(function(el){\n\t\t\tel.classList.remove('active');\n\t\t});\n\t}\t\n\t\n\t//store radio values\n\tlet radioValues = {};\n\trow.querySelectorAll('input[type=\"radio\"]:checked').forEach(input=>{\n\t\tradioValues[input.value]\t= input.value;\n\t});\n\t\t\n\t//insert in page\n\trow.parentNode.insertBefore(clone, row.nextSibling);\n\t\n\tif(!target.classList.contains('opposite')){\n\t\t//remove unnecessy rulerows works only after html insert\n\t\tlet ruleCount = clone.querySelectorAll('.rule_row').length;\n\t\tclone.querySelectorAll('.rule_row').forEach(function(ruleRow){\n\t\t\t//only keep the last rule (as that one has the + button)\n\t\t\tif(ruleRow.dataset.rule_index != ruleCount - 1){\n\t\t\t\truleRow.remove();\n\t\t\t}else{\n\t\t\t\tfixRuleNumbering(ruleRow.closest('.condition_row'));\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//fix numbering\n\tfixConditionNumbering();\n\t\n\t//fix radio's as they get unselected due to same names on insert\n\trow.querySelectorAll('input[type=\"radio\"]').forEach(input=>{\n\t\tif(radioValues[input.value] != undefined){\n\t\t\tinput.checked = true;\n\t\t}\n\t});\n\t\n\t\n\t//hide button\n\ttarget.style.display = 'none';\n}\n\nfunction removeConditionRule(target){\n\tlet conditionRow = target.closest('.condition_row');\n\t\n\t//count rule rows in this condition row\n\tif(conditionRow.querySelectorAll('.rule_row').length > 1){\n\t\tlet options = {\n\t\t\ttitle: 'What do you want to remove?',\n\t\t\tshowDenyButton: true,\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonText: `One condition rule`,\n\t\t\tdenyButtonText: `The whole condition`,\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t};\n\n\t\tif(document.fullscreenElement != null){\n\t\t\toptions['target']\t= document.fullscreenElement;\n\t\t}\n\n\t\tSwal.fire(options).then((result) => {\n\t\t\t//remove a rule rowe\n\t\t\tif (result.isConfirmed) {\n\t\t\t\t//get the current row\n\t\t\t\tlet ruleRow\t\t= target.closest('.rule_row');\n\t\t\t\t\n\t\t\t\t//get the current row index\n\t\t\t\tlet ruleRowIndex\t= parseInt(ruleRow.dataset.rule_index);\n\t\t\t\t\n\t\t\t\t//Get previous row\n\t\t\t\tlet prevRow\t\t= conditionRow.querySelector('[data-rule_index=\"'+(ruleRowIndex - 1)+'\"]');\n\t\t\t\t\n\t\t\t\tif(prevRow != null){\n\t\t\t\t\t//remove the active class from row above if there is no row after this one\n\t\t\t\t\tif(conditionRow.querySelector(`[data-rule_index=\"${ruleRowIndex + 1}\"]`) == null){\n\t\t\t\t\t\tprevRow.querySelectorAll('.active').forEach(el=>el.classList.remove('active'));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//clear the hidden input\n\t\t\t\t\tprevRow.querySelector('.combinator').value\t= '';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttarget.closest('.rule_row').remove();\n\t\t\t\t\n\t\t\t\tfixRuleNumbering(conditionRow);\n\t\t\t} else if (result.isDenied) {\n\t\t\t\tconditionRow.remove();\n\t\t\t\tfixConditionNumbering();\n\t\t\t}\n\t\t});\n\t}else{\n\t\tlet options = {\n\t\t\ttitle: 'Are you sure?',\n\t\t\ttext: \"This will remove this condition\",\n\t\t\ticon: 'warning',\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t\tcancelButtonColor: '#d33',\n\t\t\tconfirmButtonText: 'Yes, delete it!'\n\t\t};\n\n\t\tif(document.fullscreenElement != null){\n\t\t\toptions['target']\t= document.fullscreenElement;\n\t\t}\n\n\t\tSwal.fire(options).then((result) => {\n\t\t\tif (result.isConfirmed) {\n\t\t\t\tconditionRow.remove();\n\t\t\t\tfixConditionNumbering();\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction fixRuleNumbering(conditionRow){\n\tlet ruleRows\t= conditionRow.querySelectorAll('.element_conditions_wrapper .rule_row');\n\tlet i = 0;\n\t\n\t//loop over all rules in the condition\n\truleRows.forEach(ruleRow =>{\n\t\truleRow.dataset.rule_index = i;\n\t\t\n\t\truleRow.querySelectorAll('.element_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id = el.id.replace(/([0-9]+\\]\\[rules\\]\\[)[0-9]+/g,\"$1\"+i);\n\t\t\t}\n\t\t\t\t\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name = el.name.replace(/([0-9]+\\]\\[rules\\]\\[)[0-9]+/g,\"$1\"+i);\n\t\t\t}\n\t\t});\n\t\t\n\t\ti++;\n\t});\n}\n\nfunction fixConditionNumbering(){\n\tlet conditionRows\t= modal.querySelectorAll('.element_conditions_wrapper .condition_row');\n\tfor (let i = 0; i < conditionRows.length; i++) {\n\t\tconditionRows[i].dataset.condition_index = i;\n\t\t\n\t\tconditionRows[i].querySelectorAll('.element_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id = el.id.replace(/[0-9]+(\\]\\[rules\\]\\[[0-9]+)/g,i+\"$1\")\n\t\t\t\tel.id.replace(/[0-9]+(\\]\\[action\\])/g,i+\"$1\");\n\t\t\t\tel.id = el.id.replace(/(element_conditions\\[)[0-9]+\\]\\[+/g,\"$1\"+i+'][');\n\t\t\t}\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name = el.name.replace(/[0-9]+(\\]\\[rules\\]\\[[0-9]+)/g,i+\"$1\");\n\t\t\t\tel.name = el.name.replace(/[0-9]+(\\]\\[action\\])/g,i+\"$1\");\n\t\t\t\tel.name = el.name.replace(/(element_conditions\\[)[0-9]+\\]\\[+/g,\"$1\"+i+'][');\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction focusFirst(){\n\tmodal.scrollTo(0,0);\n\t\n\tconsole.log('scrolling')\n\tmodal.querySelector('[name=\"add_form_element_form\"] .nice-select').focus();\n}\n\nreorderingBusy = false;\ndocument.addEventListener(\"DOMContentLoaded\",function() {\n\n\t//Make the form_elements div sortable\n\tlet options = {\n\t\thandle: '.movecontrol',\n\t\tanimation: 150,\n\t\tonEnd: reorderformelements\n\t};\n\t\n\tdocument.querySelectorAll('.form_elements').forEach(el=>{Sortable.create(el, options);});\n\t\n\t//Listen to resize events on form_element_wrappers\n\tdocument.querySelectorAll('.resizer').forEach(el=>{resizeOb.observe(el);});\n});\n\nfunction fromEmailClicked(target){\n\tlet div1 = target.closest('.clone_div').querySelector('.emailfromfixed');\n\tlet div2 = target.closest('.clone_div').querySelector('.emailfromconditional');\n\n\tif(target.value == 'fixed'){\n\t\tdiv1.classList.remove('hidden');\n\t\tdiv2.classList.add('hidden');\n\t}else{\n\t\tdiv2.classList.remove('hidden');\n\t\tdiv1.classList.add('hidden');\n\t}\n}\n\nfunction toEmailClicked(target){\n\tlet div1 = target.closest('.clone_div').querySelector('.emailtofixed');\n\tlet div2 = target.closest('.clone_div').querySelector('.emailtoconditional');\n\n\tif(target.value == 'fixed'){\n\t\tdiv1.classList.remove('hidden');\n\t\tdiv2.classList.add('hidden');\n\t}else{\n\t\tdiv2.classList.remove('hidden');\n\t\tdiv1.classList.add('hidden');\n\t}\n}\n\nfunction placeholderSelect(target){\n\tlet value = '';\n\tif(target.classList.contains('placeholders')){\n\t\tvalue = target.textContent;\n\t}else if(target.value != ''){\n\t\tvalue = target.value;\n\t\ttarget.selectedIndex = '0';\n\t}\n\t\n\tif(value != ''){\n\t\tlet options = {\n\t\t\ticon: 'success',\n\t\t\ttitle: 'Copied '+value,\n\t\t\tshowConfirmButton: false,\n\t\t\ttimer: 1500\n\t\t};\n\n\t\tif(document.fullscreenElement != null){\n\t\t\toptions['target']\t= document.fullscreenElement;\n\t\t}\n\n\t\tSwal.fire(options);\n\n\t\tnavigator.clipboard.writeText(value);\n\t}\n}\n\nfunction copyWarningCondition(target){\n\t//copy the row\n\tlet newNode = FormFunctions.cloneNode(target.closest('.warning_conditions'));\n\n\ttarget.closest('.conditions_wrapper').insertAdjacentElement('beforeEnd', newNode);\n\n\t//add the active class\n\ttarget.classList.add('active');\n\n\t//store the value\n\ttarget.closest('.warning_conditions').querySelector('.combinator').value = target.value;\n\n\tfixWarningConditionNumbering(target.closest('.conditions_wrapper'));\n}\n\nfunction removeWarningCondition(target){\n\tlet condition\t= target.closest('.warning_conditions');\n\n\t// Remove the active class of the previous conditions\n\tif(condition.nextElementSibling == null){\n\t\tcondition.previousElementSibling.querySelector('.active').classList.remove('active');\n\n\t\t//clear the value\n\t\tcondition.previousElementSibling.querySelector('.combinator').value='';\n\t}\n\n\t// remove the condition\n\tcondition.remove();\n\n\tfixWarningConditionNumbering(target.closest('.conditions_wrapper'));\n}\n\n//Catch click events\nwindow.addEventListener(\"click\", event => {\n\tlet target = event.target;\n\t\n\tformWrapper\t\t\t\t= target.closest('.sim-form-wrapper');\n\tformElementWrapper\t\t= target.closest('.form_element_wrapper');\n\t\n\tif(formWrapper != null){\n\t\tmodal = formWrapper.querySelector('.add_form_element_modal');\n\t}\n\t\n\t/* ELEMENT ACTIONS */\n\t\n\t//Show form edit controls\n\tif (target.name == 'showid'){\n\t\tshowOrHideIds(target);\n\t}else if (target.name == 'showname'){\n\t\tshowOrHideName(target);\n\t}else if(target.name == 'submit_form_element'){\n\t\tevent.stopPropagation();\n\t\taddFormElement(target);\n\t}else if(target.name == 'submit_form_condition'){\n\t\tsaveFormConditions(target);\n\t}else if(target.name == 'submit_form_setting'){\n\t\tsaveFormSettings(target);\n\t}else if(target.name == 'submit_form_emails'){\n\t\tsaveFormEmails(target);\n\t}else if(target.name == 'autoarchive'){\n\t\tlet el = target.closest('.formsettings_wrapper').querySelector('.autoarchivelogic');\n\t\tif(target.value == 'true'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\t}else if(target.name == 'save_in_meta'){\n\t\ttarget.closest('.sim-form.builder').querySelector('.recurring-submissions').classList.toggle('hidden');\n\t}else if(target.name == 'formfield[mandatory]' && target.checked){\n\t\ttarget.closest('div').querySelector('[name=\"formfield[recommended]\"]').checked=true;\n\t}\n\t\n\t//request form values via AJAX\n\tif (target.classList.contains('edit_form_element')){\n\t\trequestEditElementData(target);\n\t}\n\t\n\tif (target.classList.contains('remove_form_element')){\n\t\tmaybeRemoveElement(target);\n\t}\n\n\t//open the modal to add an element\n\tif (target.classList.contains('add_form_element') || target.name == 'createform'){\n\t\tif( !window.location.href.includes('&formbuilder=true')){\n\t\t\twindow.location.href = window.location.href+'&formbuilder=true';\n\t\t\t\n\t\t\treturn;\n\t\t}\n\t\tshowEmptyModal(target);\n\t}\n\t\n\t//actions on element type select\n\tif (target.closest('.elementtype') != null){\n\t\tshowCondionalFields(target.dataset.value, target.closest('form'));\n\t\t//if label type is selected, wrap by default\n\t\tif(target.dataset.value == 'label'){\n\t\t\ttarget.closest('form').querySelector('[name=\"formfield[wrap]\"]').checked\t\t= true;\n\t\t\ttarget.closest('form').querySelector('[name=\"formfield[wrap]\"]').defaultChecked\t= true\n\t\t}\n\t}\n\t\n\t/* ELEMENT CONDITION ACTIONS */\n\t//actions on condition equation select\n\tif (target.closest('.equation') != null){\n\t\tshowOrHideConditionFields(target);\n\t}\n\t\n\t//add new conditions_rule\n\tif (target.classList.contains('and_rule') || target.classList.contains('or_rule')){\n\t\taddConditionRule(target);\n\t}\n\t\n\t//add new condition row\n\tif (target.classList.contains('add_condition')){\n\t\taddCondition(target);\n\t}\n\t\n\t//remove  condition row\n\tif (target.classList.contains('remove_condition')){\n\t\tremoveConditionRule(target);\n\t}\n\t\n\t//show copy fields\n\tif (target.classList.contains('showcopyfields')){\n\t\tif(target.checked){\n\t\t\ttarget.closest('.copyfieldswrapper').querySelector('.copyfields').classList.remove('hidden');\n\t\t}else{\n\t\t\ttarget.closest('.copyfieldswrapper').querySelector('.copyfields').classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('emailtrigger')){\n\t\tlet el = target.closest('.clone_div').querySelector('.conditionalfield-wrapper');\n\t\tif(target.value == 'fieldchanged'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\n\t\tel = target.closest('.clone_div').querySelector('.conditionalfields-wrapper');\n\t\tif(target.value == 'fieldschanged'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\n\t\tel = target.closest('.clone_div').querySelector('.submitted-type');\n\t\tif(target.value == 'submittedcond'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('fromemail')){\n\t\tfromEmailClicked(target);\n\t}\n\t\n\tif(target.classList.contains('emailto')){\n\t\ttoEmailClicked(target);\n\t}\n\t\n\tif(target.classList.contains('placeholderselect') || target.classList.contains('placeholders')){\n\t\tplaceholderSelect(target);\n\t}\n\n\t//copy warning_conditions row\n\tif(target.matches('.warn_cond')){\n\t\tcopyWarningCondition(target);\n\t}\n\n\tif(target.matches('.remove_warn_cond')){\n\t\tremoveWarningCondition(target)\n\t}\n\n\tif(target.matches('.builder-permissions-rights-form')){\n\t\ttarget.closest('div').querySelector('.permission-wrapper').classList.toggle('hidden');\n\t}\n});\n\nwindow.addEventListener('change', ev=>{\n\tlet target\t= ev.target;\n\tif(target.matches('.meta_key')){\n\t\t//if this option has a keys data value\n\t\tlet metaIndexes\t= target.list.querySelector(`[value='${target.value}' i]`);\n\t\tif(metaIndexes != null && metaIndexes.dataset.keys != undefined){\n\t\t\tparent\t= target.closest('.warning_conditions').querySelector('.index_wrapper');\n\t\t\t//show the data key selector\n\t\t\tparent.classList.remove('hidden');\n\t\t\t\n\t\t\t//remove all options and add new ones\n\t\t\tlet datalist\t= parent.querySelector('.meta_key_index_list');\n\t\t\tfor(let i=1; i<datalist.options.length; i++) {\n\t\t\t\tdatalist.options[i].remove();\n\t\t\t}\n\n\t\t\t//add the new options\n\t\t\tmetaIndexes.split(',').forEach(key=>{\n\t\t\t\tlet opt\t\t\t= document.createElement('option');\n\t\t\t\topt.value \t\t= key;\n\t\t\t\tdatalist.appendChild(opt);\n\t\t\t});\n\t\t}\n\t}else if(target.matches(\".condition_row [name*='[property_value]']\")){\n\t\tlet selectedElement\t= document.querySelector(`.form_element_wrapper[data-id=\"${target.value}\"]`);\n\t\tif(selectedElement == null){\n\t\t\treturn;\n\t\t}\n\n\t\tlet selectedElementType\t= selectedElement.dataset.type;\n\n\t\t// if select element is of number type\n\t\tif(selectedElementType == 'number'){\n\t\t\ttarget.closest('.condition_form').querySelectorAll('.addition.hidden').forEach(el=>el.classList.remove('hidden'));\n\t\t}else{\n\t\t\ttarget.closest('.condition_form').querySelectorAll('.addition:not(.hidden)').forEach(el=>el.classList.add('hidden'));\n\t\t}\n\t\t\n\t\t// if select element is of date type\n\t\tif(selectedElementType == 'date'){\n\t\t\ttarget.closest('.condition_form').querySelectorAll('.addition .days.hidden').forEach(el=>el.classList.remove('hidden'));\n\t\t}else{\n\t\t\ttarget.closest('.condition_form').querySelectorAll('.addition .days:not(.hidden)').forEach(el=>el.classList.add('hidden'));\n\t\t}\n\t}else if(target.matches(\"[name*='[submittedtrigger][equation]']\")){\n\t\tlet parent\t= target.closest('.submitted-trigger-type');\n\t\tlet static\t= parent.querySelector('.staticvalue');\n\t\tlet dynamic\t= parent.querySelector('div.dynamicvalue');\n\n\t\tif(dynamic != null){\n\t\t\n\t\t\tif(target.value == '==' || target.value == '!=' || target.value == '>' || target.value == '<'){\n\t\t\t\tstatic.classList.remove('hidden');\n\t\t\t\tdynamic.classList.add('hidden');\n\t\t\t}else if(target.value == 'checked' || target.value == '!checked'){\n\t\t\t\tdynamic.classList.add('hidden');\n\t\t\t\tstatic.classList.add('hidden');\n\t\t\t}else{\n\t\t\t\tdynamic.classList.remove('hidden');\n\t\t\t\tstatic.classList.add('hidden');\n\t\t\t}\n\t\t}\n\t}else if(target.name != undefined && target.name.includes('[equation')){\n\t\tlet warningsConditions\t= target.closest('.warning_conditions');\n\n\t\tif(warningsConditions != null){\n\t\t\tif( target.value == 'submitted'){\n\t\t\t\twarningsConditions.querySelector(`[name*='[conditional_value]']`).classList.add('hidden');\n\t\t\t}else{\n\t\t\t\twarningsConditions.querySelector(`[name*='[conditional_value]']`).classList.remove('hidden');\n\t\t\t}\n\t\t}\n\t}\n});\n\nfunction fixWarningConditionNumbering(parent){\n\tvar warningConditions\t= parent.querySelectorAll('.warning_conditions');\n\tvar i = 0;\n\t//loop over all rules in the condition\n\twarningConditions.forEach(condition =>{\n\t\tcondition.dataset.index = i;\n\t\t\n\t\tcondition.querySelectorAll('.warning_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name\t= el.name.replace(/([0-9])+/g,i);\n\t\t\t}\n\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id\t= el.id.replace(/([0-9])+/g,i);\n\t\t\t}\n\n\t\t\tif(el.list != undefined){\n\t\t\t\tel.setAttribute('list', el.list.id.replace(/([0-9])+/g,i));\n\t\t\t}\n\t\t});\n\t\t\n\t\ti++;\n\t});\n}\n\n"],"names":["reorderingBusy","formWrapper","formElementWrapper","modal","doit","clearFormInputs","querySelectorAll","forEach","el","type","checked","value","id","editor","tinyMCE","get","setContent","FormFunctions","removeDefaultSelect","undefined","_niceselect","clear","update","hideConditionalfields","querySelector","err","console","error","fixElementNumbering","form","index","dataset","priority","async","sendElementSize","widthPercentage","widthpercentage","Math","abs","formData","FormData","append","closest","formid","response","FormSubmit","fetchRestApi","Main","hideModals","displayMessage","removeElement","target","parent","parentNode","elementWrapper","formId","elementIndex","showLoader","loader","style","paddingRight","classList","remove","reorderformelements","event","options","icon","title","confirmButtonColor","document","fullscreenElement","Swal","fire","item","indexes","JSON","stringify","log","resizeOb","ResizeObserver","entries","element","width","contentRect","round","offsetWidth","textContent","clearTimeout","setTimeout","showCondionalFields","replace","addRuleRow","row","clone","cloneNode","cloneIndex","parseInt","rule_index","insertBefore","nextSibling","fixRuleNumbering","conditionRow","ruleRows","i","ruleRow","name","fixConditionNumbering","conditionRows","length","condition_index","fixWarningConditionNumbering","warningConditions","condition","list","setAttribute","addEventListener","handle","animation","onEnd","Sortable","create","observe","window","url","URL","location","action","searchParams","set","delete","add","history","pushState","showOrHideIds","showOrHideName","stopPropagation","wrapper","referenceNode","href","includes","insertAdjacentHTML","sim","loadingGif","submitForm","outerHTML","html","message","addFormElement","saveFormConditions","saveFormSettings","saveFormEmails","toggle","contains","elementId","originalhtml","editButton","margin","innerHTML","elementForm","tinymce","execCommand","conditionsHtml","select","NiceSelect","searchable","showModal","requestEditElementData","text","showCancelButton","cancelButtonColor","confirmButtonText","then","result","isConfirmed","maybeRemoveElement","showEmptyModal","defaultChecked","showOrHideConditionFields","activeButton","current","opposite","makeActive","showDenyButton","denyButtonText","isDenied","addConditionRule","matches","tagName","selIndex","selectedIndex","defaultSelected","addOppositeCondition","radioValues","input","ruleCount","display","addCondition","ruleRowIndex","prevRow","removeConditionRule","div1","div2","fromEmailClicked","toEmailClicked","showConfirmButton","timer","navigator","clipboard","writeText","placeholderSelect","newNode","insertAdjacentElement","copyWarningCondition","nextElementSibling","previousElementSibling","removeWarningCondition","ev","metaIndexes","keys","datalist","split","key","opt","createElement","appendChild","selectedElement","selectedElementType","static","dynamic","warningsConditions"],"sourceRoot":""}