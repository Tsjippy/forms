{"version":3,"file":"formbuilder.min.js","mappings":"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","sources":["webpack://forms/./formbuilder.js"],"sourcesContent":["var reorderingBusy, formWrapper, formElementWrapper, modal;\r\n\r\nconsole.log(\"Formbuilder.js loaded\");\r\n\r\n/* FUNCTIONS */\r\n\r\n/**\r\n * Sets the min and max values of the window date inputs and the max of the reminder amount input\r\n * @param {*} target \r\n * @returns \r\n */\r\nfunction updateReminderMinMax(target){\r\n\tlet form \t\t\t\t= target.closest('form');\r\n\tlet frequency \t\t\t= form.querySelector(`[name=\"frequency\"]`);\r\n\tlet periodType \t\t\t= form.querySelector(`#period:checked`);\r\n\tlet windowStart \t\t= form.querySelector(`[name=\"window-start\"]`);\r\n\tlet windowEnd \t\t\t= form.querySelector(`[name=\"window-end\"]`);\r\n\tlet reminderStart\t\t= form.querySelector(`[name=\"reminder-startdate\"]`);\r\n\tlet reminderAmount\t\t= form.querySelector(`[name=\"reminder-amount\"]`);\r\n\r\n\t// these two should have a value\r\n\tif(frequency == null || frequency.value == '' || periodType == null){\r\n\t\treturn;\r\n\t}\r\n\tfrequency\t\t\t\t= +frequency.value;\r\n\tperiodType\t\t\t\t= periodType.value;\r\n\tlet min \t\t\t\t= new Date();\r\n\tlet max \t\t\t\t= new Date();\r\n\tlet maxAmount;\r\n\t\r\n\tif(periodType == 'years'){\r\n\t\tlet curYear = min.getFullYear();\r\n\t\tmin.setFullYear(curYear - frequency);\r\n\t\tmax.setFullYear(curYear + frequency);\r\n\r\n\t\tmaxAmount\t= 52 * frequency - 2;\r\n\t}else if(periodType == 'months'){\r\n\t\tlet curMonth = min.getMonth();\r\n\t\tmin.setMonth(curMonth - frequency);\r\n\t\tmax.setMonth(curMonth + frequency);\r\n\t\tmaxAmount\t= 4 * frequency - 1;\r\n\t}else if(periodType == 'days'){\r\n\t\tlet curDay = min.getDay();\r\n\t\tmin.setDate(curDay - frequency);\r\n\t\tmax.setDate(curDay + frequency);\r\n\r\n\t\tmaxAmount\t= 1 * frequency - 1;\r\n\t}\r\n\r\n\tmin\t= min.toLocaleDateString('en-CA');\r\n\tmax\t= max.toLocaleDateString('en-CA');\r\n\t\r\n\twindowStart.min = min;\r\n\twindowStart.max = max;\r\n\twindowEnd.min = min;\r\n\twindowEnd.max = max;\r\n\r\n\t// Max value for the reminder amount\r\n\treminderAmount.max\t= maxAmount;\r\n\r\n\tif( windowStart.value != '' ){\r\n\t\treminderStart.min\t= windowStart.value;\r\n\t}\r\n\r\n\tif(\r\n\t\treminderAmount.value != '' && \r\n\t\tform.querySelector(`#reminder-period:checked`) != null && \r\n\t\twindowStart.value != '' &&\r\n\t\twindowEnd.value != ''\r\n\t){\r\n\t\tlet reminderPeriod\t\t= (parseInt(reminderAmount.value) + 1);\r\n\t\tlet reminderPeriodType\t= form.querySelector(`#reminder-period:checked`).value;\r\n\t\tif(reminderPeriodType == 'week'){\r\n\t\t\treminderPeriod\t\t= reminderPeriod * 7;\r\n\t\t}\r\n\r\n\t\t// Max value for the reminder start date\r\n\t\tmax \t\t\t\t= windowEnd.valueAsDate;\r\n\t\tlet curDay \t\t\t= max.getDay();\r\n\t\tmax.setDate(curDay - reminderPeriod);\r\n\r\n\t\treminderStart.max\t= max;\r\n\t}\r\n}\r\n\t\r\nfunction clearFormInputs(){\r\n\ttry {\r\n\t\t//Loop to clear the modalform\r\n\t\tmodal.querySelectorAll('input:not([type=hidden]), select, textarea, [name=insert-after], [name=element-id]').forEach(function(el){\r\n\t\t\tif(el.type == 'checkbox'){\r\n\t\t\t\tel.checked = false;\r\n\t\t\t}else{\r\n\t\t\t\tel.value = '';\r\n\t\t\t}\r\n\r\n\t\t\tif(el.type == 'textarea' && el.id != ''){\r\n\t\t\t\tlet editor = tinyMCE.get(el.id);\r\n\t\t\t\tif(editor != null){\r\n\t\t\t\t\teditor.setContent('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(el.type == \"select-one\"){\r\n\t\t\t\tFormFunctions.removeDefaultSelect(el);\r\n\t\t\t\t\r\n\t\t\t\tif(el._niceSelect != undefined){\r\n\t\t\t\t\tel._niceSelect.clear();\r\n\t\t\t\t\tel._niceSelect.update();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thideConditionalfields(modal.querySelector('form'));\r\n\t}\r\n\tcatch(err) {\r\n\t\tconsole.error(err);\r\n\t}\r\n}\r\n\r\nfunction fixElementNumbering(form){\r\n\tform.querySelectorAll('.form-element-wrapper').forEach((el, index)=>{\r\n\t\tel.dataset.priority = index+1;\r\n\t});\r\n}\r\n\r\n//edit existing or add new element\r\nasync function requestEditElementData(target, requestNew=false){\r\n\ttarget.classList.add('clicked');\r\n\r\n\tlet elementId\t\t= -1;\r\n\tif(!requestNew){\r\n\t\telementId\t= formElementWrapper.dataset.elementId;\r\n\t}\r\n\r\n\tlet formId\t\t\t\t\t= target.dataset.formId;\r\n\tif(formId == undefined){\r\n\t\tif(target.closest('.form-element-wrapper') != null){\r\n\t\t\tformId = target.closest('.form-element-wrapper').dataset.formId;\r\n\t\t}else{\r\n\t\t\tformId = document.querySelector('input[type=hidden][name=\"form-id\"').value;\r\n\t\t}\r\n\t}\r\n\r\n\tlet editButton\t\t= target.outerHTML;\r\n\r\n\tlet loader\t\t\t= Main.showLoader(target);\r\n\r\n\tloader.querySelector('.loader').style.margin = '5px 19px 0px 19px';\r\n\tloader.classList.add('clicked');\r\n\t\r\n\tlet formData = new FormData();\r\n\tformData.append('element-id', elementId);\r\n\tformData.append('form-id', formId);\r\n\t\r\n\tlet response = await FormSubmit.fetchRestApi('forms/request_form_element', formData);\r\n\r\n\tif(!response){\r\n\t\treturn;\r\n\t}\r\n\r\n\t//fill the form after we have clicked the edit button\r\n\tdocument.getElementById(`element-builder`).innerHTML = response.elementForm;\r\n\r\n\t//activate tiny mce's\r\n\tmodal.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n\t\ttinymce.execCommand( 'mceRemoveEditor', false, el.id );\r\n\t\ttinymce.execCommand( 'mceAddEditor', false, el.id );\r\n\t});\r\n\r\n\t// Add nice selects\r\n\tmodal.querySelectorAll('.condition-select').forEach(function(select){\r\n\t\tMain.attachNiceSelect(select);\r\n\t});\r\n\r\n\tshowCondionalFields(modal.querySelector('[name=\"formfield[type]\"]').value, modal.querySelector('[name=\"add-form-element-form\"]'));\r\n\r\n\t//fill the element conditions tab\r\n\tmodal.querySelector('.element-conditions-wrapper').innerHTML = response.conditionsHtml;\r\n\r\n\t// Add nice selects\r\n\tmodal.querySelectorAll('select').forEach(function(select){\r\n\t\tMain.attachNiceSelect(select);\r\n\t});\r\n\t\r\n\tMain.showModal(modal);\r\n\r\n\t// Scroll to top of the modal\r\n\tmodal.querySelector(`[name='formfield[type]']`).scrollIntoView({block: \"center\"});\r\n\t\r\n\t//show edit button again\r\n\tloader.outerHTML\t= editButton;\r\n}\r\n\r\n// Add a new element\r\nasync function addFormElement(target, copying=false){\r\n\tlet adding\t\t= true;\r\n\tlet editing\t\t= false;\r\n\r\n\tlet form\t\t= target.closest('form');\r\n\tif(!copying){\r\n\t\tif(form.querySelector('[name=\"element-id\"]').value != ''){\r\n\t\t\tediting\t\t= true;\r\n\t\t\tadding\t\t= false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tlet wrapper;\r\n\r\n\tlet referenceNode\t= document.querySelector('.form-elements .clicked');\r\n\t\r\n\t// we are adding the first element to the form \r\n\tif(referenceNode == null){\r\n\t\t// reload if we are not in the editing screen yet\r\n\t\tif( !window.location.href.includes('formbuilder=true')){\r\n\t\t\tlet combine\t= '&';\r\n\t\t\tif( !window.location.href.includes('?')){\r\n\t\t\t\tcombine = '?';\r\n\t\t\t}\r\n\t\t\twindow.location.href = window.location.href+combine+'formbuilder=true';\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twrapper\t\t\t\t= document.querySelector('.form-elements');\r\n\r\n\t\tpriority\t\t\t= 1;\r\n\t}else{\r\n\t\twrapper\t\t\t\t= referenceNode.closest('.form-element-wrapper');\r\n\r\n\t\tpriority\t\t\t= parseInt(wrapper.dataset.priority) + 1;\r\n\t}\r\n\r\n\t// Show loader\r\n\tif(!editing){\r\n\t\tlet loader \t\t\t\t= Main.showLoader(wrapper, false);\r\n\t\tloader.dataset.priority\t= priority;\r\n\t\tloader.classList.add('form-element-wrapper');\r\n\t\tloader.dataset.id\t\t= -1;\r\n\r\n\t\t// make sure all priorities are correct\r\n\t\tfixElementNumbering(referenceNode.closest('form'));\r\n\r\n\t\tvar indexes\t= {};\r\n\t\tdocument.querySelectorAll(`.form-element-wrapper`).forEach(el => {\r\n\t\t\tindexes[el.dataset.id]\t= el.dataset.priority;\r\n\t\t})\r\n\t\t\r\n\t\tindexes\t\t\t\t\t\t= JSON.stringify(indexes);\r\n\t}\r\n\r\n\tlet response;\r\n\tif(copying){\r\n\t\tlet formData\t\t\t= new FormData();\r\n\t\tformData.append('element-id', wrapper.dataset.id);\r\n\t\tformData.append('form-id', wrapper.dataset.formId);\r\n\t\tformData.append('order', indexes);\r\n\t\tformData.append('insert-after', formElementWrapper.dataset.priority);\r\n\r\n\t\tresponse\t= await FormSubmit.fetchRestApi('forms/copy_form_element', formData);\r\n\t}else if(editing){\r\n\t\tresponse\t= await FormSubmit.submitForm(target, 'forms/add_form_element');\r\n\t}else{\r\n\t\tresponse\t= await FormSubmit.submitForm(target, 'forms/add_form_element', indexes);\r\n\t}\r\n\r\n\tif(response){\r\n\t\t// New Element\r\n\t\tif(editing){\r\n\t\t\treferenceNode.closest('.form-element-wrapper').outerHTML = response.html;\r\n\t\t}else{\r\n\t\t\t//First clear any previous input\r\n\t\t\tclearFormInputs();\r\n\t\t\t\r\n\t\t\t// Replace loader with element\r\n\t\t\tdocument.querySelectorAll(`.loader-wrapper`).forEach(el=>el.outerHTML = response.html);\r\n\r\n\t\t\t//add resize listener\r\n\t\t\tform.querySelectorAll('.resizer').forEach(el=>{resizeOb.observe(el);});\r\n\t\t}\r\n\r\n\t\tMain.hideModals();\r\n\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\tif(referenceNode != null){\r\n\t\t\treferenceNode.classList.remove('clicked');\r\n\t\t}\r\n\t}\r\n\r\n\t// Remove loaders\r\n\tdocument.querySelectorAll(`.loader-wrapper`).forEach(el=>el.remove());\r\n}\r\n\r\nasync function sendElementSize(el, widthPercentage){\r\n\tif(widthPercentage != el.dataset.widthPercentage && Math.abs(widthPercentage - el.dataset.widthPercentage)>5){\r\n\t\tel.dataset.widthPercentage = widthPercentage;\r\n\t\t\r\n\t\t//send new width over AJAX\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append('form-id', el.closest('.form-element-wrapper').dataset.formId);\r\n\t\tformData.append('elementid', el.closest('.form-element-wrapper').dataset.id);\r\n\t\tformData.append('new-width', widthPercentage);\r\n\t\t\r\n\t\tlet response = await FormSubmit.fetchRestApi('forms/edit_formfield_width', formData);\r\n\r\n\t\tif(response){\r\n\t\t\tMain.hideModals();\r\n\r\n\t\t\tMain.displayMessage(response);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function removeElement(target){\r\n\tlet parent\t\t\t= target.parentNode;\r\n\tlet elementWrapper\t= target.closest('.form-element-wrapper');\r\n\tlet formId\t\t\t= elementWrapper.dataset.formId;\r\n\tlet elementIndex \t= elementWrapper.dataset.id;\r\n\tlet form\t\t\t= target.closest('form');\r\n\r\n\tMain.showLoader(target);\r\n\tlet loader\t\t\t= parent.querySelector('.loader-wrapper');\r\n\tloader.style.paddingRight = '10px';\r\n\tloader.classList.remove('loader-wrapper');\r\n\r\n\tlet formData = new FormData();\r\n\tformData.append('form-id', formId);\r\n\r\n\tformData.append('elementindex', elementIndex);\r\n\t\r\n\tlet response = await FormSubmit.fetchRestApi('forms/remove_element', formData);\r\n\r\n\tif(response){\r\n\t\t//remove the formelement row\r\n\t\telementWrapper.remove();\r\n\t\t\r\n\t\tfixElementNumbering(form);\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\n //Fires after element reorder\r\nasync function reorderformelements(event){\r\n\tif(!reorderingBusy){\r\n\t\treorderingBusy = true;\r\n\r\n\t\tfixElementNumbering(event.item.closest('form'));\r\n\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append('form-id', event.item.dataset.formId);\r\n\t\tformData.append('el-id', event.item.dataset.id);\r\n\r\n\t\tlet indexes\t= {};\r\n\t\tdocument.querySelectorAll(`.form-element-wrapper`).forEach(el => {\r\n\t\t\tindexes[el.dataset.id]\t= el.dataset.priority;\r\n\t\t})\r\n\t\t\r\n\t\tformData.append('indexes', JSON.stringify(indexes));\r\n\t\t\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('forms/reorder-form-elements', formData);\r\n\r\n\t\tif(response){\r\n\t\t\treorderingBusy = false;\r\n\r\n\t\t\tMain.displayMessage(response);\r\n\t\t}\r\n\t}else{\r\n\t\tlet options = {\r\n\t\t\ticon: 'error',\r\n\t\t\ttitle: 'ordering already in progress, please wait',\r\n\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t};\r\n\r\n\t\tif(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\r\n\t\tSwal.fire(options);\r\n\t}\r\n}\r\n\r\nasync function saveFormConditions(target){\r\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_element-conditions');\r\n\r\n\tif(response){\r\n\t\tMain.hideModals();\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\nasync function saveFormSettings(target){\r\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_settings');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\nasync function saveFormReminder(target){\r\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_reminder');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\nasync function saveFormEmails(target){\r\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_emails');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\n//listen to element size changes\r\nvar doit;\r\nconst resizeOb = new ResizeObserver(function(entries) {\r\n\tlet element = entries[0].target;\r\n\tif(element.parentNode != undefined){\r\n\t\tvar width\t= entries[0].contentRect.width\r\n\t\tvar widthPercentage = Math.round(width/element.parentNode.offsetWidth * 100);\r\n\t\t\r\n\t\t//Show percentage on screen\r\n\t\tlet el\t= element.querySelector('.width-percentage');\r\n\t\tif(widthPercentage < 99){\r\n\t\t\tel.textContent = widthPercentage + '%';\r\n\t\t}else if(el != null){\r\n\t\t\tel.textContent = '';\r\n\t\t}\r\n\t\t\r\n\t\tclearTimeout(doit);\r\n\t\tdoit = setTimeout(sendElementSize, 500, element, widthPercentage);\r\n\t}\r\n});\r\n\r\n//show conditional fields based on on the element type\r\nfunction showCondionalFields(type, form){\r\n\thideConditionalfields(form);\r\n\r\n\t// hide all elements who do not belong to this type\r\n\tform.querySelectorAll(`.element-option:not(.${type}, .reverse), .element-option.not-${type}`).forEach(el=>el.classList.replace('shouldhide', 'hidden'));\r\n\tform.querySelectorAll(`.element-option.${type}`).forEach(el=>el.classList.replace('hidden', 'shouldhide'));\r\n\r\n\t// Check if this is a multi answer element\r\n\tif(document.querySelector(`.clicked`) != null && document.querySelector(`.clicked`).closest(`.form-element-wrapper.multi-answer-element`) != null){\r\n\t\tform.querySelectorAll(`.element-option.multi-answer-element`).forEach(el=>el.classList.replace('hidden', 'shouldhide'));\r\n\t}\r\n\r\n\tswitch(type) {\r\n\t\tcase 'button':\r\n\t\tcase 'formstep':\r\n\t\tcase 'label':\r\n\t\t\tform.querySelector('[name=\"label-text\"] .element-type').textContent = type;\r\n\t\t\tbreak;\r\n\t\tcase 'info':\r\n\t\t\tform.querySelector('[name=\"infotext\"] .type').textContent = 'info-box';\r\n\t\t\tbreak;\r\n\t\tcase 'hcaptcha':\r\n\t\tcase 'recaptcha':\r\n\t\tcase 'turnstile':\r\n\t\t\tmodal.querySelectorAll(\".shouldhide\").forEach(el=>el.classList.replace('shouldhide', 'hidden'));\r\n\t\t\tmodal.querySelectorAll(`[name=\"elementname\"]`).forEach(el=>el.classList.replace('hidden', 'shouldhide'));\r\n\t\t\tbreak;\r\n\t\tcase 'radio':\r\n\t\tcase 'select':\r\n\t\tcase 'checkbox':\r\n\t\tcase 'datalist':\r\n\t\t\tbreak;\r\n\t\tcase 'p':\r\n\t\t\tform.querySelector('[name=\"infotext\"] .type').textContent = 'Paragraph';\r\n\t\t\tbreak;\r\n\t\tcase 'php':\r\n\t\t\tbreak;\r\n\t\tcase 'file':\r\n\t\tcase 'image':\r\n\t\t\tform.querySelectorAll('.filetype').forEach(el=>{el.textContent = type;});\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t} \r\n}\r\n\r\nfunction hideConditionalfields(form){\r\n\tform.querySelectorAll(`.element-option.reverse`).forEach(el=>el.classList.replace('hidden', 'shouldhide'));\r\n}\r\n\r\nfunction showOrHideIds(target){\r\n\r\n\tconst url \t\t= new URL(window.location);\r\n\r\n\tif(target.dataset.action == 'show'){\r\n\t\turl.searchParams.set('show-id', 1);\r\n\r\n\t\tformWrapper.querySelectorAll('.element-id.hidden').forEach(el=>el.classList.remove('hidden'));\r\n\t\t\r\n\t\ttarget.textContent \t\t= 'Hide ids';\r\n\t\ttarget.dataset.action\t= 'hide';\r\n\t}else{\r\n\t\turl.searchParams.delete('show-id');\r\n\r\n\t\tformWrapper.querySelectorAll('.element-id:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n\t\t\r\n\t\ttarget.textContent \t\t= 'Show ids';\r\n\t\ttarget.dataset.action\t= 'show';\r\n\t}\r\n\t\r\n\twindow.history.pushState({}, '', url);\r\n}\r\n\r\nfunction showOrHideName(target){\r\n\tconst url \t\t= new URL(window.location);\r\n\r\n\tif(target.dataset.action == 'show'){\r\n\t\turl.searchParams.set('show-name', 1);\r\n\r\n\t\tformWrapper.querySelectorAll('.element-name.hidden').forEach(el=>el.classList.remove('hidden'));\r\n\t\t\r\n\t\ttarget.textContent \t\t= 'Hide names';\r\n\t\ttarget.dataset.action\t= 'hide';\r\n\t}else{\r\n\t\turl.searchParams.delete('show-id');\r\n\r\n\t\tformWrapper.querySelectorAll('.element-name:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n\t\t\r\n\t\ttarget.textContent \t\t= 'Show names';\r\n\t\ttarget.dataset.action\t= 'show';\r\n\t}\r\n\r\n\twindow.history.pushState({}, '', url);\r\n}\r\n\r\nfunction maybeRemoveElement(target){\r\n\tif(typeof(Swal)=='undefined'){\r\n\t\tremoveElement(target);\r\n\t}else{\r\n\t\tlet options = {\r\n\t\t\ttitle: 'Are you sure?',\r\n\t\t\ttext: \"This will remove this element\",\r\n\t\t\ticon: 'warning',\r\n\t\t\tshowCancelButton: true,\r\n\t\t\tconfirmButtonColor: '#3085d6',\r\n\t\t\tcancelButtonColor: '#d33',\r\n\t\t\tconfirmButtonText: 'Yes, delete it!'\r\n\t\t}\r\n\r\n\t\tif(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\r\n\t\tSwal.fire(options).then((result) => {\r\n\t\t\tif (result.isConfirmed) {\r\n\t\t\t\tremoveElement(target);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction showOrHideConditionFields(target){\r\n\t//show default conditional field\r\n\ttarget.closest('.rule-row').querySelector('[name*=\"conditional-value\"]').classList.remove('hidden');\r\n\t\r\n\t//hide extra fields\r\n\ttarget.closest('.rule-row').querySelectorAll('.equation-2, .conditional-field-2').forEach(function(el){\r\n\t\tel.classList.add('hidden');\r\n\t});\r\n\t\r\n\t//show both extra fields\r\n\tif(target.dataset.value == '-' || target.dataset.value == '+'){\r\n\t\ttarget.closest('.rule-row').querySelectorAll('.equation-2, .conditional-field-2').forEach(function(el){\r\n\t\t\tel.classList.remove('hidden');\r\n\t\t});\r\n\t//show extra conditional field\r\n\t}else if(target.dataset.value != undefined && target.dataset.value.includes('value')){\r\n\t\ttarget.closest('.rule-row').querySelector('.conditional-field-2').classList.remove('hidden');\r\n\r\n\t\t//hide normal conditional value field\r\n\t\ttarget.closest('.rule-row').querySelector('[name*=\"conditional-value\"]').classList.add('hidden');\r\n\t}else if(target.dataset.value != undefined && (\r\n\t\t\ttarget.dataset.value.includes('changed') || \r\n\t\t\ttarget.dataset.value.includes('clicked') ||\r\n\t\t\ttarget.dataset.value.includes('visible') ||\r\n\t\t\ttarget.dataset.value.includes('invisible') ||\r\n\t\t\ttarget.dataset.value.includes('checked')\r\n\t)){\r\n\t\ttarget.closest('.rule-row').querySelector('[name*=\"conditional-value\"]').classList.add('hidden');\r\n\t}\r\n}\r\n\r\nasync function addConditionRule(target){\r\n\tlet condition\t\t= target.closest('.condition-row');\r\n\tlet row\t\t\t\t= target.closest('.rule-row');\r\n\tlet activeButton\t= row.querySelector('.active');\r\n\t\r\n\tif(\r\n\t\t(\r\n\t\t\tactiveButton == null && \t\t\t\t\t\t\t\t\t\t\t\t\t// there is no active button\r\n\t\t\tcondition.querySelectorAll('.rule-row').length > 1 && \t\t\t\t\t\t// but there are more than one rules\r\n\t\t\trow.dataset.ruleIndex != condition.querySelectorAll('.rule-row').length -1\t// and this is not the last rule\r\n\t\t) ||\r\n\t\t(\r\n\t\t\tactiveButton != null && \t\t\t\t// there is an active button\r\n\t\t\t!target.classList.contains('active')\t// We clicked on the button which was not active\r\n\t\t)\r\n\t){\t\r\n\t\tlet current\t\t= 'OR';\r\n\t\tlet opposite\t= 'AND';\r\n\t\tlet makeActive\t= true;\r\n\t\t\r\n\t\tif(activeButton != null){\r\n\t\t\tif(activeButton.textContent == 'AND'){\r\n\t\t\t\tcurrent\t\t= 'AND';\r\n\t\t\t\topposite\t= 'OR';\r\n\t\t\t}\r\n\r\n\t\t\tlet options = {\r\n\t\t\t\ttitle: 'What do you want to do?',\r\n\t\t\t\tshowDenyButton: true,\r\n\t\t\t\tshowCancelButton: true,\r\n\t\t\t\tconfirmButtonText: `Change ${current} to ${opposite}`,\r\n\t\t\t\tdenyButtonText: 'Add a new rule',\r\n\t\t\t};\r\n\t\r\n\t\t\tif(document.fullscreenElement != null){\r\n\t\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tresult\t= await Swal.fire(options)\r\n\r\n\t\t\t//swap and/or\r\n\t\t\tif (result.isConfirmed) {\r\n\t\t\t\t//make other button inactive\r\n\t\t\t\tactiveButton.classList.remove('active');\r\n\t\t\t//add new rule after this one\r\n\t\t\t}else if (result.isDenied) {\r\n\t\t\t\taddRuleRow(row);\r\n\t\t\t\tmakeActive\t= false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(makeActive){\r\n\t\t\t//make the button active\r\n\t\t\ttarget.classList.add('active');\r\n\t\t\t\r\n\t\t\t//store action \r\n\t\t\trow.querySelector('.combinator').value = target.textContent;\r\n\t\t}\r\n\t\t\t\r\n\t//add new rule at the end\r\n\t}else{\r\n\t\taddRuleRow(row);\r\n\t\t\r\n\t\t//make the button active\r\n\t\ttarget.classList.add('active');\r\n\t\t\r\n\t\t//store action \r\n\t\trow.querySelector('.combinator').value = target.textContent;\r\n\t}\r\n}\r\n\r\nfunction addRuleRow(row){\r\n\t//Insert a new rule row\r\n\tlet clone\t\t= FormFunctions.cloneNode(row);\r\n\t\r\n\tlet cloneIndex\t= parseInt(row.dataset.ruleIndex) + 1;\r\n\r\n\tclone.dataset.ruleIndex = cloneIndex;\r\n\r\n\trow.parentNode.insertBefore(clone, row.nextSibling);\r\n\t\r\n\tfixRuleNumbering(row.closest('.condition-row'));\r\n}\r\n\r\nfunction addOppositeCondition(clone, target){\r\n\t//Set values to opposite\r\n\tclone.querySelectorAll('.element-condition').forEach(function(el){\r\n\t\tif(el.matches('select:not(.nonice,.swal2-select)')){\r\n\t\t\tMain.attachNiceSelect(select);\r\n\t\t}\r\n\t\t\r\n\t\tif(el.tagName == 'SELECT' && el.classList.contains('equation')){\r\n\t\t\t//remove all default selected\r\n\t\t\tFormFunctions.removeDefaultSelect(el);\r\n\t\t\t\r\n\t\t\t//get the original value which was lost during cloning\r\n\t\t\tlet originalSelect \t= target.closest('.condition-row').querySelector('.equation');\r\n\t\t\tlet selIndex\t\t= originalSelect.selectedIndex;\r\n\t\t\t\r\n\t\t\tif(selIndex){\r\n\t\t\t\t//if odd the select the next one\r\n\t\t\t\tif(selIndex % 2){\r\n\t\t\t\t\tel.options[(selIndex + 1)].defaultSelected = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.options[(selIndex - 1)].defaultSelected = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//reflect changes in niceselect\r\n\t\t\tif(el._niceSelect != undefined){\r\n\t\t\t\tel._niceSelect.update();\r\n\t\t\t}\r\n\t\t}else if(el.type == 'radio' && el.classList.contains('element-condition') && (el.value == 'show' || el.value == 'hide')){\r\n\t\t\tif(!el.checked){\r\n\t\t\t\tel.checked = true;\r\n\t\t\t}else{\r\n\t\t\t\tel.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn clone;\r\n}\r\n\r\nfunction addCondition(target){\r\n\tlet clone;\r\n\tlet row = target.closest('.condition-row');\r\n\t\r\n\tif(target.classList.contains('opposite')){\r\n\t\tclone = FormFunctions.cloneNode(row, false);\r\n\t\tclone = addOppositeCondition(clone, target);\r\n\t}else{\r\n\t\tclone = FormFunctions.cloneNode(row);\r\n\t}\r\n\t\r\n\tlet cloneIndex\t= parseInt(row.dataset.conditionIndex) + 1;\r\n\r\n\tclone.dataset.conditionIndex = cloneIndex;\r\n\t\r\n\tif(!target.classList.contains('opposite')){\r\n\t\tclone.querySelectorAll('.active').forEach(function(el){\r\n\t\t\tel.classList.remove('active');\r\n\t\t});\r\n\t}\t\r\n\t\r\n\t//store radio values\r\n\tlet radioValues = {};\r\n\trow.querySelectorAll('input[type=\"radio\"]:checked').forEach(input=>{\r\n\t\tradioValues[input.value]\t= input.value;\r\n\t});\r\n\t\t\r\n\t//insert in page\r\n\trow.parentNode.insertBefore(clone, row.nextSibling);\r\n\t\r\n\tif(!target.classList.contains('opposite')){\r\n\t\t//remove unnecessy rulerows works only after html insert\r\n\t\tlet ruleCount = clone.querySelectorAll('.rule-row').length;\r\n\t\tclone.querySelectorAll('.rule-row').forEach(function(ruleRow){\r\n\t\t\t//only keep the last rule (as that one has the + button)\r\n\t\t\tif(ruleRow.dataset.ruleIndex != ruleCount - 1){\r\n\t\t\t\truleRow.remove();\r\n\t\t\t}else{\r\n\t\t\t\tfixRuleNumbering(ruleRow.closest('.condition-row'));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t//fix numbering\r\n\tfixConditionNumbering();\r\n\t\r\n\t//fix radio's as they get unselected due to same names on insert\r\n\trow.querySelectorAll('input[type=\"radio\"]').forEach(input=>{\r\n\t\tif(radioValues[input.value] != undefined){\r\n\t\t\tinput.checked = true;\r\n\t\t}\r\n\t});\r\n\t\r\n\t\r\n\t//hide button\r\n\ttarget.style.display = 'none';\r\n}\r\n\r\nfunction removeConditionRule(target){\r\n\tlet conditionRow = target.closest('.condition-row');\r\n\t\r\n\t//count rule rows in this condition row\r\n\tif(conditionRow.querySelectorAll('.rule-row').length > 1){\r\n\t\tlet options = {\r\n\t\t\ttitle: 'What do you want to remove?',\r\n\t\t\tshowDenyButton: true,\r\n\t\t\tshowCancelButton: true,\r\n\t\t\tconfirmButtonText: `One condition rule`,\r\n\t\t\tdenyButtonText: `The whole condition`,\r\n\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t};\r\n\r\n\t\tif(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\r\n\t\tSwal.fire(options).then((result) => {\r\n\t\t\t//remove a rule rowe\r\n\t\t\tif (result.isConfirmed) {\r\n\t\t\t\t//get the current row\r\n\t\t\t\tlet ruleRow\t\t= target.closest('.rule-row');\r\n\t\t\t\t\r\n\t\t\t\t//get the current row index\r\n\t\t\t\tlet ruleRowIndex\t= parseInt(ruleRow.dataset.ruleIndex);\r\n\t\t\t\t\r\n\t\t\t\t//Get previous row\r\n\t\t\t\tlet prevRow\t\t= conditionRow.querySelector('[data-rule-index=\"'+(ruleRowIndex - 1)+'\"]');\r\n\t\t\t\t\r\n\t\t\t\tif(prevRow != null){\r\n\t\t\t\t\t//remove the active class from row above if there is no row after this one\r\n\t\t\t\t\tif(conditionRow.querySelector(`[data-rule-index=\"${ruleRowIndex + 1}\"]`) == null){\r\n\t\t\t\t\t\tprevRow.querySelectorAll('.active').forEach(el=>el.classList.remove('active'));\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//clear the hidden input\r\n\t\t\t\t\tprevRow.querySelector('.combinator').value\t= '';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttarget.closest('.rule-row').remove();\r\n\t\t\t\t\r\n\t\t\t\tfixRuleNumbering(conditionRow);\r\n\t\t\t} else if (result.isDenied) {\r\n\t\t\t\tconditionRow.remove();\r\n\t\t\t\tfixConditionNumbering();\r\n\t\t\t}\r\n\t\t});\r\n\t}else{\r\n\t\tlet options = {\r\n\t\t\ttitle: 'Are you sure?',\r\n\t\t\ttext: \"This will remove this condition\",\r\n\t\t\ticon: 'warning',\r\n\t\t\tshowCancelButton: true,\r\n\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\tcancelButtonColor: '#d33',\r\n\t\t\tconfirmButtonText: 'Yes, delete it!'\r\n\t\t};\r\n\r\n\t\tif(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\r\n\t\tSwal.fire(options).then((result) => {\r\n\t\t\tif (result.isConfirmed) {\r\n\t\t\t\tconditionRow.remove();\r\n\t\t\t\tfixConditionNumbering();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction fixRuleNumbering(conditionRow){\r\n\tlet ruleRows\t= conditionRow.querySelectorAll('.element-conditions-wrapper .rule-row');\r\n\tlet i = 0;\r\n\t\r\n\t//loop over all rules in the condition\r\n\truleRows.forEach(ruleRow =>{\r\n\t\truleRow.dataset.ruleIndex = i;\r\n\t\t\r\n\t\truleRow.querySelectorAll('.element-condition').forEach(function(el){\r\n\t\t\t//fix numbering\r\n\t\t\tif(el.id != undefined){\r\n\t\t\t\tel.id = el.id.replace(/([0-9]+\\]\\[rules\\]\\[)[0-9]+/g,\"$1\"+i);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif(el.name != undefined){\r\n\t\t\t\tel.name = el.name.replace(/([0-9]+\\]\\[rules\\]\\[)[0-9]+/g,\"$1\"+i);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\ti++;\r\n\t});\r\n}\r\n\r\nfunction fixConditionNumbering(){\r\n\tlet conditionRows\t= modal.querySelectorAll('.element-conditions-wrapper .condition-row');\r\n\tfor (let i = 0; i < conditionRows.length; i++) {\r\n\t\tconditionRows[i].dataset.conditionIndex = i;\r\n\t\t\r\n\t\tconditionRows[i].querySelectorAll('.element-condition').forEach(function(el){\r\n\t\t\t//fix numbering\r\n\t\t\tif(el.id != undefined){\r\n\t\t\t\tel.id = el.id.replace(/[0-9]+(\\]\\[rules\\]\\[[0-9]+)/g,i+\"$1\")\r\n\t\t\t\tel.id.replace(/[0-9]+(\\]\\[action\\])/g,i+\"$1\");\r\n\t\t\t\tel.id = el.id.replace(/(element-conditions\\[)[0-9]+\\]\\[+/g,\"$1\"+i+'][');\r\n\t\t\t}\r\n\t\t\tif(el.name != undefined){\r\n\t\t\t\tel.name = el.name.replace(/[0-9]+(\\]\\[rules\\]\\[[0-9]+)/g,i+\"$1\");\r\n\t\t\t\tel.name = el.name.replace(/[0-9]+(\\]\\[action\\])/g,i+\"$1\");\r\n\t\t\t\tel.name = el.name.replace(/(element-conditions\\[)[0-9]+\\]\\[+/g,\"$1\"+i+'][');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction focusFirst(){\r\n\tmodal.scrollTo(0,0);\r\n\t\r\n\tconsole.log('scrolling')\r\n\tmodal.querySelector('[name=\"add-form-element-form\"] .nice-select').focus();\r\n}\r\n\r\nreorderingBusy = false;\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\r\n\t//Make the form-elements div sortable\r\n\tlet options = {\r\n\t\thandle: '.movecontrol',\r\n\t\tanimation: 150,\r\n\t\tonEnd: reorderformelements\r\n\t};\r\n\t\r\n\tdocument.querySelectorAll('.form-elements').forEach(el=>{Sortable.create(el, options);});\r\n\t\r\n\t//Listen to resize events on form-element-wrappers\r\n\tdocument.querySelectorAll('.resizer').forEach(el=>{resizeOb.observe(el);});\r\n});\r\n\r\nfunction fromEmailClicked(target){\r\n\tlet div1 = target.closest('.clone-div').querySelector('.emailfromfixed');\r\n\tlet div2 = target.closest('.clone-div').querySelector('.emailfromconditional');\r\n\r\n\tif(target.value == 'fixed'){\r\n\t\tdiv1.classList.remove('hidden');\r\n\t\tdiv2.classList.add('hidden');\r\n\t}else{\r\n\t\tdiv2.classList.remove('hidden');\r\n\t\tdiv1.classList.add('hidden');\r\n\t}\r\n}\r\n\r\nfunction toEmailClicked(target){\r\n\tlet div1 = target.closest('.clone-div').querySelector('.email-tofixed');\r\n\tlet div2 = target.closest('.clone-div').querySelector('.email-toconditional');\r\n\r\n\tif(target.value == 'fixed'){\r\n\t\tdiv1.classList.remove('hidden');\r\n\t\tdiv2.classList.add('hidden');\r\n\t}else{\r\n\t\tdiv2.classList.remove('hidden');\r\n\t\tdiv1.classList.add('hidden');\r\n\t}\r\n}\r\n\r\nfunction placeholderSelect(target){\r\n\tlet value = '';\r\n\tif(target.classList.contains('placeholders')){\r\n\t\tvalue = target.textContent;\r\n\t}else if(target.value != ''){\r\n\t\tvalue = target.value;\r\n\t\ttarget.selectedIndex = '0';\r\n\t}\r\n\t\r\n\tif(value != ''){\r\n\t\tlet options = {\r\n\t\t\ticon: 'success',\r\n\t\t\ttitle: 'Copied '+value,\r\n\t\t\tshowConfirmButton: false,\r\n\t\t\ttimer: 1500\r\n\t\t};\r\n\r\n\t\tif(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\r\n\t\tSwal.fire(options);\r\n\r\n\t\tnavigator.clipboard.writeText(value);\r\n\t}\r\n}\r\n\r\nfunction copyWarningCondition(target){\r\n\t//copy the row\r\n\tlet newNode = FormFunctions.cloneNode(target.closest('.warning-conditions'));\r\n\r\n\ttarget.closest('.conditions-wrapper').insertAdjacentElement('beforeEnd', newNode);\r\n\r\n\t//add the active class\r\n\ttarget.classList.add('active');\r\n\r\n\t//store the value\r\n\ttarget.closest('.warning-conditions').querySelector('.combinator').value = target.value;\r\n\r\n\tfixWarningConditionNumbering(target.closest('.conditions-wrapper'));\r\n}\r\n\r\nfunction removeWarningCondition(target){\r\n\tlet condition\t= target.closest('.warning-conditions');\r\n\r\n\t// Remove the active class of the previous conditions\r\n\tif(condition.nextElementSibling == null){\r\n\t\tcondition.previousElementSibling.querySelector('.active').classList.remove('active');\r\n\r\n\t\t//clear the value\r\n\t\tcondition.previousElementSibling.querySelector('.combinator').value='';\r\n\t}\r\n\r\n\t// remove the condition\r\n\tcondition.remove();\r\n\r\n\tfixWarningConditionNumbering(target.closest('.conditions-wrapper'));\r\n}\r\n\r\n//Catch click events\r\nwindow.addEventListener(\"click\", event => {\r\n\tlet target = event.target;\r\n\t\r\n\tformWrapper\t\t\t\t= target.closest('.sim-form-wrapper');\r\n\tformElementWrapper\t\t= target.closest('.form-element-wrapper');\r\n\t\r\n\tif(formWrapper != null){\r\n\t\tmodal = formWrapper.querySelector('.add-form-element-modal');\r\n\t}\r\n\t\r\n\t/* ELEMENT ACTIONS */\r\n\t\r\n\t//Show form edit controls\r\n\tif (target.name == 'show-id'){\r\n\t\tshowOrHideIds(target);\r\n\t}else if (target.name == 'show-name'){\r\n\t\tshowOrHideName(target);\r\n\t}else if(target.name == 'submit-form-element'){\r\n\t\tevent.stopPropagation();\r\n\t\taddFormElement(target);\r\n\t}else if(target.name == 'submit-form-condition'){\r\n\t\tsaveFormConditions(target);\r\n\t}else if(target.name == 'submit-form-setting'){\r\n\t\tsaveFormSettings(target);\r\n\t}else if(target.name == 'submit-form-reminder'){\r\n\t\tsaveFormReminder(target);\r\n\t}else if(target.name == 'submit-form-emails'){\r\n\t\tsaveFormEmails(target);\r\n\t}else if(target.name == 'autoarchive'){\r\n\t\tlet el = target.closest('.formsettings-wrapper').querySelector('.auto-archive-logic');\r\n\t\tif(target.value == 1){\r\n\t\t\tel.classList.remove('hidden');\r\n\t\t}else{\r\n\t\t\tel.classList.add('hidden');\r\n\t\t}\r\n\t}else if(target.name == 'save-in-meta'){\r\n\t\ttarget.closest('.sim-form.builder').querySelector('.recurring-submissions').classList.toggle('hidden');\r\n\t}else if(target.name == 'formfield[mandatory]' && target.checked){\r\n\t\ttarget.closest('div').querySelector('[name=\"formfield[recommended]\"]').checked=true;\r\n\t}\r\n\t\r\n\t//request form values via AJAX\r\n\telse if (target.classList.contains('edit-form-element')){\r\n\t\trequestEditElementData(target);\r\n\t}\r\n\r\n\telse if (target.classList.contains('copy-form-element')){\r\n\t\ttarget.classList.add('clicked');\r\n\r\n\t\taddFormElement(target, true);\r\n\t}\r\n\r\n\telse if (target.classList.contains('remove-form-element')){\r\n\t\tmaybeRemoveElement(target);\r\n\t}\r\n\r\n\t//open the modal to add an element\r\n\telse if (target.classList.contains('add-form-element') || target.name == 'createform'){\r\n\t\tif( !window.location.href.includes('formbuilder=true')){\r\n\t\t\tlet combine\t= '&';\r\n\t\t\tif( !window.location.href.includes('?')){\r\n\t\t\t\tcombine = '?';\r\n\t\t\t}\r\n\t\t\twindow.location.href = window.location.href+combine+'formbuilder=true';\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t}\r\n\t\trequestEditElementData(target, true);\r\n\t}\r\n\t\r\n\t//actions on element type select\r\n\telse if (target.closest('.element-type') != null){\r\n\t\tshowCondionalFields(target.dataset.value, target.closest('form'));\r\n\t\t\r\n\t\t//if label type is selected, wrap by default\r\n\t\tif(target.dataset.value == 'label'){\r\n\t\t\ttarget.closest('form').querySelector('[name=\"formfield[wrap]\"]').checked\t\t= true;\r\n\t\t\ttarget.closest('form').querySelector('[name=\"formfield[wrap]\"]').defaultChecked\t= true\r\n\t\t}\r\n\t}\r\n\t\r\n\t/* ELEMENT CONDITION ACTIONS */\r\n\t//actions on condition equation select\r\n\telse if (target.closest('.equation') != null){\r\n\t\tshowOrHideConditionFields(target);\r\n\t}\r\n\t\r\n\t//add new conditions_rule\r\n\telse if (target.classList.contains('and-rule') || target.classList.contains('or-rule')){\r\n\t\taddConditionRule(target);\r\n\t}\r\n\t\r\n\t//add new condition row\r\n\telse if (target.classList.contains('add-condition')){\r\n\t\taddCondition(target);\r\n\t}\r\n\t\r\n\t//remove  condition row\r\n\telse if (target.classList.contains('remove-condition')){\r\n\t\tremoveConditionRule(target);\r\n\t}\r\n\t\r\n\t//show copy fields\r\n\telse if (target.classList.contains('showcopyfields')){\r\n\t\tif(target.checked){\r\n\t\t\ttarget.closest('.copyfieldswrapper').querySelector('.copyfields').classList.remove('hidden');\r\n\t\t}else{\r\n\t\t\ttarget.closest('.copyfieldswrapper').querySelector('.copyfields').classList.add('hidden');\r\n\t\t}\r\n\t}\r\n\t\r\n\telse if(target.classList.contains('email-trigger')){\r\n\t\tlet el = target.closest('.clone-div').querySelector('.conditional-field-wrapper');\r\n\t\tif(target.value == 'fieldchanged'){\r\n\t\t\tel.classList.remove('hidden');\r\n\t\t}else{\r\n\t\t\tel.classList.add('hidden');\r\n\t\t}\r\n\r\n\t\tel = target.closest('.clone-div').querySelector('.conditional-fields-wrapper');\r\n\t\tif(target.value == 'fieldschanged'){\r\n\t\t\tel.classList.remove('hidden');\r\n\t\t}else{\r\n\t\t\tel.classList.add('hidden');\r\n\t\t}\r\n\r\n\t\tel = target.closest('.clone-div').querySelector('.submitted-type');\r\n\t\tif(target.value == 'submittedcond'){\r\n\t\t\tel.classList.remove('hidden');\r\n\t\t}else{\r\n\t\t\tel.classList.add('hidden');\r\n\t\t}\r\n\t}\r\n\t\r\n\telse if(target.classList.contains('from-email')){\r\n\t\tfromEmailClicked(target);\r\n\t}\r\n\t\r\n\telse if(target.classList.contains('email-to')){\r\n\t\ttoEmailClicked(target);\r\n\t}\r\n\t\r\n\telse if(target.classList.contains('placeholderselect') || target.classList.contains('placeholders')){\r\n\t\tplaceholderSelect(target);\r\n\t}\r\n\r\n\t//copy warning-conditions row\r\n\telse if(target.matches('.warn-cond')){\r\n\t\tcopyWarningCondition(target);\r\n\t}\r\n\r\n\telse if(target.matches('.remove-warn-cond')){\r\n\t\tremoveWarningCondition(target)\r\n\t}\r\n\r\n\telse if(target.matches('.builder-permissions-rights-form')){\r\n\t\ttarget.closest('div').querySelector('.permission-wrapper').classList.toggle('hidden');\r\n\t}else{\r\n\t\tevent.stopImmediatePropagation();\r\n\t}\r\n});\r\n\r\nwindow.addEventListener('change', ev=>{\r\n\tlet target\t= ev.target;\r\n\tif(target.matches('.meta-key')){\r\n\t\t//if this option has a keys data value\r\n\t\tlet metaIndexes\t= target.list.querySelector(`[value='${target.value}' i]`);\r\n\t\tif(metaIndexes != null && metaIndexes.dataset.keys != undefined){\r\n\t\t\tparent\t= target.closest('.warning-conditions').querySelector('.index-wrapper');\r\n\t\t\t//show the data key selector\r\n\t\t\tparent.classList.remove('hidden');\r\n\t\t\t\r\n\t\t\t//remove all options and add new ones\r\n\t\t\tlet datalist\t= parent.querySelector('.meta-key-index-list');\r\n\t\t\tfor(let i=1; i<datalist.options.length; i++) {\r\n\t\t\t\tdatalist.options[i].remove();\r\n\t\t\t}\r\n\r\n\t\t\t//add the new options\r\n\t\t\tmetaIndexes.dataset.keys.split(',').forEach(key=>{\r\n\t\t\t\tlet opt\t\t\t= document.createElement('option');\r\n\t\t\t\topt.value \t\t= key;\r\n\t\t\t\tdatalist.appendChild(opt);\r\n\t\t\t});\r\n\t\t}\r\n\t}else if(target.matches(\".condition-row [name*='[property-value]']\")){\r\n\t\tlet selectedElement\t= document.querySelector(`.form-element-wrapper[data-element-id=\"${target.value}\"]`);\r\n\t\tif(selectedElement == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet selectedElementType\t= selectedElement.dataset.type;\r\n\r\n\t\t// if select element is of number type\r\n\t\tif(selectedElementType == 'number'){\r\n\t\t\ttarget.closest('.condition-form').querySelectorAll('.addition.hidden').forEach(el=>el.classList.remove('hidden'));\r\n\t\t}else{\r\n\t\t\ttarget.closest('.condition-form').querySelectorAll('.addition:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n\t\t}\r\n\t\t\r\n\t\t// if select element is of date type\r\n\t\tif(selectedElementType == 'date'){\r\n\t\t\ttarget.closest('.condition-form').querySelectorAll('.addition .days.hidden').forEach(el=>el.classList.remove('hidden'));\r\n\t\t}else{\r\n\t\t\ttarget.closest('.condition-form').querySelectorAll('.addition .days:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n\t\t}\r\n\t}else if(target.matches(\"[name*='[submitted-trigger][equation]']\")){\r\n\t\tlet parent\t= target.closest('.submitted-trigger-type');\r\n\t\tlet static\t= parent.querySelector('.staticvalue');\r\n\t\tlet dynamic\t= parent.querySelector('div.dynamicvalue');\r\n\r\n\t\tif(dynamic != null){\r\n\t\t\r\n\t\t\tif(target.value == '==' || target.value == '!=' || target.value == '>' || target.value == '<'){\r\n\t\t\t\tstatic.classList.remove('hidden');\r\n\t\t\t\tdynamic.classList.add('hidden');\r\n\t\t\t}else if(target.value == 'checked' || target.value == '!checked'){\r\n\t\t\t\tdynamic.classList.add('hidden');\r\n\t\t\t\tstatic.classList.add('hidden');\r\n\t\t\t}else{\r\n\t\t\t\tdynamic.classList.remove('hidden');\r\n\t\t\t\tstatic.classList.add('hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t}else if(target.name != undefined && target.name.includes('[equation')){\r\n\t\tlet warningsConditions\t= target.closest('.warning-conditions');\r\n\r\n\t\tif(warningsConditions != null){\r\n\t\t\tif( target.value == 'submitted'){\r\n\t\t\t\twarningsConditions.querySelector(`[name*='[conditional-value]']`).style.visibility = 'hidden';\r\n\t\t\t}else{\r\n\t\t\t\twarningsConditions.querySelector(`[name*='[conditional-value]']`).style.visibility = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}else if(target.matches(`.switch [name='enable']`)){\r\n\t\ttarget.closest(`form`).querySelector(`.recurring-submissions`).classList.toggle('hidden');\r\n\t}else if(target.matches(`.frequency, #period, [name=\"window-start\"], [name=\"window-end\"], [name=\"reminder-startdate\"], #reminder-period, [name=\"reminder-amount\"]`)){\r\n\t\tupdateReminderMinMax(target);\r\n\t}else{\r\n\t\treturn;\r\n\t}\r\n\r\n\tevent.stopImmediatePropagation();\r\n});\r\n\r\nfunction fixWarningConditionNumbering(parent){\r\n\tvar warningConditions\t= parent.querySelectorAll('.warning-conditions');\r\n\tvar i = 0;\r\n\t//loop over all rules in the condition\r\n\twarningConditions.forEach(condition =>{\r\n\t\tcondition.dataset.index = i;\r\n\t\t\r\n\t\tcondition.querySelectorAll('.warning-condition').forEach(function(el){\r\n\t\t\t//fix numbering\r\n\t\t\tif(el.name != undefined){\r\n\t\t\t\tel.name\t= el.name.replace(/([0-9])+/g,i);\r\n\t\t\t}\r\n\r\n\t\t\tif(el.id != undefined){\r\n\t\t\t\tel.id\t= el.id.replace(/([0-9])+/g,i);\r\n\t\t\t}\r\n\r\n\t\t\tif(el.list != undefined){\r\n\t\t\t\tel.setAttribute('list', el.list.id.replace(/([0-9])+/g,i));\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\ti++;\r\n\t});\r\n}\r\n\r\n"],"names":["reorderingBusy","formWrapper","formElementWrapper","modal","doit","fixElementNumbering","form","querySelectorAll","forEach","el","index","dataset","priority","async","requestEditElementData","target","requestNew","classList","add","elementId","formId","undefined","closest","document","querySelector","value","editButton","outerHTML","loader","Main","showLoader","style","margin","formData","FormData","append","response","FormSubmit","fetchRestApi","getElementById","innerHTML","elementForm","tinymce","execCommand","id","select","attachNiceSelect","showCondionalFields","conditionsHtml","showModal","scrollIntoView","block","addFormElement","copying","wrapper","adding","editing","referenceNode","window","location","href","includes","combine","parseInt","indexes","JSON","stringify","submitForm","html","type","checked","editor","tinyMCE","get","setContent","FormFunctions","removeDefaultSelect","_niceSelect","clear","update","hideConditionalfields","err","console","error","clearFormInputs","resizeOb","observe","hideModals","displayMessage","message","remove","sendElementSize","widthPercentage","Math","abs","removeElement","parent","parentNode","elementWrapper","elementIndex","paddingRight","reorderformelements","event","options","icon","title","confirmButtonColor","fullscreenElement","Swal","fire","item","log","ResizeObserver","entries","element","width","contentRect","round","offsetWidth","textContent","clearTimeout","setTimeout","replace","addRuleRow","row","clone","cloneNode","cloneIndex","ruleIndex","insertBefore","nextSibling","fixRuleNumbering","conditionRow","ruleRows","i","ruleRow","name","fixConditionNumbering","conditionRows","length","conditionIndex","fixWarningConditionNumbering","warningConditions","condition","list","setAttribute","addEventListener","handle","animation","onEnd","Sortable","create","url","URL","action","searchParams","set","delete","history","pushState","showOrHideIds","showOrHideName","stopPropagation","saveFormConditions","saveFormSettings","saveFormReminder","saveFormEmails","toggle","contains","text","showCancelButton","cancelButtonColor","confirmButtonText","then","result","isConfirmed","maybeRemoveElement","defaultChecked","showOrHideConditionFields","activeButton","current","opposite","makeActive","showDenyButton","denyButtonText","isDenied","addConditionRule","matches","tagName","selIndex","selectedIndex","defaultSelected","addOppositeCondition","radioValues","input","ruleCount","display","addCondition","ruleRowIndex","prevRow","removeConditionRule","div1","div2","fromEmailClicked","toEmailClicked","showConfirmButton","timer","navigator","clipboard","writeText","placeholderSelect","newNode","insertAdjacentElement","copyWarningCondition","nextElementSibling","previousElementSibling","removeWarningCondition","stopImmediatePropagation","ev","metaIndexes","keys","datalist","split","key","opt","createElement","appendChild","selectedElement","selectedElementType","static","dynamic","warningsConditions","visibility","frequency","periodType","windowStart","windowEnd","reminderStart","reminderAmount","maxAmount","min","Date","max","curYear","getFullYear","setFullYear","curMonth","getMonth","setMonth","curDay","getDay","setDate","toLocaleDateString","reminderPeriod","valueAsDate","updateReminderMinMax"],"sourceRoot":""}