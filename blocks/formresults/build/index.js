(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=window.wp.i18n,o=window.wp.blockEditor,r=window.wp.apiFetch;var s=e.n(r);const i=window.wp.element,l=window.wp.components,a=window.ReactJSXRuntime,c=JSON.parse('{"UU":"sim/formresults"}');(0,t.registerBlockType)(c.UU,{icon:"forms",edit:({attributes:e,setAttributes:t})=>{let{formid:r,onlyOwn:c,archived:d,tableid:w}=e;const[m,f]=(0,i.useState)([]);(0,i.useEffect)((()=>{!async function(){let e=(await s()({path:sim.restApiPrefix+"/forms/get_forms"})).map((e=>({label:e.name,value:e.id})));e.unshift({label:(0,n.__)("Please select a form","sim"),value:""}),f(e)}()}),[]);const[h,u]=(0,i.useState)((0,a.jsx)(l.Spinner,{}));function p(){return(0,a.jsxs)(a.Fragment,{children:[(0,n.__)("Select the form you want to show the results of","sim"),(0,a.jsx)(l.SelectControl,{label:(0,n.__)("Form to show","sim"),value:r,options:m,onChange:e=>{t({formid:e})},__nextHasNoMarginBottom:!0})]})}return(0,i.useEffect)((()=>{!async function(){if(null!=r){u((0,a.jsx)(l.Spinner,{})),null==w&&(w=await s()({path:`${sim.restApiPrefix}/forms/add_form_table?formid=${r}`}),t({tableid:w}));let e=await s()({path:`${sim.restApiPrefix}/forms/show_form_results?formid=${r}&tableid=${String(w)}`});u(e)}}()}),[r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.InspectorControls,{children:(0,a.jsx)(l.Panel,{children:(0,a.jsxs)(l.PanelBody,{children:[p(),(0,a.jsx)(l.ToggleControl,{label:(0,n.__)("Show only personal entries","sim"),checked:!!e.onlyOwn,onChange:()=>t({onlyOwn:!e.onlyOwn})}),(0,a.jsx)(l.ToggleControl,{label:(0,n.__)("Show archived entries","sim"),checked:!!e.archived,onChange:()=>t({archived:!e.archived})})]})})}),(0,a.jsx)("div",{...(0,o.useBlockProps)(),children:""!=h&&h?wp.element.RawHTML({children:h}):p()})]})},save:()=>null})})();